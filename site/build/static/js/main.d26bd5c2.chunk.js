(this["webpackJsonpdoves-and-dandys-app"]=this["webpackJsonpdoves-and-dandys-app"]||[]).push([[0],{315:function(e){e.exports=JSON.parse('[{"size":"S","chest":"37 - 39","neck":"14 - 14.5","sleeve":"32 - 33"},{"size":"M","chest":"40 - 42","neck":"15 - 15.5","sleeve":"33 - 34"},{"size":"L","chest":"43 - 45","neck":"16 - 16.5","sleeve":"34 - 35"},{"size":"XL","chest":"46 - 48","neck":"17 - 17.5","sleeve":"35 - 36"},{"size":"XXL","chest":"49 - 51","neck":"18 - 19.5","sleeve":"36 - 37"},{"size":"XXXL","chest":"52 - 54","neck":"18 - 20","sleeve":"36 - 37"}]')},316:function(e){e.exports=JSON.parse('[{"size":"6","bust":"30.5","waist":"23","hips":"32.5"},{"size":"8","bust":"31.5","waist":"24","hips":"33.5"},{"size":"10","bust":"32.5","waist":"25","hips":"34.5"},{"size":"12","bust":"34","waist":"26.5","hips":"36"},{"size":"14","bust":"36","waist":"28","hips":"38"},{"size":"16","bust":"38","waist":"30","hips":"40"},{"size":"18","bust":"40","waist":"32","hips":"42"},{"size":"20","bust":"42","waist":"34","hips":"44"}]')},317:function(e){e.exports=JSON.parse('[{"size":"XS","sizeNum":"2","bust":"33","waist":"24"},{"size":"XS","sizeNum":"4","bust":"34","waist":"25"},{"size":"S","sizeNum":"6","bust":"35","waist":"26"},{"size":"S","sizeNum":"8","bust":"36","waist":"27"},{"size":"M","sizeNum":"10","bust":"37","waist":"28"},{"size":"M","sizeNum":"12","bust":"38","waist":"30"},{"size":"L","sizeNum":"14","bust":"40","waist":"31"},{"size":"L","sizeNum":"16","bust":"42","waist":"33"},{"size":"XL","sizeNum":"18","bust":"44","waist":"35"},{"size":"XL","sizeNum":"20","bust":"46","waist":"37"},{"size":"XXL","sizeNum":"22","bust":"48","waist":"39"},{"size":"XXL","sizeNum":"24","bust":"50","waist":"41"},{"size":"XXXL","sizeNum":"26","bust":"52","waist":"43"},{"size":"XXXL","sizeNum":"28","bust":"54","waist":"45"}]')},348:function(e,t,n){},359:function(e,t){},361:function(e,t){},371:function(e,t){},373:function(e,t){},400:function(e,t){},402:function(e,t){},403:function(e,t){},408:function(e,t){},410:function(e,t){},416:function(e,t){},418:function(e,t){},437:function(e,t){},449:function(e,t){},452:function(e,t){},498:function(e,t,n){"use strict";n.r(t);var r,a,c,i,s,o,d,l,u,b,j,p,m,h,x,O,f,g,y,v,w,k,C,S,I,D,U,_,$,z,P,q,E,F,T,A,N,R,W,M,B,L,G,X,H,V,Y,J,K,Q,Z,ee,te,ne,re,ae,ce,ie,se,oe,de,le,ue,be,je,pe,me,he,xe,Oe,fe,ge,ye,ve,we,ke,Ce,Se,Ie,De,Ue,_e,$e,ze,Pe,qe,Ee,Fe,Te,Ae,Ne,Re,We,Me,Be,Le,Ge,Xe,He,Ve,Ye,Je,Ke,Qe,Ze,et,tt,nt,rt,at,ct,it,st,ot,dt,lt,ut,bt,jt,pt=n(2),mt=n.n(pt),ht=n(66),xt=n.n(ht),Ot=(n(347),n(348),n(7)),ft=n(30),gt=n(41),yt=n(11),vt=n(47),wt=n(4),kt=n(5),Ct={primary:"rgba(12,4,24,1)",primaryAlt:"rgba(12,4,24,0.7)",secondary:"rgba(227,187,103,1)",secondaryAlt:"rgba(182,146,74,1)",light:"rgba(230,231,203,1)",lightFade:"rgba(230,231,203,0.6)",dark:"rgba(49,24,14,1)",darkFade:"rgba(49,24,14,0.6)",transparent:"rgba(0,0,0,0)",white:"#fff",blue:"rgba(63, 81, 181, 1)",green:"rgba(9, 121, 105, 1)"},St=n(1),It=["text"],Dt=Ct.darkFade,Ut=Ct.dark,_t=kt.b.h4(r||(r=Object(wt.a)(["\n  color: ",";\n  ",";\n  border-bottom: 1px solid ",";\n  font-size: ","\n"])),(function(e){return e.color||Ut}),(function(e){return e.noSpace?{margin:0}:{paddingTop:"0.5rem",paddingBottom:"0.25rem",marginBottom:"0.25rem"}}),(function(e){return e.color||Dt}),(function(e){switch(e.size){case"large":return"1.75rem";case"x-small":return"1rem";case"small":return"1.25rem";default:return"1.5rem"}})),$t=function(e){var t=e.text,n=Object(vt.a)(e,It);return Object(St.jsx)(_t,Object(yt.a)(Object(yt.a)({},n),{},{children:t}))},zt=n(218),Pt=n(122),qt=kt.b.div(a||(a=Object(wt.a)(["\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  height: auto;\n  width: 240px;\n  @media (min-width: 320px) {\n    width: 320px;\n  }\n  @media (min-width: 360px) {\n    width: 360px;\n  }\n  @media (min-width: 414px) {\n    width: 414px;\n  }\n"]))),Et=qt,Ft=kt.b.div(c||(c=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  @media (min-width: 1025px) {\n    flex-direction: row;\n    align-items: flex-end;\n  }\n"]))),Tt=kt.b.div(i||(i=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  flex-direction: column;\n  margin: 0 1rem;\n  @media (min-width: 768px) {\n    height: 400px;\n    flex-direction: row;\n  }\n"]))),At=kt.b.img(s||(s=Object(wt.a)(["\n  border-radius: 6px;\n  height: auto;\n  width: 100%;\n  @media (min-width: 768px) {\n    height: 100%;\n    width: auto;\n  }\n"]))),Nt=kt.b.div(o||(o=Object(wt.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n  @media (min-width: 768px) {\n    flex-direction: column;\n  }\n"]))),Rt=kt.b.img(d||(d=Object(wt.a)(["\n  border-radius: 6px;\n  height: auto;\n  width: 48%;\n  @media (min-width: 768px) {\n    height: 192px;\n    width: auto;\n  }\n"]))),Wt=kt.b.div(l||(l=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),Mt=kt.b.img(u||(u=Object(wt.a)(["\n  border-radius: 6px;\n  justify-self: flex-start;\n  position: relative;\n  right: 1rem;\n"]))),Bt=kt.b.div(b||(b=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),Lt=Object(kt.b)(Et)(j||(j=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0.5rem;\n  width: 96%;\n  @media (min-width: 768px) {\n    max-width: 760px;\n  }\n  @media (min-width: 1025px) {\n    max-width: 985px;\n  }\n"]))),Gt=(kt.b.h4(p||(p=Object(wt.a)(["\n  font-size: 1.5rem;\n  @media (min-width: 1025px) {\n    font-size: 1.75rem;\n    margin-bottom: 1rem;\n  }\n"]))),kt.b.p(m||(m=Object(wt.a)(["\n  text-align: center;\n  font-size: 1.15rem;\n"])))),Xt=kt.b.div(h||(h=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Ht=kt.b.p(x||(x=Object(wt.a)(["\n  font-size: 1.35rem;\n"]))),Vt=Object(kt.b)(zt.a)(O||(O=Object(wt.a)(["\n  font-size: 1.75rem;\n  color: colours.dark;\n"]))),Yt=Object(kt.b)(zt.b)(f||(f=Object(wt.a)(["\n  font-size: 1.75rem;\n  color: colours.dark;\n"]))),Jt=Object(kt.b)(Pt.c)(g||(g=Object(wt.a)(["\n  font-size: 1.75rem;\n  color: ",";\n"])),Ct.dark),Kt=function(){return Object(St.jsxs)(Lt,{children:[Object(St.jsx)($t,{text:"Our Services"}),Object(St.jsx)(Gt,{children:"All of our work is carried out in our small but well equipped workshop in Wales, UK."}),Object(St.jsx)(Gt,{children:"As well as our stock items we also offer a range of high quality bespoke services.  Please get in touch to enquire about any of these."}),Object(St.jsxs)(Xt,{children:[Object(St.jsxs)(Ht,{children:[Object(St.jsx)(Vt,{})," Old West Leather"]}),Object(St.jsxs)(Ht,{children:[Object(St.jsx)(Yt,{})," Bespoke Tailoring"]}),Object(St.jsxs)(Ht,{children:[Object(St.jsx)(Jt,{})," Fixes and Adjustments"]})]})]})},Qt=n(23),Zt=n.n(Qt),en=n(39),tn=kt.b.div(y||(y=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  justify-content: center;\n  align-items: center;\n  padding: 0 1rem;\n  width: 100%;\n  @media (min-width: 768px) {\n    padding: 0 2rem;\n  }\n"]))),nn=kt.b.h1(v||(v=Object(wt.a)(["\n  font-size: 1.35rem;\n  text-align: center;\n  @media (min-width: 1024px) {\n    font-size: 1.75rem;\n  }\n"]))),rn=kt.b.p(w||(w=Object(wt.a)(["\n  text-align: center;\n  font-size: 1.15rem;\n  letter-spacing: 1.5px\n  line-height: 2rem;\n"]))),an=function(e){var t=e.heading,n=e.text;return Object(St.jsxs)(tn,{children:[Object(St.jsxs)(rn,{children:['"',n,'"']}),Object(St.jsx)(nn,{children:t})]})},cn=kt.b.div(k||(k=Object(wt.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 400px;\n  @media (min-width: 414px) {\n    height: 350px;\n  };\n  @media (min-width: 600px) {\n    height: 300px;\n  }\n  @media (min-width: 768px) {\n    height: 250px;\n  }\n"]))),sn=kt.b.div(C||(C=Object(wt.a)(["\n  width: 60px;\n  height: 60px;\n"]))),on=kt.b.div(S||(S=Object(wt.a)(["\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n"]))),dn=Object(kt.b)(en.d)(I||(I=Object(wt.a)(["\n  font-size: 60px;\n  color: ",";\n  :hover {\n    cursor: pointer;\n  }\n"])),Ct.dark),ln=Object(kt.b)(en.c)(D||(D=Object(wt.a)(["\n  font-size: 60px;\n  color: ",";\n  :hover {\n    cursor: pointer;\n  }\n"])),Ct.dark),un=function(){var e=[{id:0,heading:"Allan Lavigne, California USA",text:"Diane knocked it out of the ballpark. When I first put it on straight out of the box it fit like a glove. The symmetry, stitching and lining were clean and professional. And the lines and silhouette were identical to Conrad's. I was so excited and couldn't have been happier with the fantastic work."},{id:1,heading:"Mr Kevin Groninga, Arizona USA",text:"My wife and I have purchased several leather items from Steve and I gotta say, we couldn't have been more pleased with the final products. Steve's attention to detail and craftsmanship is second to none!"},{id:2,heading:"Mrs A Sheppard, Bristol UK",text:"We were very impressed with the quality and professional workmanship you obviously put into your work. I am most grateful for all the help you gave me concerning the colour, design and authenticity prior to commissioning. I would not hesitate in recommending you and your workmanship to anyone."},{id:3,heading:"Alan Williams, Hampshire UK",text:'Well strike me down "Hand of God" you certainly do have!  I was speechless for a minute or so. It is a wonderful piece of work and I am very impressed and will be one proud dude with these on my hips. So much I ordered cuffs and spur straps.'},{id:4,heading:"Mark Effner, Germany",text:"The rig arrived today and I can't believe how beautiful it is.  All the details and everything and you did all that in such a short time. Also the price, payment procedure and shipping... everything perfect. I wish that shopping over the internet would always be like this."}],t=Object(pt.useState)(e[0]),n=Object(Ot.a)(t,2),r=n[0],a=n[1],c=Object(pt.useState)(0),i=Object(Ot.a)(c,2),s=i[0],o=i[1];return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(cn,{children:Object(St.jsx)(an,{heading:r.heading,text:r.text,isLastSlide:s===e.length-1})}),Object(St.jsxs)(on,{children:[s>0?Object(St.jsx)(ln,{onClick:function(){var t=Zt.a.findIndex(e,{heading:r.heading});if(t>0){t--;var n=Zt.a.find(e,{id:t});a(n),o(t)}}}):Object(St.jsx)(sn,{}),s<e.length-1?Object(St.jsx)(dn,{onClick:function(){var t=Zt.a.findIndex(e,{heading:r.heading});if(t<e.length-1){t++;var n=Zt.a.find(e,{id:t});a(n),o(t)}}}):Object(St.jsx)(sn,{})]})]})},bn=function(){return Object(St.jsx)(Lt,{children:Object(St.jsx)(un,{})})},jn=n(568),pn=n(590),mn=function(e){var t=e.colour,n=e.size;return Object(St.jsx)(pn.a,{sx:{color:t?Ct[t]:Ct.dark},size:n})},hn={fancyHeading:"'Libre Bodoni', serif",standard:"'Ubuntu', sans-serif"},xn=hn.standard,On=Ct.dark,fn=function(e){var t=e.text,n=e.linkTo,r=e.variant,a=e.customStyles,c=e.onClick,i=e.name,s=e.value,o=e.disabled,d=e.fullWidth,l=e.loading,u={fontFamily:xn,width:d&&"100%",color:On};a&&(a=Object(yt.a)(Object(yt.a)({},u),a));var b=Object(St.jsx)(jn.a,{onClick:c,name:i,value:s,variant:r||"outlined",style:a||u,disabled:l||o||!1,children:l?Object(St.jsx)(mn,{size:"1.25rem",color:On}):t});return n?Object(St.jsx)(ft.b,{to:n,children:b}):b},gn=kt.b.div(U||(U=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: ",";\n  justify-content: ",";\n  margin: ",";\n  width: 100%;\n"])),(function(e){return"left"===e.align?"flex-start":"center"}),(function(e){return"left"===e.align?"flex-start":"center"}),(function(e){return"left"===e.align?"1rem 0 1rem 1rem":"1rem 0"})),yn=kt.b.h2(_||(_=Object(wt.a)(["\n  font-size: 1.5rem;\n  text-align: ",";\n  padding-bottom: 1rem;\n  width: 85%;\n  @media (min-width: 650px) {\n    font-size: 2rem;\n  }\n  @media (min-width: 768px) {\n    font-size: 2.5rem;\n\n  }\n  @media (min-width: 1024px) {\n    font-size: 2.75rem;\n    width: 70%;\n  }\n"])),(function(e){return e.align||"center"})),vn=kt.b.p($||($=Object(wt.a)(["\n  text-align: ",";\n  font-size: 1.15rem;\n  letter-spacing: 1.5px\n  line-height: 2rem;\n  width: 85%;\n  @media (min-width: 1024px) {\n    font-size: 1.25rem;\n    width: 70%;\n  }\n"])),(function(e){return e.align||"center"})),wn=function(e){var t=e.heading,n=e.text,r=e.secondaryText,a=e.align;return Object(St.jsxs)(gn,{align:a,children:[Object(St.jsx)(yn,{align:a,children:t}),Object(St.jsx)(vn,{align:a,children:n}),r&&Object(St.jsx)(vn,{children:r})]})},kn=Ct.dark,Cn=Ct.light,Sn=kt.b.div(z||(z=Object(wt.a)(["\n  height: 0.25rem;\n  ","\n  ","\n  ","\n"])),(function(e){return e.spaceAbove&&Object(kt.a)(P||(P=Object(wt.a)(["\n      margin-top: 1.5rem;\n    "])))}),(function(e){return e.spaceBelow&&Object(kt.a)(q||(q=Object(wt.a)(["\n      margin-bottom: 1.5rem;\n    "])))}),(function(e){return e.dark&&Object(kt.a)(E||(E=Object(wt.a)(["\n      background-color: ",";\n      color: ",";\n    "])),kn,Cn)})),In=Sn,Dn=function(e){var t=Object(pt.useState)(!1),n=Object(Ot.a)(t,2),r=n[0],a=n[1];return Object(pt.useEffect)((function(){var t=window.matchMedia(e);a(t.matches);var n=function(e){return a(e.matches)};return t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}),[e]),r},Un=function(){var e={isXs:Dn("(max-width: 414px)"),isSm:Dn("(min-width: 415px) and (max-width: 768px)"),isMd:Dn("(min-width: 769px) and (max-width: 1024px)"),isLg:Dn("(min-width: 1025px)"),active:"xs"};return e.isXs&&(e.active="xs"),e.isSm&&(e.active="sm"),e.isMd&&(e.active="md"),e.isLg&&(e.active="lg"),e},_n=function(){var e=Un().isLg,t={height:"5rem",backgroundColor:Ct.dark,borderRadius:"10px",color:Ct.light,fontSize:"1.5rem",width:"220px"};return e&&(t=Object(yt.a)(Object(yt.a)({},t),{},{display:"relative",right:"1rem"})),Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(wn,{headingFontSize:"3rem",heading:"Makers of the finest bespoke, Victorian clothing and Old-West leather.",text:"We specialise in individual designs and styles for both clothing and leather. We use only the finest materials available and all of our products are carefully researched and hand crafted by us."}),Object(St.jsx)(In,{spaceBelow:!0,dark:!0}),Object(St.jsxs)(Ft,{children:[Object(St.jsxs)(Tt,{children:[Object(St.jsx)(At,{src:"/images/gents-wear-landing-page.jpg"}),Object(St.jsxs)(Nt,{children:[Object(St.jsx)(Rt,{src:"/images/ladies-wear-landing-page.jpg"}),Object(St.jsx)(Rt,{src:"/images/old-west-leather-landing-page.jpg"})]})]}),e?Object(St.jsxs)(Wt,{children:[Object(St.jsx)(Mt,{src:"https://placedog.net/200/276"}),Object(St.jsx)(fn,{text:"Browse Shop",linkTo:"/shop",customStyles:t})]}):Object(St.jsx)(fn,{text:"Browse Shop",linkTo:"/shop",customStyles:t})]}),Object(St.jsx)(In,{spaceBelow:!0,spaceAbove:!0,dark:!0}),Object(St.jsxs)(Bt,{children:[Object(St.jsx)(Kt,{}),Object(St.jsx)(bn,{})]}),Object(St.jsx)(In,{spaceBelow:!0})]})},$n=n(9),zn=n.n($n),Pn=n(15),qn=n(100),En=n(569),Fn=n(570),Tn=n(571),An="doves-and-dandys-fkaex",Nn="https://us-east-1.aws.realm.mongodb.com/api/client/v2.0/app/".concat(An,"/graphql"),Rn=new qn.a(An),Wn=function(){var e=Object(Pn.a)(zn.a.mark((function e(){return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("getValidAccessToken fired. app:",Rn),e.prev=1,Rn.currentUser){e.next=9;break}return console.log("Logging in an anonymous user."),e.next=6,Rn.logIn(qn.b.anonymous());case 6:console.log("Logged in an anonymous user:",Rn.currentUser),e.next=11;break;case 9:return e.next=11,Rn.currentUser.refreshCustomData();case 11:return e.abrupt("return",Rn.currentUser.accessToken);case 14:throw e.prev=14,e.t0=e.catch(1),new Error("Failed to get valid access token. Error:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),Mn=new En.a({link:new Fn.a({uri:Nn,fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(Pn.a)(zn.a.mark((function e(t,n){var r;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn();case 2:return r=e.sent,n.headers.Authorization="Bearer ".concat(r),e.abrupt("return",fetch(t,n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),cache:new Tn.a}),Bn=Object(pt.createContext)(),Ln=function(e){var t=e.children,n=Object(pt.useState)(Rn),r=Object(Ot.a)(n,1)[0],a=Object(pt.useState)(Rn.currentUser),c=Object(Ot.a)(a,2),i=c[0],s=c[1],o=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var t;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn.logIn(qn.b.anonymous());case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)}))),[]),d=function(){var e=Object(Pn.a)(zn.a.mark((function e(t,n){var r,a,c;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=qn.b.emailPassword(t,n),e.next=4,Rn.logIn(c);case 4:a=e.sent,s(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r=e.t0;case 11:return e.abrupt("return",{user:a,error:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(Pn.a)(zn.a.mark((function e(){var t;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Rn.currentUser){e.next=12;break}return e.next=4,Rn.currentUser.logOut();case 4:if(!Rn.currentUser){e.next=10;break}return e.next=7,Rn.currentUser.refreshCustomData();case 7:s(Rn.currentUser),e.next=12;break;case 10:return e.next=12,o();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),t=e.t0;case 17:return e.abrupt("return",{error:t});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),u=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var t;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rn.currentUser.functions.db_getFullUser(Rn.currentUser.id);case 3:(t=e.sent)?i.dbUser!==t&&s((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:t})})):i.dbUser&&!Object.keys(i.dbUser).length||s((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:{}})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to retrieve user details from db. Error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i]);Object(pt.useEffect)((function(){i?!i||i.dbUser&&i.dbUser._id||u():o()}),[i,u,o]);var b=Object(yt.a)(Object(yt.a)({},r),{},{currentUser:i,setCurrentUser:s,logIn:d,logOut:l});return Object(St.jsx)(Bn.Provider,{value:b,children:t})},Gn=kt.b.div(F||(F=Object(wt.a)(["\n  background-color: rgba(63, 81, 181, 1);\n  height: 65px;\n  margin-bottom: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n"]))),Xn=kt.b.h4(T||(T=Object(wt.a)(["\n  color: #fff;\n  margin: 0;\n"]))),Hn=kt.b.div(A||(A=Object(wt.a)(["\n  display: flex;\n  gap: 2rem;\n"]))),Vn={borderColor:"#fff",color:"#fff"},Yn=function(){var e=Object(pt.useContext)(Bn),t=Object(gt.g)(),n=function(){var n=Object(Pn.a)(zn.a.mark((function n(r){return zn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.next=3,e.logOut();case 3:t.push("/");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(St.jsxs)(Gn,{children:[Object(St.jsx)(Xn,{children:"Doves & Dandys Dashboard"}),Object(St.jsxs)(Hn,{children:[Object(St.jsx)(fn,{text:"view customer site",linkTo:"/",customStyles:Vn}),Object(St.jsx)(fn,{text:"logout",onClick:n,customStyles:Vn})]})]})},Jn=n(565),Kn=n(586),Qn=kt.b.div(N||(N=Object(wt.a)(["\n  background-color: #fff;\n  border-radius: 6px;\n  display: flex;\n  flex: 1;\n  flex-wrap: wrap;\n  flex-direction: column;\n  margin: 0;\n  justify-content: flex-start;\n  padding: 1rem;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n"]))),Zn=kt.b.div(R||(R=Object(wt.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  border-bottom: 0.03px solid rgba(0,0,0,0.2);\n  margin-bottom: 0.5rem;\n  padding-bottom: 0.25rem;\n  min-height: 2.5rem;\n"]))),er=kt.b.h6(W||(W=Object(wt.a)(["\n  margin: 0 1rem 0 0;\n  width: 10rem;\n"]))),tr=kt.b.h4(M||(M=Object(wt.a)(["\n  margin: 0;\n  flex-wrap: wrap;\n"]))),nr=kt.b.div(B||(B=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n"]))),rr=Object(kt.b)(Zn)(L||(L=Object(wt.a)(["\n  margin-top: 1rem;\n  height: 12rem;\n"]))),ar=kt.b.p(G||(G=Object(wt.a)(["\n  font-size: 1.15rem;\n  margin: 0;\n  line-height: 1.5rem;\n  height: 12rem;\n  overflow: scroll;\n"]))),cr=kt.b.div(X||(X=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  gap: 1rem;\n"]))),ir=kt.b.div(H||(H=Object(wt.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),sr=kt.b.div(V||(V=Object(wt.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),or=Object(kt.b)(Zn)(Y||(Y=Object(wt.a)(["\n  background-color: ",";\n  color: ",";\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 0.5rem;\n  border: none;\n  padding: 1rem;\n  border-radius: 10px;\n"])),Ct.green,Ct.white),dr=kt.b.div(J||(J=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem\n"]))),lr=kt.b.div(K||(K=Object(wt.a)(["\n  margin: 0 1rem;\n"]))),ur=kt.b.div(Q||(Q=Object(wt.a)(["\n  display: grid;\n  height: calc(100vh - 97px);\n  grid-template-columns: repeat(13, 1fr);\n  grid-template-rows: 1fr 1fr;\n  column-gap: 2rem;\n  row-gap: 2rem;\n  margin: 1rem;\n"]))),br=kt.b.div(Z||(Z=Object(wt.a)(["\n  background-color: rgba(63, 81, 181, 1);\n  border-radius: 10px;\n  color: white;\n  font-weight: bold;\n  padding: 1rem;\n"]))),jr=Object(kt.b)(br)(ee||(ee=Object(wt.a)(["\n  grid-column: 1 / 7;\n  grid-row: 1 / 3;\n  display: flex;\n  flex-direction: column;\n"]))),pr=Object(kt.b)(br)(te||(te=Object(wt.a)(["\n  grid-column: 7 / 14;\n  grid-row: 1 / 2;\n"]))),mr=(Object(kt.b)(br)(ne||(ne=Object(wt.a)(["\n  grid-column: 7 / 14;\n  grid-row: 2 / 3;\n"]))),kt.b.div(re||(re=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 87%;\n"])))),hr=kt.b.div(ae||(ae=Object(wt.a)(["\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n  margin: 1rem;\n"]))),xr=kt.b.div(ce||(ce=Object(wt.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex: 1;\n"]))),Or=function(e){var t=e.order,n=t.delivery;return Object(St.jsxs)(Qn,{children:[Object(St.jsx)($t,{text:"Delivery Details",size:"small"}),t&&n?Object(St.jsxs)("div",{children:[Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Name"}),Object(St.jsxs)(tr,{children:[n.firstName," ",n.lastName]})]}),Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Email"}),Object(St.jsx)(tr,{children:n.email})]}),Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Phone"}),Object(St.jsx)(tr,{children:n.phone})]}),Object(St.jsx)(Zn,{children:n.address?Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(er,{children:"Address"}),Object(St.jsxs)(nr,{children:[Object(St.jsx)(tr,{children:n.address.line1}),Object(St.jsx)(tr,{children:n.address.line2}),Object(St.jsx)(tr,{children:n.address.city}),Object(St.jsx)(tr,{children:n.address.postcode.toUpperCase()}),Object(St.jsx)(tr,{children:n.address.country.toUpperCase()})]})]}):Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(er,{children:"Store Pick-up"}),Object(St.jsx)(en.g,{style:{fontSize:"1.5rem",color:"green"}})]})}),Object(St.jsxs)(rr,{children:[Object(St.jsx)(er,{children:"Notes"}),Object(St.jsx)(ar,{children:t.extraInfo})]})]}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})})]})},fr=n(582),gr=n(595),yr=n(591),vr=n(580),wr=n(575),kr=n(577),Cr=function(e){var t=e.name,n=e.value,r=e.required,a=e.label,c=e.handleChange,i=e.options,s=e.variant,o=e.disabled,d=e.style;return Object(St.jsxs)(yr.a,{fullWidth:!0,sx:d,children:[Object(St.jsx)(vr.a,{children:a}),Object(St.jsx)(wr.a,{id:t,name:t,value:n,label:a,"aria-describedby":t,required:r,variant:s||"filled",onChange:c,disabled:o,sx:{backgroundColor:"transparent",background:"transparent",borderRadius:"4px"},MenuProps:{sx:{".MuiMenu-list":{padding:"0.5rem"},".MuiMenuItem-root":{fontSize:"1.25rem",width:"100%"},".MuiButtonBase-root":{justifyContent:"flex-start"},".MuiMenu-paper":{width:"200px"}}},children:i.map((function(e,t){return Object(St.jsx)(kr.a,{value:e.value,children:e.name},t)}))})]})},Sr=kt.b.div(ie||(ie=Object(wt.a)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  margin: 0.25rem;\n"]))),Ir=kt.b.span(se||(se=Object(wt.a)(["\n  color: ",";\n  font-size: 0.8rem;\n  margin: 0;\n"])),(function(e){return e.colour})),Dr=Object(kt.b)(en.f)(oe||(oe=Object(wt.a)(["\n  color: green;\n  font-size: 1.25rem;\n"]))),Ur=Object(kt.b)(en.m)(de||(de=Object(wt.a)(["\n  color: orange;\n  font-size: 1.25rem;\n"]))),_r=Object(kt.b)(en.b)(le||(le=Object(wt.a)(["\n  color: red; \n  font-size: 1.25rem;\n"]))),$r=function(e){var t,n,r=e.text;switch(e.type){case"success":t=Object(St.jsx)(Dr,{}),n="green";break;case"warning":t=Object(St.jsx)(Ur,{}),n="orange";break;case"error":t=Object(St.jsx)(_r,{}),n="red";break;default:throw new Error("Invalid user message type")}return Object(St.jsxs)(Sr,{children:[t,Object(St.jsx)(Ir,{colour:n,children:r})]})},zr=function(e){var t=e.toString(),n=t.length,r=t.substring(0,n-2),a=t.substring(n,n-2);return parseFloat("".concat(r,".").concat(a))},Pr=function(e){var t=e.toString().split(".");return t[1]?parseInt("".concat(t[0]).concat(t[1])):parseInt(t[0])},qr=function(e){return parseFloat(e).toFixed(2)},Er=function(e){return{GBP:"\xa3",USD:"$",EUR:"\u20ac"}[e]},Fr=function(e,t){return"".concat(Er(t)).concat(e["price".concat(t)])},Tr=function(e,t,n){var r=parseFloat(e),a=zr(t);return!(!n&&r>a||n&&r>a-n)},Ar=function(e,t,n){var r=parseFloat(e),a=n?parseFloat(n):null,c=parseFloat(t);return a?r===c-a:r===c},Nr=function(e){var t=e.order,n=Object(pt.useContext)(Bn),r=Object(pt.useState)(),a=Object(Ot.a)(r,2),c=a[0],i=a[1],s=Object(pt.useState)(!1),o=Object(Ot.a)(s,2),d=o[0],l=o[1],u=Object(pt.useState)(),b=Object(Ot.a)(u,2),j=b[0],p=b[1],m=Object(pt.useState)(0),h=Object(Ot.a)(m,2),x=h[0],O=h[1],f=Object(pt.useState)(0),g=Object(Ot.a)(f,2),y=g[0],v=g[1],w=Object(pt.useState)({reason:"requested_by_customer"}),k=Object(Ot.a)(w,2),C=k[0],S=k[1];Object(pt.useEffect)((function(){if(t&&t.refunds&&t.refunds.length){var e=t.refunds.map((function(e){return parseFloat(e.amount)})).reduce((function(e,t){return e+t}));O(e)}}),[t]);var I=function(){var e=Object(Pn.a)(zn.a.mark((function e(){var t,r,a,c,s;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),C.amount&&C.reason){e.next=4;break}return i("Refund must include an amount and reason"),e.abrupt("return");case 4:if(!Tr(C.amount,j.amount,x)){e.next=25;break}return t=qr(C.amount),r=zr(j.amount),a=Ar(t,r,x),c=Pr(t),e.next=12,n.currentUser.functions.stripe_refundPaymentIntent(j.id,c,t,C.reason,a);case 12:if("succeeded"!==(s=e.sent).status){e.next=17;break}O(x+parseFloat(t)),e.next=23;break;case 17:if("pending"!==s.status){e.next=21;break}v(y+parseFloat(t)),e.next=23;break;case 21:return i("Refund failed"),e.abrupt("return");case 23:e.next=27;break;case 25:return i("Total refund amount exceeds the order amount"),e.abrupt("return");case 27:l(!1),i("");case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var r;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.currentUser.functions.stripe_retrievePaymentIntent(t.paymentIntentId);case 3:r=e.sent,p(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to retrieve payment intent",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n.currentUser,t]);return Object(pt.useEffect)((function(){t&&t.paymentIntentId&&!j&&D()}),[t,j,D]),Object(pt.useEffect)((function(){c&&d&&l(!1)}),[c,d]),Object(St.jsxs)(cr,{children:[Object(St.jsxs)(Qn,{children:[Object(St.jsx)($t,{text:"Payment Details",size:"small"}),t&&j?Object(St.jsxs)("div",{children:[Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Date Paid"}),Object(St.jsx)(tr,{children:t.datePaid.split("T")[0]})]}),Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Amount Paid"}),Object(St.jsx)(tr,{children:zr(j.amount)})]}),Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Currency"}),Object(St.jsx)(tr,{children:j.currency.toUpperCase()})]}),Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Pending Refunds"}),Object(St.jsx)(tr,{children:qr(y)})]}),Object(St.jsxs)(Zn,{children:[Object(St.jsx)(er,{children:"Completed Refunds"}),Object(St.jsx)(tr,{children:qr(x)})]})]}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})})]}),Object(St.jsx)(Qn,{children:Object(St.jsxs)(ir,{children:[Object(St.jsx)($t,{text:"Refund",size:"small"}),Object(St.jsx)(Cr,{name:"refundReason",value:C.reason,label:"Select a reason for the refund",handleChange:function(e){var t=e.target.value;S((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{reason:t})}))},required:!0,options:[{name:"Requested by customer",value:"requested_by_customer"},{name:"Duplicate order",value:"duplicate"},{name:"Fraudulent",value:"fraudulent"}],variant:"outlined",isAdminSelect:!0}),Object(St.jsx)(fr.a,{label:"Refund amount",variant:"outlined",required:!0,InputProps:{startAdornment:Object(St.jsx)(gr.a,{position:"start",children:"\xa3"})},onChange:function(e){var t=e.target.value;S((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{amount:t})}))}}),Object(St.jsx)(fn,{text:"refund order",onClick:I,fullWidth:!0,loading:d}),c&&Object(St.jsx)($r,{text:c,type:"error"})]})})]})},Rr=n(589),Wr=function(e,t){var n=Object(pt.useRef)({called:!1,loading:!1,data:{},error:{}}),r=Object(Rr.a)(e,{variables:t},{new:!0}),a=Object(Ot.a)(r,2),c=a[0],i=a[1],s=i.data,o=i.loading,d=i.error;return o&&(n.current.called=!0,n.current.loading=!0),d&&(n.current.error=d,n.current.called=!0,n.current.loading=!1),s&&(n.current.data=s,n.current.called=!0,n.current.loading=!1),[c,{data:n.current.data,loading:n.current.loading,error:n.current.error,called:n.current.called,resetResults:function(){n.current={}}}]},Mr=n(38),Br=Object(Mr.b)(ue||(ue=Object(wt.a)(["\n  fragment UserDetails on User {\n    _id\n    user_id\n    firstName\n    lastName\n    email\n    phone\n    type\n  }\n"]))),Lr=Object(Mr.b)(be||(be=Object(wt.a)(["\n  fragment CategoryDetails on Category {\n    _id\n    category_id\n    description\n    image\n    name\n  }\n"]))),Gr=Object(Mr.b)(je||(je=Object(wt.a)(["\n  fragment SubCategoryDetails on SubCategory {\n    _id\n    subCategory_id\n    category\n    description\n    image\n    name\n  }\n"]))),Xr=Object(Mr.b)(pe||(pe=Object(wt.a)(["\n  fragment ProductDetails on Product {\n    _id\n    product_id\n    category\n    description\n    images\n    name\n    numInStock\n    priceGBP\n    priceUSD\n    priceEUR\n    weightInGrams\n    category\n    subCategory\n  }\n"]))),Hr=Object(Mr.b)(me||(me=Object(wt.a)(["\n  fragment OrderDetails on Order {\n    _id\n    order_id\n    extraInfo\n    paymentIntentId\n    orderStatus\n    paymentStatus\n    dateCreated\n    datePaid\n    dateAccepted\n    dateDispatched\n    stripeAmountPaid\n    currency\n  }\n"]))),Vr=Object(Mr.b)(he||(he=Object(wt.a)(["\n  fragment OrderItemDetails on OrderItem {\n    _id\n    orderItem_id\n    info\n    quantity\n  }\n"]))),Yr=Object(Mr.b)(xe||(xe=Object(wt.a)(["\n  fragment DeliveryDetails on Delivery {\n    _id\n    delivery_id\n    firstName\n    lastName\n    email\n    phone\n    price\n  }\n"]))),Jr=Object(Mr.b)(Oe||(Oe=Object(wt.a)(["\n  fragment AddressDetails on Address {\n    _id\n    address_id\n    line1\n    line2\n    city\n    county\n    postcode\n    country\n    isDefault\n  }\n"]))),Kr=Object(Mr.b)(fe||(fe=Object(wt.a)(["\n  fragment RefundDetails on Refund {\n    _id\n    refund_id\n    amount\n    reason\n    date\n    status\n  }\n"]))),Qr={AddUser:Object(Mr.a)(ge||(ge=Object(wt.a)(["\n    ","\n    mutation(\n      $_id: ObjectId!,\n      $user_id: String!,\n      $type: String!,\n      $email: String\n    ) {\n      insertOneUser(data: {\n        _id: $_id,\n        user_id: $user_id,\n        type: $type,\n        email: $email,\n      } ) {\n        ...UserDetails\n      }\n    }\n  "])),Br),AddUserWithOrders:Object(Mr.a)(ye||(ye=Object(wt.a)(["\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    mutation(\n      $_id: ObjectId!,\n      $user_id: String!,\n      $firstName: String,\n      $lastName: String,\n      $email: String,\n      $phone: String,\n      $type: String!,\n      $orders: [String]\n    ) {\n      insertOneUser(data: {\n        _id: $_id,\n        user_id: $user_id,\n        firstName: $firstName,\n        lastName: $lastName,\n        email: $email,\n        phone: $phone,\n        type: $type,\n        orders: {\n          link: $orders\n        },\n      } ) {\n        ...UserDetails\n        orders {\n          ...OrderDetails\n          delivery {\n            ...DeliveryDetails\n            address {\n              ...AddressDetails\n            }\n          }\n          orderItems {\n            ...OrderItemDetails\n            product {\n              ...ProductDetails\n            }\n          }\n        }\n      }\n    }\n  "])),Br,Hr,Vr,Xr,Yr,Jr),UpdateUser:Object(Mr.a)(ve||(ve=Object(wt.a)(["\n    ","\n    ","\n    ","\n    ","\n    ","\n    mutation(\n      $id: ObjectId!,\n      $firstName: String,\n      $lastName: String,\n      $email: String,\n      $phone: String,\n      $type: String\n    ) {\n      updateOneUser(\n        query: { _id: $id },\n        set: {\n          firstName: $firstName,\n          lastName: $lastName,\n          email: $email,\n          phone: $phone,\n          type: $type\n        } ) {\n        ...UserDetails\n        addresses {\n          ...AddressDetails\n        }\n        orders {\n          ...OrderDetails\n          orderItems {\n            ...OrderItemDetails\n            product {\n              ...ProductDetails\n            }\n          }\n        }\n      }\n    }\n  "])),Br,Hr,Vr,Xr,Jr),UpdateUserAddresses:Object(Mr.a)(we||(we=Object(wt.a)(["\n    ","\n    ","\n    ","\n    ","\n    ","\n    mutation(\n      $id: ObjectId!,\n      $addresses: [String!]\n    ) {\n      updateOneUser(\n        query: { _id: $id },\n        set: {\n          addresses: { link: $addresses }\n        } ) {\n        ...UserDetails\n        addresses {\n          ...AddressDetails\n        }\n        orders {\n          ...OrderDetails\n          orderItems {\n            ...OrderItemDetails\n            product {\n              ...ProductDetails\n            }\n          }\n        }\n      }\n    }\n  "])),Br,Hr,Vr,Xr,Jr),UpdateUserOrders:Object(Mr.a)(ke||(ke=Object(wt.a)(["\n    ","\n    mutation(\n      $user_id: String!,\n      $orders: [String!]\n    ) {\n      updateOneUser(\n        query: { user_id: $user_id },\n        set: {\n          orders: { link: $orders }\n        } ) {\n        ...UserDetails\n      }\n    }\n  "])),Br),DeleteUser:Object(Mr.a)(Ce||(Ce=Object(wt.a)(["\n    ","\n    mutation($id: ObjectId!) {\n      deleteOneUser(query: { _id: $id }) {\n        ...UserDetails\n      }\n    }\n  "])),Br),UpsertProduct:Object(Mr.a)(Se||(Se=Object(wt.a)(["\n  ","\n    mutation(\n      $_id: ObjectId,\n      $product_id: String!,\n      $name: String!,\n      $images: [String]!,\n      $category: String!,\n      $subCategory: String!,\n      $description: String!,\n      $priceGBP: Int!,\n      $priceUSD: Int!,\n      $priceEUR: Int!,\n      $numInStock: Int!,\n      $weightInGrams: Int!\n    ) {\n      upsertProduct(input: {\n          _id: $_id,\n          product_id: $product_id,\n          name: $name,\n          images: $images,\n          category: $category,\n          subCategory: $subCategory,\n          description: $description,\n          priceGBP: $priceGBP,\n          priceUSD: $priceUSD,\n          priceEUR: $priceEUR,\n          numInStock: $numInStock,\n          weightInGrams: $weightInGrams\n          }\n       ) {\n        ...ProductDetails\n      }\n    }\n  "])),Xr),DeleteProduct:Object(Mr.a)(Ie||(Ie=Object(wt.a)(["\n    mutation(\n      $product_id: String!\n    ) {\n      deleteProduct(\n        input: $product_id\n      ) {\n        productId\n        isDeleted\n      }\n    }\n  "]))),UpsertSubCategory:Object(Mr.a)(De||(De=Object(wt.a)(["\n  ","\n    mutation(\n      $_id: ObjectId,\n      $subCategory_id: String!\n      $name: String!,\n      $description: String!,\n      $image: String!,\n      $category: String!\n    ) {\n      upsertSubCategory(input: {\n        _id: $_id,\n        subCategory_id: $subCategory_id\n        name: $name,\n        description: $description,\n        image: $image,\n        category: $category\n      } ) {\n        ...SubCategoryDetails\n      }\n    }\n  "])),Gr),DeleteSubCategory:Object(Mr.a)(Ue||(Ue=Object(wt.a)(["\n    mutation(\n      $subCategory_id: String!\n    ) {\n      deleteSubCategory(\n        input: $subCategory_id\n      ) {\n        subCategoryId\n        isDeleted\n      }\n    }\n  "]))),UpsertCategory:Object(Mr.a)(_e||(_e=Object(wt.a)(["\n  ","\n    mutation(\n      $_id: ObjectId,\n      $category_id: String!\n      $name: String!,\n      $description: String!,\n      $image: String!\n    ) {\n      upsertCategory(input: {\n        _id: $_id,\n        category_id: $category_id\n        name: $name,\n        description: $description,\n        image: $image\n      } ) {\n        ...CategoryDetails\n      }\n    }\n  "])),Lr),DeleteCategory:Object(Mr.a)($e||($e=Object(wt.a)(["\n    ","\n    mutation(\n      $category_id: String!\n    ) {\n      deleteOneCategory(query: {\n        category_id: $category_id\n      } ) {\n        ...CategoryDetails\n      }\n    }\n  "])),Lr),CreateGuestOrder:Object(Mr.a)(ze||(ze=Object(wt.a)(["\n    ","\n    ","\n    ","\n    ",'\n    mutation(\n      $order_id: String!,\n      $user_ObjectId: ObjectId!,\n      $user_id: String!,\n      $orderItem_id: String!,\n      $product_id: String!,\n      $dateCreated: DateTime!\n    ) {\n      insertOneOrder(data: {\n        order_id: $order_id,\n        orderStatus: "pendingInCart",\n        paymentStatus: "notAttempted"\n        dateCreated: $dateCreated\n        customer: {\n          link: "user_id",\n          create: {\n            _id: $user_ObjectId,\n            user_id: $user_id,\n            type: "guest",\n            orders: {\n              link: [$order_id]\n            }\n          }\n        },\n        orderItems: {\n          link: ["orderItem_id"],\n          create: [{\n            orderItem_id: $orderItem_id,\n            quantity: 1,\n            order: {\n              link: $order_id\n            }\n            product: {\n              link: $product_id\n            }\n          }]\n        }\n      } ) {\n        customer {\n          ...UserDetails\n          orders {\n            ...OrderDetails\n            orderItems {\n              ...OrderItemDetails\n              product {\n                ...ProductDetails\n              }\n            }\n          }\n        }\n      }\n    }\n  '])),Br,Xr,Hr,Vr),CreateOrderForExistingCustomer:Object(Mr.a)(Pe||(Pe=Object(wt.a)(["\n    ","\n    ","\n    ","\n    ",'\n    mutation(\n      $order_id: String!,\n      $user_id: String!,\n      $orderItem_id: String!,\n      $product_id: String!,\n      $dateCreated: DateTime!\n    ) {\n      insertOneOrder(data: {\n        order_id: $order_id,\n        orderStatus: "pendingInCart",\n        paymentStatus: "notAttempted"\n        dateCreated: $dateCreated\n        customer: {\n          link: $user_id,\n        },\n        orderItems: {\n          link: ["orderItem_id"],\n          create: [{\n            orderItem_id: $orderItem_id,\n            quantity: 1,\n            order: {\n              link: $order_id\n            },\n            product: {\n              link: $product_id\n            }\n          }]\n        }\n      }) {\n        ...OrderDetails\n        customer {\n          ...UserDetails\n          orders {\n            ...OrderDetails\n          }\n        }\n        orderItems {\n          ...OrderItemDetails\n          product {\n            ...ProductDetails\n          }\n        }\n      }\n    }\n  '])),Br,Xr,Hr,Vr),CreateNewOrderItem:Object(Mr.a)(qe||(qe=Object(wt.a)(["\n    ","\n    ","\n    ","\n    mutation(\n      $orderItem_id: String!,\n      $order_id: String!,\n      $product_id: String!,\n      $info: String,\n      $quantity: Int = 1\n    ) {\n      insertOneOrderItem(data: {\n        orderItem_id: $orderItem_id,\n        info: $info,\n        quantity: $quantity,\n        order: {\n          link: $order_id\n        },\n        product: {\n          link: $product_id\n        }\n      } ) {\n        ...OrderItemDetails\n        order {\n          ...OrderDetails\n        },\n        product {\n          ...ProductDetails\n        }\n      }\n    }\n  "])),Vr,Hr,Xr),UpdateOrder:Object(Mr.a)(Ee||(Ee=Object(wt.a)(["\n    ","\n    ","\n    ","\n    mutation(\n      $id: ObjectId!,\n      $extraInfo: String,\n      $paymentIntentId: String,\n      $orderStatus: String,\n      $paymentStatus: String,\n      $dateCreated: DateTime,\n      $datePaid: DateTime,\n      $dateAccepted: DateTime,\n      $dateDispatched: DateTime,\n      $currency: String\n    ) {\n      updateOneOrder(\n        query: { _id: $id },\n        set: {\n          extraInfo: $extraInfo,\n          paymentIntentId: $paymentIntentId\n          orderStatus: $orderStatus,\n          paymentStatus: $paymentStatus,\n          dateCreated: $dateCreated,\n          datePaid: $datePaid,\n          dateAccepted: $dateAccepted,\n          dateDispatched: $dateDispatched,\n          currency: $currency\n        } ) {\n        ...OrderDetails\n        orderItems {\n          ...OrderItemDetails\n          product {\n            ...ProductDetails\n          }\n        }\n      }\n    }\n  "])),Hr,Vr,Xr),DeleteOrder:Object(Mr.a)(Fe||(Fe=Object(wt.a)(["\n    ","\n    mutation($id: ObjectId!) {\n      deleteOneOrder(query: { _id: $id }) {\n        ...OrderDetails\n      }\n    }\n  "])),Hr),UpdateItemInOrder:Object(Mr.a)(Te||(Te=Object(wt.a)(["\n    ","\n    ","\n    ","\n    mutation(\n      $id: ObjectId!,\n      $info: String,\n      $quantity: Int\n    ) {\n      updateOneOrderItem(\n        query: { _id: $id },\n        set: {\n          info: $info,\n          quantity: $quantity\n        } ) {\n        ...OrderItemDetails\n        order {\n          ...OrderDetails\n          orderItems {\n            ...OrderItemDetails\n            product {\n              ...ProductDetails\n            }\n          }\n        }\n      }\n    }\n  "])),Vr,Hr,Xr),DeleteOrderItem:Object(Mr.a)(Ae||(Ae=Object(wt.a)(["\n    ","\n    mutation(\n      $orderItem_id: String!\n    ) {\n      deleteOneOrderItem(\n        query: { orderItem_id: $orderItem_id }\n      ) {\n        ...OrderItemDetails\n      }\n    }\n  "])),Vr),UpdateOrderItemsInOrder:Object(Mr.a)(Ne||(Ne=Object(wt.a)(["\n    ","\n    ","\n    ","\n    mutation(\n      $order_id: String!,\n      $orderItems: [String!]\n    ) {\n      updateOneOrder(\n        query: { order_id: $order_id},\n        set: {\n          orderItems: { link: $orderItems }\n        } ) {\n          ...OrderDetails\n          orderItems {\n            ...OrderItemDetails\n            product {\n              ...ProductDetails\n            }\n          }\n      }\n    }\n  "])),Vr,Hr,Xr),CreateAddress:Object(Mr.a)(Re||(Re=Object(wt.a)(["\n    ",'\n    mutation(\n      $address_id: String!,\n      $line1: String!,\n      $line2: String,\n      $city: String!,\n      $county: String!,\n      $postcode: String!,\n      $country: String = "UK",\n      $isDefault: Boolean = false\n    ) {\n      insertOneAddress(\n        data: {\n          address_id: $address_id,\n          line1: $line1,\n          line2: $line2,\n          city: $city,\n          county: $county,\n          postcode: $postcode,\n          country: $country,\n          isDefault: $isDefault\n        }\n      ) {\n        ...AddressDetails\n      }\n    }\n  '])),Jr),UpdateAddress:Object(Mr.a)(We||(We=Object(wt.a)(["\n    ","\n    mutation(\n      $address_id: String!,\n      $line1: String,\n      $line2: String,\n      $city: String,\n      $county: String,\n      $postcode: String,\n      $country: String,\n      $isDefault: Boolean\n    ) {\n      updateOneAddress(\n        query: { address_id: $address_id },\n        set: {\n          line1: $line1,\n          line2: $line2,\n          city: $city,\n          county: $county,\n          postcode: $postcode,\n          country: $country,\n          isDefault: $isDefault\n        }\n      ) {\n        ...AddressDetails\n      }\n    }\n  "])),Jr),AddDeliveryDetailsToOrder:Object(Mr.a)(Me||(Me=Object(wt.a)(["\n    ","\n    ",'\n    mutation(\n      $order_id: String!,\n      $delivery_id: String!,\n      $firstName: String!,\n      $lastName: String!,\n      $email: String!,\n      $address_id: String,\n      $phone: String,\n      $price: Int\n    ) {\n      updateOneOrder(\n        query: { order_id: $order_id },\n        set: {\n          delivery: {\n            link: "delivery_id",\n            create: {\n              delivery_id: $delivery_id,\n              firstName: $firstName,\n              lastName: $lastName,\n              email: $email,\n              phone: $phone,\n              price: $price,\n              address: {\n                link: $address_id\n              }\n            }\n          }\n        }\n      ) {\n        ...OrderDetails,\n        delivery {\n          ...DeliveryDetails\n        }\n      }\n    }\n  '])),Hr,Yr),AddPickUpDetailsToOrder:Object(Mr.a)(Be||(Be=Object(wt.a)(["\n  ","\n  ",'\n  mutation(\n    $order_id: String!,\n    $delivery_id: String!,\n    $firstName: String!,\n    $lastName: String!,\n    $email: String!,\n    $phone: String\n  ) {\n    updateOneOrder(\n      query: { order_id: $order_id },\n      set: {\n        delivery: {\n          link: "delivery_id",\n          create: {\n            delivery_id: $delivery_id,\n            firstName: $firstName,\n            lastName: $lastName,\n            email: $email,\n            phone: $phone\n          }\n        }\n      }\n    ) {\n      ...OrderDetails,\n      delivery {\n        ...DeliveryDetails\n      }\n    }\n  }\n'])),Hr,Yr)},Zr=function(e){if("object"===typeof e)return!Object.keys(e).length},ea=function(e){if(e&&"string"===typeof e)return"".concat(e.substring(0,1).toUpperCase()).concat(e.substring(1))},ta=function(e){if("string"===typeof e)return e.split("T")[0]},na=function(e,t){var n={};for(var r in t)e[r]!==t[r]&&(n[r]=t[r]);return{updatedFields:n,hasUpdatedFields:!!Object.keys(n).length}},ra=function(e){var t=e.order,n=Object(pt.useState)({}),r=Object(Ot.a)(n,2),a=r[0],c=r[1],i=Object(pt.useState)(t?t.orderStatus:null),s=Object(Ot.a)(i,2),o=s[0],d=s[1],l=Wr(Qr.UpdateOrder),u=Object(Ot.a)(l,1)[0],b=function(){var e=Object(Pn.a)(zn.a.mark((function e(n,r){var i,s,o;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),c({button:r,state:!0}),i={id:t._id,orderStatus:r},"archived"!==r&&(s=ea(r),o="date".concat(s),i[o]=new Date(Date.now())),e.next=7,u({variables:i});case 7:d(r),c({button:r,state:!1}),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),new Error("Failed to update order. Error:",e.t0);case 14:return e.prev=14,!0===a.state&&c({}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(pt.useEffect)((function(){t&&t.orderStatus!==o&&d(t.orderStatus)}),[t,o]),Object(St.jsxs)(Qn,{children:[Object(St.jsx)($t,{text:"Order Status",size:"small"}),t&&o?Object(St.jsxs)(sr,{children:[Object(St.jsxs)(or,{children:[Object(St.jsx)(er,{children:"Current Status"}),Object(St.jsx)(tr,{children:Zt.a.startCase(o)})]}),Object(St.jsxs)(dr,{children:[Object(St.jsx)(fn,{text:"Accept Order",onClick:function(e){return b(e,"accepted")},fullWidth:!0,disabled:"accepted"===o||"dispatched"===o||"archived"===o,loading:!0===a.status&&"accepted"===a.button}),Object(St.jsx)(fn,{text:"Mark as dispatched",onClick:function(e){return b(e,"dispatched")},fullWidth:!0,disabled:"dispatched"===o||"archived"===o,loading:!0===a.status&&"dispatched"===a.button}),Object(St.jsx)(fn,{text:"Archive Order",onClick:function(e){return b(e,"archived")},fullWidth:!0,disabled:"archived"===o,loading:!0===a.status&&"archived"===a.button})]})]}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})})]})},aa=kt.b.div(Le||(Le=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  align-items: flex-end;\n  margin: ",";\n  justify-content: space-between;\n"])),(function(e){return e.margin||0})),ca=function(e){var t=e.text,n=e.onClick,r=e.linkTo,a=e.buttonText,c=e.headingSize,i=e.color,s=e.margin;return Object(St.jsxs)(aa,{margin:s,children:[Object(St.jsx)("div",{style:{flex:1},children:Object(St.jsx)($t,{text:t,noSpace:!0,color:i,size:c})}),Object(St.jsx)(fn,{text:a,onClick:n||null,linkTo:r||null,customStyles:{marginTop:"0.5rem",color:"white"===i&&"#fff",borderColor:"white"===i&&"#fff"}})]})},ia=(Object(Mr.b)(Ge||(Ge=Object(wt.a)(["\n  ","\n  query($id: ObjectId!) {\n    user(query: { _id: $id }) {\n      ...UserDetails\n    }\n  }\n"])),Br),Object(Mr.b)(Xe||(Xe=Object(wt.a)(["\n  ","\n  query($email: String!) {\n    user(query: { email: $email }) {\n      ...UserDetails\n    }\n  }\n"])),Br),Object(Mr.b)(He||(He=Object(wt.a)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  query($id: ObjectId!) {\n    user(query: { _id: $id }) {\n      ...UserDetails\n      addresses {\n        ...AddressDetails\n      }\n      orders {\n        ...OrderDetails\n        orderItems {\n          ...OrderItemDetails\n          product {\n            ...ProductDetails\n          }\n        }\n      }\n    }\n  }\n"])),Br,Hr,Vr,Xr,Jr),Object(Mr.b)(Ve||(Ve=Object(wt.a)(["\n","\n","\n query($categoryId: String!) {\n   category(query: { category_id: $categoryId, }) {\n     ...CategoryDetails\n     subCategories {\n       ...SubCategoryDetails\n     }\n   }\n }\n"])),Lr,Gr)),sa=Object(Mr.b)(Ye||(Ye=Object(wt.a)(["\n","\n","\n query($name: String!) {\n   category(query: { name: $name, }) {\n     ...CategoryDetails\n     subCategories {\n       ...SubCategoryDetails\n     }\n   }\n }\n"])),Lr,Gr),oa=Object(Mr.b)(Je||(Je=Object(wt.a)(["\n  ","\n  query {\n    categories {\n      ...CategoryDetails\n    }\n  }\n"])),Lr),da=Object(Mr.b)(Ke||(Ke=Object(wt.a)(["\n  ","\n  query($name: String) {\n    categorySearch(input: $name) {\n      ...CategoryDetails\n    }\n  }\n"])),Lr),la=Object(Mr.b)(Qe||(Qe=Object(wt.a)(["\n  ","\n  ","\n  query {\n    categories {\n      ...CategoryDetails\n      subCategories {\n        ...SubCategoryDetails\n      }\n    }\n  }\n"])),Lr,Gr),ua=Object(Mr.b)(Ze||(Ze=Object(wt.a)(["\n","\n","\n query($name: String!, $category: String!) {\n   subCategory(query: {\n     AND: [\n       { name: $name },\n       { category: $category }\n     ]\n   }) {\n     ...SubCategoryDetails\n     products {\n       ...ProductDetails\n     }\n   }\n }\n"])),Gr,Xr),ba=Object(Mr.b)(et||(et=Object(wt.a)(["\n","\n","\n query($subCategoryId: String!) {\n   subCategory(query: { subCategory_id: $subCategoryId }) {\n     ...SubCategoryDetails\n     products {\n       ...ProductDetails\n     }\n   }\n }\n"])),Gr,Xr),ja=(Object(Mr.b)(tt||(tt=Object(wt.a)(["\n  ","\n  query {\n    subCategories {\n      ...SubCategoryDetails\n    }\n  }\n"])),Gr),Object(Mr.b)(nt||(nt=Object(wt.a)(["\n  ","\n  query($name: String) {\n    subCategorySearch(input: $name) {\n      ...SubCategoryDetails\n    }\n  }\n"])),Gr)),pa=Object(Mr.b)(rt||(rt=Object(wt.a)(["\n  ","\n  query(\n    $id: ObjectId,\n    $productId: String\n  ) {\n    product(\n      query: {\n        _id: $id,\n        product_id: $productId\n      } ) {\n      ...ProductDetails\n    }\n  }\n"])),Xr),ma=(Object(Mr.b)(at||(at=Object(wt.a)(["\n  ","\n  query {\n    products {\n      ...ProductDetails\n    }\n  }\n"])),Xr),Object(Mr.b)(ct||(ct=Object(wt.a)(["\n  ","\n  query($name: String) {\n    productSearch(input: $name) {\n      ...ProductDetails\n    }\n  }\n"])),Xr)),ha=Object(Mr.b)(it||(it=Object(wt.a)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  query($orderId: String!) {\n    order(query: { order_id: $orderId }) {\n      ...OrderDetails\n      delivery {\n        ...DeliveryDetails\n        address {\n          ...AddressDetails\n        }\n      }\n      customer {\n        ...UserDetails\n      }\n      orderItems {\n        ...OrderItemDetails\n        product {\n          ...ProductDetails\n        }\n      }\n      refunds {\n        ...RefundDetails\n      }\n    }\n  }\n"])),Hr,Vr,Xr,Br,Yr,Jr,Kr),xa=(Object(Mr.b)(st||(st=Object(wt.a)(["\n  ","\n  query($id: ObjectId!) {\n    order(query: { _id: $id }) {\n      ...OrderDetails\n    }\n  }\n"])),Hr),Object(Mr.b)(ot||(ot=Object(wt.a)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  query($paymentIntentId: String!) {\n    order(query: { paymentIntentId: $paymentIntentId }) {\n      ...OrderDetails,\n      delivery {\n        ...DeliveryDetails\n        address {\n          ...AddressDetails\n        }\n      }\n      orderItems {\n        ...OrderItemDetails\n        product {\n          ...ProductDetails\n        }\n      }\n    }\n  }\n"])),Hr,Vr,Xr,Yr,Jr)),Oa=(Object(Mr.b)(dt||(dt=Object(wt.a)(["\n  ","\n  query {\n    orders {\n      ...OrderDetails\n    }\n  }\n"])),Hr),Object(Mr.b)(lt||(lt=Object(wt.a)(["\n  ","\n  ","\n  ","\n  ",'\n  query {\n    orders(\n      query: {\n        AND: [\n          {\n            OR: [\n              { paymentStatus: "successful" },\n              { paymentStatus: "refunded" },\n            ]\n          },\n          { orderStatus_ne: "archived" }\n        ]\n      },\n      sortBy: DATEPAID_DESC\n    ) {\n      ...OrderDetails\n      orderItems {\n        ...OrderItemDetails\n        product {\n          ...ProductDetails\n        }\n      }\n      customer {\n        ...UserDetails\n      }\n    }\n  }\n'])),Hr,Vr,Xr,Br)),fa=Object(Mr.b)(ut||(ut=Object(wt.a)(["\n  ","\n  ","\n  ","\n  ",'\n  query {\n    orders(\n      query: { orderStatus: "archived" },\n      sortBy: DATEPAID_DESC\n    ) {\n      ...OrderDetails\n      orderItems {\n        ...OrderItemDetails\n        product {\n          ...ProductDetails\n        }\n      }\n      customer {\n        ...UserDetails\n      }\n    }\n  }\n'])),Hr,Vr,Xr,Br),ga=(Object(Mr.b)(bt||(bt=Object(wt.a)(["\n  ","\n  query($delivery_id: String!) {\n    delivery(query: { delivery_id: $delivery_id }) {\n      ...DeliveryDetails\n    }\n  }\n"])),Yr),Object(Mr.b)(jt||(jt=Object(wt.a)(["\n  ","\n  query(\n    $addressIds: [String]!\n  ) {\n    addresses(query: {\n      address_id_in: $addressIds\n    } ) {\n      ...AddressDetails\n    }\n  }\n"])),Jr),function(e){var t=e.open,n=e.handleClose,r=e.orderId,a=Object(pt.useState)(),c=Object(Ot.a)(a,2),i=c[0],s=c[1],o=Object(Jn.a)(ha,{variables:{orderId:r},skip:!r}),d=o.data,l=o.loading;return Object(pt.useEffect)((function(){d&&d.order&&s(d.order)}),[d,l]),Object(St.jsxs)(Kn.a,{open:t,fullScreen:!0,sx:{".MuiDialog-paper":{backgroundColor:"rgba(63, 81, 181, 1)"}},children:[Object(St.jsx)(lr,{children:Object(St.jsx)(ca,{text:"Manage Orders",onClick:n,buttonText:"back to dashboard",color:"white"})}),Object(St.jsxs)(hr,{children:[Object(St.jsx)(Or,{order:i||{}}),Object(St.jsx)(Nr,{order:i||{}}),Object(St.jsx)(ra,{order:i||{}})]})]})}),ya=n(597),va=n(592),wa=n(598),ka=n(599),Ca=n(600),Sa=n(601),Ia=n(602),Da=n(34),Ua=n.n(Da),_a=function(e){var t=e.columns,n=e.rows,r=e.size,a=e.handleRowClick,c=e.style;return Object(St.jsx)(ya.a,{sx:c||{background:"transparent",WebkitBoxShadow:"-3px -1px 10px 2px rgba(0,0,0,0.2)",boxShadow:"-3px -1px 10px 2px rgba(0,0,0,0.2)"},component:va.a,children:Object(St.jsxs)(wa.a,{sx:{width:"100%"},size:r||"medium",children:[Object(St.jsx)(ka.a,{children:Object(St.jsx)(Ca.a,{children:t.map((function(e){return Object(St.jsx)(Sa.a,{align:"left",children:e.label},Ua()())}))})}),Object(St.jsx)(Ia.a,{children:n.map((function(e){return Object(St.jsx)(Ca.a,{sx:{"&:last-child td, &:last-child th":{border:0},":hover":{cursor:a?"pointer":"cursor"}},hover:!!a,onClick:a?function(){return a(e.orderId)}:null,children:t.map((function(t){return Object(St.jsx)(Sa.a,{align:"left",children:e[t.name]},Ua()())}))},Ua()())}))})]})})};_a.defaultProps={maxRows:25};var $a,za,Pa,qa,Ea,Fa,Ta,Aa,Na,Ra,Wa,Ma,Ba,La,Ga,Xa,Ha,Va,Ya,Ja,Ka,Qa,Za,ec,tc,nc,rc,ac,cc,ic,sc,oc,dc,lc,uc,bc,jc,pc,mc,hc,xc,Oc,fc,gc,yc,vc,wc,kc,Cc,Sc,Ic,Dc,Uc,_c,$c,zc,Pc,qc,Ec,Fc,Tc,Ac,Nc,Rc,Wc,Mc,Bc,Lc,Gc,Xc,Hc,Vc,Yc,Jc,Kc=_a,Qc=function(){var e=Object(pt.useState)(!1),t=Object(Ot.a)(e,2),n=t[0],r=t[1],a=Object(pt.useState)("active"),c=Object(Ot.a)(a,2),i=c[0],s=c[1],o=Object(pt.useState)([]),d=Object(Ot.a)(o,2),l=d[0],u=d[1],b=Object(pt.useRef)(""),j=Object(Jn.a)(Oa),p=j.data,m=j.loading,h=j.error,x=Object(Jn.a)(fa).data;Object(pt.useEffect)((function(){try{var e="active"===i?p:x;if(e&&e.orders&&e.orders.length){var t=e.orders.map((function(e){var t="Multiple products";return 1===e.orderItems.length&&(t=e.orderItems[0].product.name),function(e,t,n,r){return{orderId:e,product:t,paymentStatus:Zt.a.startCase(n),orderStatus:Zt.a.startCase(r)}}(e.order_id,t,e.paymentStatus,e.orderStatus)}));u(t)}else if(h)throw new Error("Graphql error:",h.message)}catch(n){console.error(n)}}),[i,p,x,h]);return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(ga,{open:n,handleClose:function(){r(!1)},orderId:b.current}),Object(St.jsxs)(jr,{children:[Object(St.jsx)(ca,{text:"".concat(Zt.a.startCase(i)," Orders"),size:"small",color:"white",onClick:function(){"active"===i&&s("archived"),"archived"===i&&s("active")},buttonText:"View ".concat("active"===i?"Archived":"Active"," Orders")}),m?Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"white"})}):l?Object(St.jsx)(Kc,{rows:l,columns:[{name:"orderId",label:"Order ID"},{name:"product",label:"Product"},{name:"paymentStatus",label:"Payment Status"},{name:"orderStatus",label:"Order Status"}],size:"small",handleRowClick:function(e){b.current=e,r(!0)},style:{marginTop:"1rem"}}):Object(St.jsx)("p",{style:{color:"white"},children:"No active orders"})]})]})},Zc={border:"0.25rem solid white",color:"white",width:"220px",height:"200px",fontSize:"1.25rem",borderRadius:"25px"},ei=function(e){var t=e.type,n=e.handleSelection;return Object(St.jsx)(fn,{text:t,onClick:n,customStyles:Zc})},ti=n(8),ni=n(143),ri=function(e,t){var n;switch(t){case"product":n=["name","description","category","subCategory","images","priceGBP","priceUSD","priceEUR","numInStock","weightInGrams"];break;case"subCategory":n=["name","description","category","image"];break;case"category":n=["name","description","image"];break;default:throw new Error("Invalid type '".concat(t,"' supplied to validateInventoryFields"))}var r,a=[],c=Object(ni.a)(n);try{for(c.s();!(r=c.n()).done;){var i=r.value;e[i]||a.push(i)}}catch(d){c.e(d)}finally{c.f()}if(a.length)return{result:"failed",failedItems:a};for(var s in e){var o=e[s];switch(s){case"name":case"description":case"image":("string"!==typeof o||o.trim().length<1)&&a.push(s);break;case"images":o.length||a.push(s);break;case"priceGBP":case"priceUSD":case"priceEUR":0===parseFloat(o)&&a.push(s);break;case"numInStock":case"weightInGrams":"number"!==typeof parseInt(o)&&a.push(s)}}return a.length?{result:"failed",failedItems:a}:{result:"passed"}},ai=function(e){var t=Object.assign(e,{});for(var n in t){var r=t[n];"string"===typeof r&&(r=r.trim())}return t},ci=function(e){switch(e){case"product":return{name:"",description:"",images:[],category:"",subCategory:"",numInStock:"",priceGBP:"",priceUSD:"",priceEUR:"",weightInGrams:""};case"subCategory":return{name:"",description:"",image:"",category:""};case"category":return{name:"",description:"",image:""};default:throw new Error("Invalid inventory type '".concat(e,"' supplied to getInitialFormFields"))}},ii=function(e,t){if(!e||0===Object.keys(e).length||!t||"string"!==typeof t)throw new Error("Failed to supply proper input to getFormattedRow");var n={id:e["".concat(t,"_id")],name:Zt.a.startCase(e.name)};switch(t){case"product":return Object(yt.a)(Object(yt.a)({},n),{},{numInStock:e.numInStock,price:e.priceGBP,category:Zt.a.startCase(e.category),subcategory:Zt.a.startCase(e.subCategory)});case"subCategory":return Object(yt.a)(Object(yt.a)({},n),{},{category:Zt.a.startCase(e.category)});case"category":return n;default:throw new Error("Invalid inventory type '".concat(t,"' supplied to getFormattedRow"))}},si=["__typename","_id"],oi=function(e){var t=e.tableSection,n=e.editSection,r=e.inventoryType,a=e.open,c=e.handleClose,i=Object(pt.useState)([]),s=Object(Ot.a)(i,2),o=s[0],d=s[1],l=Object(pt.useState)({}),u=Object(Ot.a)(l,2),b=u[0],j=u[1],p=Object(pt.useRef)({}),m=Object(pt.useRef)(ci(r)),h=Object(pt.useState)(m.current),x=Object(Ot.a)(h,2),O=x[0],f=x[1],g=Object(pt.useState)({type:"",state:!1}),y=Object(Ot.a)(g,2),v=y[0],w=y[1],k=Object(pt.useState)({type:"",text:""}),C=Object(Ot.a)(k,2),S=C[0],I=C[1],D=Object(pt.useState)(!1),U=Object(Ot.a)(D,2),_=U[0],$=U[1],z="".concat(r,"_id"),P=Object(pt.useRef)(b?b[z]:null),q=!b||Zr(b),E=ea(r),F=Wr(Qr["Upsert".concat(E)]),T=Object(Ot.a)(F,1)[0],A=Wr(Qr["Delete".concat(E)]),N=Object(Ot.a)(A,1)[0],R=t,W=n,M=function(){j({}),f(m.current),w({type:"",state:!1}),I({type:"",text:""}),$(!1)},B=function(){var e=Object(Pn.a)(zn.a.mark((function e(){var t,n,a,c,i,s,l,u,j,p,m,h;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w({type:"upsert",state:!0}),t=ri(O,r),n=t.result,a=t.failedItems,"failed"!==n){e.next=7;break}return console.log("failedItems",a),I({type:"error",text:"Some form fields have failed validation, please check and resubmit"}),e.abrupt("return");case 7:if(c=ai(O),e.t0=yt.a,e.t1=ti.a,e.t2={},e.t3=z,!q){e.next=20;break}return e.t5="".concat(r,"-"),e.next=16,Ua()();case 16:e.t6=e.sent,e.t4=e.t5.concat.call(e.t5,e.t6),e.next=21;break;case 20:e.t4=b[z];case 21:return e.t7=e.t4,e.t8=(0,e.t1)(e.t2,e.t3,e.t7),e.t9=c,i=(0,e.t0)(e.t8,e.t9),q||(i._id=b._id),e.next=28,T({variables:i});case 28:s=e.sent,l=s.data,u=l["upsert".concat(E)],u.__typename,u._id,j=Object(vt.a)(u,si),f((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{upsertedItem:j})})),p=ii(j,r),m=JSON.parse(JSON.stringify(o)),q?m.push(p):(h=m.findIndex((function(e){return e.id===b[z]})),m[h]=p),d(m),I({type:"success",text:"".concat(E,q?" added!":" updated!")}),e.next=42;break;case 39:e.prev=39,e.t10=e.catch(0),I({type:"error",text:q?"Failed to create new ".concat(r):"Failed to update ".concat(r)});case 42:return e.prev=42,w({type:"",state:!1}),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[0,39,42,45]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(Pn.a)(zn.a.mark((function e(){var t,n,r,a;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w({type:"delete",state:!0}),e.next=4,N({variables:Object(ti.a)({},z,b[z])});case 4:t=e.sent,n=t.data,(r=n["delete".concat(E)])&&r.isDeleted&&(a=o.filter((function(e){return e.id!==b[z]})),d(a),f(m.current)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),I({type:"error",text:"Failed to delete item"});case 13:return e.prev=13,w({type:"",state:!1}),$(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,10,13,17]])})));return function(){return e.apply(this,arguments)}}(),G=Object(pt.useCallback)((function(){for(var e={},t=0,n=Object.keys(m.current);t<n.length;t++){var r=n[t];e[r]="name"===r?Zt.a.startCase(b[r]):b[r]}e!==O&&f(e)}),[b,O]);return Object(pt.useEffect)((function(){!b||b&&Zr(b)&&P.current?(f(m),S&&I(null),_&&$(!1),P.current=null):b&&b[z]&&b[z]!==P.current&&(G(),S&&I(null),_&&$(!1),P.current=b[z])}),[b,G,S,_,z]),Object(pt.useEffect)((function(){var e=ci(r);e!==m.current&&(m.current=e)}),[r]),Object(St.jsxs)(Kn.a,{open:a,fullScreen:!0,sx:{".MuiDialog-paper":{backgroundColor:"rgba(63, 81, 181, 1)"}},children:[Object(St.jsx)(ca,{text:r?"Manage ".concat(Zt.a.startCase(r)):"Manage Inventory",onClick:function(){M(),d([]),c()},buttonText:"Back to dashboard",color:"white",margin:"0 1rem"}),Object(St.jsxs)(hr,{children:[Object(St.jsx)(R,{rows:o,updateRows:d,selectedRow:b,reset:!a,handleItemSelected:function(e){j(e),p.current=e},lastSelectedItem:p}),Object(St.jsx)(W,{fields:O,updateFields:f,handleUpsertItem:B,handleDeleteItemRequest:function(){if(b&&!Zr(b)){var e={category:"subCategories",subCategory:"products"},t=b[e[r]];t&&t.length?I({type:"error",text:"Must move or delete all related ".concat(e[r]," before deleting a ").concat(Zt.a.kebabCase(r))}):$(!0)}else I({type:"error",text:"Must select a ".concat(r," to delete")})},handleDeleteItem:L,handleResetForm:M,loading:v,message:S,deleteRequested:_,shouldCreateNewItem:q})]})]})},di=n(566),li=n(605),ui=n(572),bi=n(603),ji=n(604),pi=n(307),mi=n.n(pi),hi=n(308),xi=n.n(hi),Oi=n(309),fi=n.n(Oi),gi=n(310),yi=n.n(gi),vi=function(e){var t=e.count,n=e.page,r=e.rowsPerPage,a=e.onPageChange;return Object(St.jsxs)(bi.a,{sx:{display:"flex",alignItems:"center"},children:[Object(St.jsx)(ji.a,{onClick:function(e){a(e,0)},disabled:0===n,"aria-label":"first page",children:Object(St.jsx)(mi.a,{})}),Object(St.jsx)(ji.a,{onClick:function(e){a(e,n-1)},disabled:0===n,"aria-label":"previous page",children:Object(St.jsx)(xi.a,{})}),Object(St.jsx)(ji.a,{onClick:function(e){a(e,n+1)},disabled:n>=Math.ceil(t/r)-1,"aria-label":"next page",children:Object(St.jsx)(fi.a,{})}),Object(St.jsx)(ji.a,{onClick:function(e){a(e,Math.max(0,Math.ceil(t/r)-1))},disabled:n>=Math.ceil(t/r)-1,"aria-label":"last page",children:Object(St.jsx)(yi.a,{})})]})},wi=function(e){var t=e.name,n=e.rows,r=e.columns,a=e.selectedRow,c=e.size,i=e.handleRowClick,s=e.rowsNum,o=e.selectionLoading,d=Object(pt.useState)(0),l=Object(Ot.a)(d,2),u=l[0],b=l[1],j=Object(pt.useState)(s||10),p=Object(Ot.a)(j,2),m=p[0],h=p[1],x=u>0?Math.max(0,(1+u)*m-n.length):0;return Object(St.jsxs)(wa.a,{"aria-label":t,size:c||"medium",children:[Object(St.jsxs)(Ia.a,{children:[Object(St.jsx)(Ca.a,{children:r.map((function(e){return Object(St.jsx)(Sa.a,{children:e.label},Ua()())}))}),n.slice(u*m,u*m+m).map((function(e){return o&&!0===o.state&&o.id===e.id?Object(St.jsx)(Ca.a,{style:{height:53},children:Object(St.jsx)(Sa.a,{colSpan:6,children:Object(St.jsx)(mn,{size:"1.5rem"})})},Ua()()):Object(St.jsx)(Ca.a,{component:"tr",sx:{"&:last-child td, &:last-child th":{border:0},":hover":{cursor:i?"pointer":"cursor"},height:"53px"},hover:!!i,onClick:i?function(){return i(e.id)}:null,selected:a&&e.id===a["".concat(e.id.split("-")[0],"_id")],children:r.map((function(t){return Object(St.jsx)(Sa.a,{component:"td",children:e[t.name]},Ua()())}))},Ua()())})),x>0&&Object(St.jsx)(Ca.a,{style:{height:53*x},children:Object(St.jsx)(Sa.a,{colSpan:6})})]}),Object(St.jsx)(li.a,{children:Object(St.jsx)(Ca.a,{children:Object(St.jsx)(ui.a,{rowsPerPageOptions:[8,16,24],count:n.length,rowsPerPage:m,page:u,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:function(e,t){b(t)},onRowsPerPageChange:function(e){h(parseInt(e.target.value,10)),b(0)},ActionsComponent:vi,sx:{".MuiTablePagination-toolbar":{justifyContent:"flex-start"},".MuiTablePagination-selectLabel":{margin:0},".MuiTablePagination-select":{padding:0},".MuiTablePagination-displayedRows":{margin:"0 1rem 0 0"}}})})})]})},ki=(kt.b.div($a||($a=Object(wt.a)(["\n  margin-top: 1rem;\n  display: flex;\n  justify-content: space-between;\n"]))),kt.b.div(za||(za=Object(wt.a)(["\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n"]))),kt.b.div(Pa||(Pa=Object(wt.a)(["\n  display: flex;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n"])))),Ci=kt.b.div(qa||(qa=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  padding: 1rem;\n  min-height: 90vh;\n  flex: 0.5;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  border-radius: 10px;\n  position: relative;\n"]))),Si=Object(kt.b)(Ci)(Ea||(Ea=Object(wt.a)(["\n  height: 90vh;\n"]))),Ii=kt.b.div(Fa||(Fa=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-top: 1rem;\n"]))),Di=kt.b.div(Ta||(Ta=Object(wt.a)(["\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-start;\n  gap: 0.25rem;\n  margin-top: 1.5rem;\n"]))),Ui=kt.b.div(Aa||(Aa=Object(wt.a)(["\n  flex: 1;\n"]))),_i=function(e){var t=e.rows,n=e.updateRows,r=e.selectedRow,a=e.reset,c=e.handleItemSelected,i=e.lastSelectedItem,s=Object(pt.useState)(""),o=Object(Ot.a)(s,2),d=o[0],l=o[1],u=Object(pt.useState)({id:null,state:!1}),b=Object(Ot.a)(u,2),j=b[0],p=b[1],m=Object(pt.useRef)(""),h=Object(di.a)(da,{onCompleted:function(e){var r=e.categorySearch;if(r.length){var a=r.map((function(e){return t=e.category_id,n=e.name,{id:t,name:Zt.a.startCase(n)};var t,n}));t!==a&&n(a)}},onError:l}),x=Object(Ot.a)(h,1)[0],O=Object(pt.useCallback)(x,[m.current,x]);Object(pt.useEffect)((function(){t&&t.length&&!a||O()}),[t,a,O]);var f=Object(di.a)(ia,{onCompleted:function(e){var t=e.category;c(t),p({id:null,state:!1})},onError:function(e){l(e),p({id:null,state:!1})}}),g=Object(Ot.a)(f,1)[0];return Object(St.jsxs)(Ci,{children:[Object(St.jsxs)(ki,{children:[Object(St.jsx)(fr.a,{label:"Search a category by name",variant:"outlined",onChange:function(e){m.current=e.target.value},fullWidth:!0}),Object(St.jsx)(fn,{text:"search",onClick:function(){return O({variables:{name:m.current}})}})]}),t&&t.length?Object(St.jsx)(wi,{name:"products table",rows:t,columns:[{name:"name",label:"Name"}],selectedRow:r,handleRowClick:function(e){p({id:e,state:!0}),i.current.category_id===e?(c(i.current),p({id:null,state:!1})):g({variables:{categoryId:e}})},size:"small",rowsNum:8,selectionLoading:j}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})}),d&&Object(St.jsx)($r,{text:d,type:"error"})]})},$i=n(311),zi=n(312),Pi=kt.b.label(Na||(Na=Object(wt.a)(["\n  width: 6rem;\n  height: 2.5rem;\n  color: ",";\n  border: 1px solid rgba(0, 0, 0, 0.23);\n  border-radius: 4px;\n  padding: 5px 15px;\n  font-size: 0.875rem;\n  letter-spacing: 0.02857em;\n  line-height: 1.75px;\n  font-weight: 500;\n  display: inline-flex;\n  margin: 0;\n  align-items: center;\n  justify-content: center;\n  \n  :hover {\n    background-color: rgba(0, 0, 0, 0.04);\n    cursor: pointer;\n  };\n"])),Ct.dark),qi=function(e){var t=e.onChange;return Object(St.jsxs)("div",{children:[Object(St.jsx)(Pi,{htmlFor:"file-upload",children:"BROWSE"}),Object(St.jsx)("input",{id:"file-upload",type:"file",style:{display:"none"},onChange:t})]})},Ei=kt.b.div(Ra||(Ra=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  gap: 0.25rem;\n"]))),Fi=kt.b.div(Wa||(Wa=Object(wt.a)(["\n  display: flex;\n  justify-content: flex-start;\n  gap: 0.25rem;\n"]))),Ti=kt.b.div(Ma||(Ma=Object(wt.a)(["\n  align-self: flex-end;\n"]))),Ai=kt.b.p(Ba||(Ba=Object(wt.a)(["\n  margin: 0;\n  text-align: left;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.5rem;\n  height: 1.5rem;\n  width: 18rem;\n  white-space: nowrap;\n  align-self: flex-end;\n"]))),Ni=kt.b.div(La||(La=Object(wt.a)(["\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.25rem;\n  flex-wrap: wrap;\n  width: 100%;\n"]))),Ri=kt.b.div(Ga||(Ga=Object(wt.a)(["\n  position: relative;\n"]))),Wi=kt.b.img(Xa||(Xa=Object(wt.a)(["\n  border-radius: 4px;\n  height: 50px;\n  width: auto;\n"]))),Mi=Object(kt.b)(zi.a)(Ha||(Ha=Object(wt.a)(["\n  position: absolute;\n  top: -2px;\n  right: -2px;\n  color: grey;\n  :hover {\n    color: black;\n    cursor: pointer;\n  }\n"]))),Bi=kt.b.div(Va||(Va=Object(wt.a)(["\n  height: 50px;\n"]))),Li=function(e){var t=e.onUpload,n=e.onDelete,r=e.images,a=e.placeholderText,c=e.reset,i=Object(pt.useContext)(Bn),s=Object(pt.useState)(null),o=Object(Ot.a)(s,2),d=o[0],l=o[1],u=Object(pt.useState)(!1),b=Object(Ot.a)(u,2),j=b[0],p=b[1],m=Object(pt.useState)(null),h=Object(Ot.a)(m,2),x=h[0],O=h[1],f=function(){var e=Object(Pn.a)(zn.a.mark((function e(n,r){var a;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),p(!0),e.prev=2,e.t0=$i.uploadFile,e.t1=r,e.next=7,i.currentUser.functions.helper_getS3Config();case 7:return e.t2=e.sent,e.next=10,(0,e.t0)(e.t1,e.t2);case 10:a=e.sent,t(a.location),O({type:"success",text:"Image upload successful!"}),l(null),e.next=19;break;case 16:e.prev=16,e.t3=e.catch(2),O({type:"error",text:"Upload failed. Please try again or contact support if the problem persists"});case 19:return e.prev=19,p(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(pt.useEffect)((function(){c&&x&&x.type&&O(null)}),[c,x]),Object(St.jsxs)(Ei,{children:[Object(St.jsx)($t,{text:"Upload an image",size:"x-small"}),Object(St.jsxs)(Fi,{children:[Object(St.jsx)(qi,{onChange:function(e){O(null),l(e.target.files[0])}}),Object(St.jsx)(fn,{text:"Upload",onClick:function(e){return f(e,d)},disabled:!d,loading:j,customStyles:{width:"6rem",height:"2.5rem"}}),d&&Object(St.jsx)(Ai,{children:d.name}),x&&Object(St.jsx)(Ti,{children:Object(St.jsx)($r,{type:x.type,text:x.text})})]}),Object(St.jsx)(Ni,{children:r&&r.length?r.map((function(e,t){return Object(St.jsxs)(Ri,{children:[Object(St.jsx)(Mi,{size:"1.5rem",onClick:function(t){return function(e,t){e.preventDefault(),O(null),n(t)}(t,e)}}),Object(St.jsx)(Wi,{src:e})]},Ua()())})):Object(St.jsx)(Bi,{children:a||"No images yet!"})})]})},Gi=function(e){var t=e.fields,n=e.updateFields,r=e.handleUpsertItem,a=e.handleDeleteItemRequest,c=e.handleDeleteItem,i=e.handleResetForm,s=e.loading,o=e.message,d=e.deleteRequested,l=e.shouldCreateNewItem,u=function(e){n((function(t){return Object(yt.a)(Object(yt.a)({},t),{},Object(ti.a)({},e.target.name,e.target.value))}))},b=function(e,t){var r;e&&"string"===typeof e&&("upload"===t?r=e:"delete"===t&&(r=""),n((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{image:r})})))};return Object(St.jsxs)(Si,{children:[Object(St.jsxs)(aa,{subHeading:!0,children:[Object(St.jsx)("div",{style:{flex:1},children:Object(St.jsx)($t,{text:l?"Create new category":"Edit category",noSpace:!0,size:"small"})}),!l&&Object(St.jsx)(fn,{text:"create new",onClick:i})]}),Object(St.jsxs)(Ii,{children:[Object(St.jsx)(fr.a,{name:"name",label:"Name",value:t.name,variant:"outlined",onChange:u,fullWidth:!0,required:!0}),Object(St.jsx)(fr.a,{name:"description",label:"Description",value:t.description,variant:"outlined",onChange:u,fullWidth:!0,multiline:!0,rows:5,required:!0}),Object(St.jsx)(Li,{onUpload:function(e){return b(e,"upload")},onDelete:function(e){return b(e,"delete")},images:t.image?[t.image]:null,placeholderText:"No images yet! You must upload an image for each category",reset:o&&"success"===o.type})]}),Object(St.jsx)(Ui,{}),Object(St.jsxs)(Di,{children:[Object(St.jsx)(fn,{text:"save",onClick:r,loading:!0===s.state&&"upsert"===s.type,customStyles:{backgroundColor:"rgba(63, 81, 181, 1)",borderColor:"#fff",color:"#fff",width:"6rem",height:"2.5rem"}}),!l&&Object(St.jsx)(fn,{text:d?"confirm deletion":"delete category",onClick:d?c:a,loading:!0===s.state&&"delete"===s.type,customStyles:{backgroundColor:"#fff",borderColor:"red",color:"red",height:"2.5rem"}}),o&&o.type&&Object(St.jsx)($r,{text:o.text,type:o.type})]})]})},Xi=function(e){var t=e.rows,n=e.updateRows,r=e.selectedRow,a=e.reset,c=e.handleItemSelected,i=e.lastSelectedItem,s=Object(pt.useState)(""),o=Object(Ot.a)(s,2),d=o[0],l=o[1],u=Object(pt.useState)({id:null,state:!1}),b=Object(Ot.a)(u,2),j=b[0],p=b[1],m=Object(pt.useRef)(""),h=Object(di.a)(ja,{onCompleted:function(e){var r=e.subCategorySearch;if(r.length){var a=r.map((function(e){return t=e.subCategory_id,n=e.name,r=e.category,{id:t,name:Zt.a.startCase(n),category:Zt.a.startCase(r)};var t,n,r}));t!==a&&n(a)}},onError:l}),x=Object(Ot.a)(h,1)[0],O=Object(pt.useCallback)(x,[m.current,x]);Object(pt.useEffect)((function(){t&&t.length&&!a||O()}),[t,a,O]);var f=Object(di.a)(ba,{onCompleted:function(e){var t=e.subCategory;c(t),p({id:null,state:!1})},onError:function(e){l(e),p({id:null,state:!1})}}),g=Object(Ot.a)(f,1)[0];return Object(St.jsxs)(Ci,{children:[Object(St.jsxs)(ki,{children:[Object(St.jsx)(fr.a,{label:"Search a sub-category by name",variant:"outlined",onChange:function(e){m.current=e.target.value},fullWidth:!0}),Object(St.jsx)(fn,{text:"search",onClick:function(){return O({variables:{name:m.current}})}})]}),t&&t.length?Object(St.jsx)(wi,{name:"products table",rows:t,columns:[{name:"name",label:"Name"},{name:"category",label:"Category"}],selectedRow:r,handleRowClick:function(e){p({id:e,state:!0}),i.current.subCategory_id===e?(c(i.current),p({id:null,state:!1})):g({variables:{subCategoryId:e}})},size:"small",rowsNum:8,selectionLoading:j}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})}),d&&Object(St.jsx)($r,{text:d,type:"error"})]})},Hi=function(e){var t=e.children;return Un().isXs?Object(St.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:t}):Object(St.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"0.25rem"},children:t})},Vi=function(e){var t=e.fields,n=e.updateFields,r=e.handleUpsertItem,a=e.handleDeleteItemRequest,c=e.handleDeleteItem,i=e.handleResetForm,s=e.loading,o=e.message,d=e.deleteRequested,l=e.shouldCreateNewItem,u=Object(Jn.a)(oa).data,b=function(e){n((function(t){return Object(yt.a)(Object(yt.a)({},t),{},Object(ti.a)({},e.target.name,e.target.value))}))},j=function(e,t){var r;e&&"string"===typeof e&&("upload"===t?r=e:"delete"===t&&(r=""),n((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{image:r})})))};return Object(St.jsxs)(Si,{children:[Object(St.jsxs)(aa,{subHeading:!0,children:[Object(St.jsx)("div",{style:{flex:1},children:Object(St.jsx)($t,{text:l?"Create new sub category":"Edit sub category",noSpace:!0,size:"small"})}),!l&&Object(St.jsx)(fn,{text:"create new",onClick:i})]}),u&&u.categories?Object(St.jsxs)(St.Fragment,{children:[Object(St.jsxs)(Ii,{children:[Object(St.jsx)(fr.a,{name:"name",label:"Name",value:t.name,variant:"outlined",onChange:b,fullWidth:!0,required:!0}),Object(St.jsx)(fr.a,{name:"description",label:"Description",value:t.description,variant:"outlined",onChange:b,fullWidth:!0,multiline:!0,rows:5,required:!0}),Object(St.jsx)(Hi,{children:Object(St.jsx)(Cr,{name:"category",label:"Category*",value:t.category,variant:"outlined",handleChange:b,required:!0,options:u.categories.map((function(e){return{name:Zt.a.startCase(e.name),value:e.name}}))})}),Object(St.jsx)(Li,{onUpload:function(e){return j(e,"upload")},onDelete:function(e){return j(e,"delete")},images:t.image?[t.image]:null,placeholderText:"No images yet! You must upload an image for each sub-category",reset:o&&"success"===o.type})]}),Object(St.jsx)(Ui,{}),Object(St.jsxs)(Di,{children:[Object(St.jsx)(fn,{text:"save",onClick:r,loading:!0===s.state&&"upsert"===s.type,customStyles:{backgroundColor:"rgba(63, 81, 181, 1)",borderColor:"#fff",color:"#fff",width:"6rem",height:"2.5rem"}}),!l&&Object(St.jsx)(fn,{text:d?"confirm deletion":"delete subcategory",onClick:d?c:a,loading:!0===s.state&&"delete"===s.type,customStyles:{backgroundColor:"#fff",borderColor:"red",color:"red",height:"2.5rem"}}),o&&o.type&&Object(St.jsx)($r,{text:o.text,type:o.type})]})]}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})})]})},Yi=function(e){var t=e.rows,n=e.updateRows,r=e.selectedRow,a=e.reset,c=e.handleItemSelected,i=e.lastSelectedItem,s=Object(pt.useState)(""),o=Object(Ot.a)(s,2),d=o[0],l=o[1],u=Object(pt.useState)({id:null,state:!1}),b=Object(Ot.a)(u,2),j=b[0],p=b[1],m=Object(pt.useRef)(""),h=Object(di.a)(ma,{onCompleted:function(e){if(e&&e.productSearch&&e.productSearch.length){var r=e.productSearch.map((function(e){return t=e.product_id,n=e.name,r=e.category,a=e.subCategory,c=e.numInStock,i=e.priceGBP,{id:t,name:n,category:Zt.a.startCase(r),subcategory:Zt.a.startCase(a),numInStock:c,price:i};var t,n,r,a,c,i}));t!==r&&n(r)}},onError:l}),x=Object(Ot.a)(h,1)[0],O=Object(pt.useCallback)(x,[m.current,x]);Object(pt.useEffect)((function(){t&&t.length&&!a||O()}),[t,a,O]);var f=Object(di.a)(pa,{onCompleted:function(e){var t=e.product;c(t),p({id:null,state:!1})},onError:function(e){l(e),p({id:null,state:!1})}}),g=Object(Ot.a)(f,1)[0];return Object(St.jsxs)(Ci,{children:[Object(St.jsxs)(ki,{children:[Object(St.jsx)(fr.a,{label:"Search a product by name",variant:"outlined",onChange:function(e){m.current=e.target.value},fullWidth:!0}),Object(St.jsx)(fn,{text:"search",onClick:function(){return O({variables:{name:m.current}})}})]}),t&&t.length?Object(St.jsx)(wi,{name:"products table",rows:t,columns:[{name:"name",label:"Name"},{name:"category",label:"Category"},{name:"subcategory",label:"Sub-Category"},{name:"numInStock",label:"Stock Quantity"},{name:"price",label:"Price (GBP)"}],selectedRow:r,handleRowClick:function(e){p({id:e,state:!0}),i.current.product_id===e?(c(i.current),p({id:null,state:!1})):g({variables:{productId:e}})},size:"small",rowsNum:8,selectionLoading:j}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})}),d&&Object(St.jsx)($r,{text:d,type:"error"})]})},Ji=n(29),Ki=function(e){var t=e.fields,n=e.updateFields,r=e.handleUpsertItem,a=e.handleDeleteItemRequest,c=e.handleDeleteItem,i=e.handleResetForm,s=e.loading,o=e.message,d=e.deleteRequested,l=e.shouldCreateNewItem,u=Object(Jn.a)(la).data,b=t.category&&""!==t.category,j=function(e){n((function(t){return Object(yt.a)(Object(yt.a)({},t),{},Object(ti.a)({},e.target.name,e.target.value))}))},p=function(e,r){if(e&&"string"===typeof e){var a=[];if("upload"===r)a=[].concat(Object(Ji.a)(t.images),[e]);else{if("delete"!==r)throw new Error("Unknown action of '".concat(r,"' supplied to handleImageChange"));a=t.images.filter((function(t){return t!==e}))}n((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{images:a})}))}};return Object(St.jsxs)(Si,{children:[Object(St.jsxs)(aa,{subHeading:!0,children:[Object(St.jsx)("div",{style:{flex:1},children:Object(St.jsx)($t,{text:l?"Create new product":"Edit product",noSpace:!0,size:"small"})}),!l&&Object(St.jsx)(fn,{text:"create new",onClick:i})]}),u&&u.categories?Object(St.jsxs)(St.Fragment,{children:[Object(St.jsxs)(Ii,{children:[Object(St.jsx)(fr.a,{name:"name",label:"Name",value:t.name,variant:"outlined",onChange:j,fullWidth:!0,required:!0}),Object(St.jsx)(fr.a,{name:"description",label:"Description",value:t.description,variant:"outlined",onChange:j,fullWidth:!0,multiline:!0,rows:5,required:!0}),Object(St.jsxs)(Hi,{children:[Object(St.jsx)(Cr,{name:"category",label:"Category*",value:t.category,variant:"outlined",handleChange:j,required:!0,options:u.categories.map((function(e){return{name:Zt.a.startCase(e.name),value:e.name}}))}),Object(St.jsx)(Cr,{name:"subCategory",label:"Sub Category*",value:t.subCategory,variant:"outlined",handleChange:j,required:!0,disabled:!b,options:b?function(e,t){if(e&&""!==e&&t&&t.length)return t.find((function(t){return t.name===e})).subCategories.map((function(e){return{id:e.subCategory_id,name:Zt.a.startCase(e.name),value:e.name}}))}(t.category,u.categories):[]}),Object(St.jsx)(fr.a,{name:"weightInGrams",label:"Est. Weight (g)",value:t.weightInGrams,variant:"outlined",onChange:j,required:!0,fullWidth:!0})]}),Object(St.jsxs)(Hi,{children:[Object(St.jsx)(fr.a,{name:"numInStock",label:"Quantity",value:t.numInStock,variant:"outlined",onChange:j,required:!0,fullWidth:!0}),Object(St.jsx)(fr.a,{name:"priceGBP",label:"Price GBP",value:t.priceGBP,variant:"outlined",onChange:j,required:!0,fullWidth:!0,InputProps:{startAdornment:Object(St.jsx)(gr.a,{position:"start",children:"\xa3"})}}),Object(St.jsx)(fr.a,{name:"priceUSD",label:"Price USD",value:t.priceUSD,variant:"outlined",onChange:j,required:!0,fullWidth:!0,InputProps:{startAdornment:Object(St.jsx)(gr.a,{position:"start",children:"$"})}}),Object(St.jsx)(fr.a,{name:"priceEUR",label:"Price EUR",value:t.priceEUR,variant:"outlined",onChange:j,required:!0,fullWidth:!0,InputProps:{startAdornment:Object(St.jsx)(gr.a,{position:"start",children:"\u20ac"})}})]}),Object(St.jsx)(Li,{onUpload:function(e){return p(e,"upload")},onDelete:function(e){return p(e,"delete")},images:t.images,placeholderText:"No images yet! You must upload at least one image per product",reset:o&&"success"===o.type})]}),Object(St.jsx)(Ui,{}),Object(St.jsxs)(Di,{children:[Object(St.jsx)(fn,{text:"save",onClick:r,loading:!0===s.state&&"upsert"===s.type,customStyles:{backgroundColor:"rgba(63, 81, 181, 1)",borderColor:"#fff",color:"#fff",width:"6rem",height:"2.5rem"}}),!l&&Object(St.jsx)(fn,{text:d?"confirm deletion":"delete product",onClick:d?c:a,loading:!0===s.state&&"delete"===s.type,customStyles:{backgroundColor:"#fff",borderColor:"red",color:"red",height:"2.5rem"}}),o&&o.type&&Object(St.jsx)($r,{text:o.text,type:o.type})]})]}):Object(St.jsx)(xr,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})})]})},Qi=function(){var e=Object(pt.useState)(!1),t=Object(Ot.a)(e,2),n=t[0],r=t[1],a=Object(pt.useState)("product"),c=Object(Ot.a)(a,2),i=c[0],s=c[1],o=function(e){s(e),r(!0)},d={category:{edit:Gi,table:_i},subCategory:{edit:Vi,table:Xi},product:{edit:Ki,table:Yi}};return Object(St.jsxs)(pr,{children:[Object(St.jsx)($t,{text:"Inventory",size:"small",color:"white"}),Object(St.jsx)(oi,{open:n,handleClose:function(){return r(!1)},inventoryType:i,tableSection:i?d[i].table:Yi,editSection:i?d[i].edit:Ki}),Object(St.jsxs)(mr,{children:[Object(St.jsx)(ei,{type:"products",handleSelection:function(){return o("product")}}),Object(St.jsx)(ei,{type:"subcategories",handleSelection:function(){return o("subCategory")}}),Object(St.jsx)(ei,{type:"categories",handleSelection:function(){return o("category")}})]})]})},Zi=function(){return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(Yn,{}),Object(St.jsxs)(ur,{children:[Object(St.jsx)(Qc,{}),Object(St.jsx)(Qi,{})]})]})},es=Ct.light,ts=Ct.lightFade,ns=Ct.dark,rs=Object(kt.b)(Et)(Ya||(Ya=Object(wt.a)(["\n  display: flex;\n  justify-content: center;\n  position: relative;\n"]))),as=kt.b.img(Ja||(Ja=Object(wt.a)(["\n  border-radius: 6px;\n  max-width: 100%;\n  height: auto;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2); \n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n"]))),cs=kt.b.h1(Ka||(Ka=Object(wt.a)(["\n  background-color: ",";\n  border-radius: 30px;\n  color: ",";\n  font-size: 2rem;\n  padding: 0.5rem 1.5rem;\n  position: absolute;\n  top: 43%;\n  left: 12.5%;\n  text-align: center;\n  transition: background-color 0.2s ease-in-out;\n  width: 75%;\n  :active,\n  :focus,\n  :hover {\n    background-color: ",";\n  }\n"])),ts,ns,es),is=function(e){var t=e.title,n=e.image,r=e.linkTo;return Object(St.jsx)(ft.b,{to:r,children:Object(St.jsxs)(rs,{children:[Object(St.jsx)(as,{src:n,alt:t}),Object(St.jsx)(cs,{children:t})]})})},ss=kt.b.div(Qa||(Qa=Object(wt.a)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: 2rem;\n"]))),os=function(e){var t=e.children;return Object(St.jsx)(ss,{children:t})},ds=kt.b.div(Za||(Za=Object(wt.a)(["\n  height: 50vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 3rem;\n"]))),ls=function(e){var t=e.message;return Object(St.jsxs)(ds,{children:[t&&t,Object(St.jsx)(mn,{size:"4rem"})]})},us=kt.b.div(ec||(ec=Object(wt.a)(["\n  @media (min-width: 414px) {\n    margin: 0 1rem;\n  }\n"]))),bs=kt.b.p(tc||(tc=Object(wt.a)(["\n  font-size: 1.15rem;\n"]))),js=kt.b.div(nc||(nc=Object(wt.a)(["\n  margin-bottom: 1rem;\n"]))),ps=function(){var e=Object(Jn.a)(oa).data;return Object(St.jsxs)(us,{children:[Object(St.jsx)(js,{children:Object(St.jsx)($t,{text:"Browse Categories",size:"large"})}),e&&e.categories?Object(St.jsx)(os,{children:e.categories.map((function(e,t){var n=e.name;return Object(St.jsx)(is,{title:Zt.a.startCase(n),image:"/images/".concat(n,"-landing-page.jpg"),linkTo:"/shop/browse/".concat(n),dataReady:!0},t)}))}):Object(St.jsx)(ls,{})]})},ms=function(){var e=Object(gt.j)().url,t=Object(gt.i)().category,n=Object(Jn.a)(sa,{variables:{name:t}}).data;return Object(St.jsxs)(us,{children:[Object(St.jsx)(js,{children:Object(St.jsx)(ca,{text:Zt.a.startCase(t),headingSize:"large",linkTo:"/shop",buttonText:"Back to categories"})}),n&&n.category?Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(bs,{children:n.category.description}),Object(St.jsx)(os,{children:n.category.subCategories.map((function(t,n){var r=t.name,a=t.image;return Object(St.jsx)(is,{title:Zt.a.startCase(r),image:a,linkTo:"".concat(e,"/").concat(r)},n)}))})]}):Object(St.jsx)(ls,{})]})},hs=kt.b.img(rc||(rc=Object(wt.a)(["\n  height: auto;\n  max-width: 100%;\n"]))),xs=function(e){var t=e.src,n=e.alt;return Object(St.jsx)(hs,{src:t,alt:n})},Os=Object(pt.createContext)(),fs=function(e){var t=e.children,n=Object(pt.useState)("GBP"),r=Object(Ot.a)(n,2),a=r[0],c=r[1],i="https://ipapi.co/json/",s=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var t;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(i);case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),[i]),o=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var t;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t=e.sent,e.t0=t.continent_code,e.next="EU"===e.t0?6:"NA"===e.t0?8:10;break;case 6:return c("GB"===t.country_code?"GBP":"EUR"),e.abrupt("break",10);case 8:return c("USD"),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e)}))),[s]);return Object(pt.useEffect)((function(){return o()}),[o]),Object(St.jsx)(Os.Provider,{value:{currency:a,setCurrency:c},children:t})},gs=Object(pt.createContext)(),ys=function(e){var t=e.children,n=Object(pt.useContext)(Bn).currentUser,r=Object(pt.useContext)(Os).currency,a=Object(pt.useState)({}),c=Object(Ot.a)(a,2),i=c[0],s=c[1],o=Object(pt.useState)(0),d=Object(Ot.a)(o,2),l=d[0],u=d[1],b=Object(pt.useState)(""),j=Object(Ot.a)(b,2),p=j[0],m=j[1],h=Object(pt.useState)(0),x=Object(Ot.a)(h,2),O=x[0],f=x[1],g=Object(pt.useRef)(),y=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var t;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&Object.keys(i).length){e.next=6;break}if(!n||!n.dbUser){e.next=6;break}return e.next=4,n.functions.db_getActiveOrder(n.dbUser.user_id);case 4:(t=e.sent)!==i&&s(t);case 6:case"end":return e.stop()}}),e)}))),[n,i]);Object(pt.useEffect)((function(){return y()}),[y]),Object(pt.useEffect)((function(){i&&i.orderItems&&i.orderItems.length?u(function(e,t){var n,r=e.orderItems.map((function(e){return e.quantity*e.product["price".concat(t)]}));return r&&(n=r.reduce((function(e,t){return e+t}))),n}(i,r)):u(0)}),[i,r]);var v=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var t,a,c,s;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("/PostalCountries/countries.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.next=8,a.find((function(e){return e.country===p}));case 8:if(!(c=e.sent)){e.next=15;break}return e.next=12,n.functions.helper_getDeliveryPrice(i.orderItems,c.deliveryZone,r);case 12:s=e.sent,f(s),g.current=c.deliveryZone;case 15:case"end":return e.stop()}}),e)}))),[p,g,i,n,r]);return Object(pt.useEffect)((function(){return v()}),[v,p]),Object(St.jsx)(gs.Provider,{value:{activeOrder:i,setActiveOrder:s,subtotal:l,deliveryCountry:p,setDeliveryCountry:m,deliveryPrice:O,deliveryZone:g},children:t})},vs=hn.standard,ws=Ct.dark,ks=Ct.light,Cs=function(e){var t=e.product,n=e.addingToCart,r=e.updateAddingToCart,a=Object(pt.useContext)(gs),c=a.activeOrder,i=a.setActiveOrder,s=Object(pt.useContext)(Bn),o=s.currentUser,d=s.setCurrentUser,l=Object(pt.useState)(!1),u=Object(Ot.a)(l,2),b=u[0],j=u[1],p=Object(pt.useState)(""),m=Object(Ot.a)(p,2),h=m[0],x=m[1],O=Object(gt.g)(),f=n.isLoading&&n.productId===t.product_id,g=function(){var e=Object(Pn.a)(zn.a.mark((function e(t){return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:t})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(pt.useEffect)((function(){c&&c.orderItems&&c.orderItems.length&&(c.orderItems.find((function(e){return e.product._id===t._id}))&&j(!0))}),[c,j,t]);var y={fontFamily:vs,background:ws,color:ks,width:"100%"};Object(pt.useEffect)((function(){b?x("Added - View in Cart"):t.numInStock>0?x(Object(St.jsxs)(St.Fragment,{children:["Add To Cart \xa0",Object(St.jsx)(en.e,{})]})):x(Object(St.jsxs)(St.Fragment,{children:["Request this product \xa0",Object(St.jsx)(en.i,{})]}))}),[x,b,t,c]);var v=Wr(Qr.CreateGuestOrder),w=Object(Ot.a)(v,1)[0],k=Wr(Qr.CreateOrderForExistingCustomer),C=Object(Ot.a)(k,1)[0],S=Wr(Qr.CreateNewOrderItem),I=Object(Ot.a)(S,1)[0],D=Wr(Qr.UpdateOrderItemsInOrder),U=Object(Ot.a)(D,1)[0],_=Wr(Qr.UpdateUserOrders),$=Object(Ot.a)(_,1)[0],z=function(){var e=Object(Pn.a)(zn.a.mark((function e(t){var n,a,s,d,l,u,b,j,p,m,h,x,O,f,y,v;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.dbUser,a=t.currentTarget.value,!(n&&n.user_id&&c&&c.order_id)){e.next=25;break}return e.prev=3,r(!0,a),e.t0="orderItem-",e.next=8,Ua()();case 8:return e.t1=e.sent,s=e.t0.concat.call(e.t0,e.t1),e.next=12,I({variables:{orderItem_id:s,order_id:c.order_id,product_id:a}});case 12:return(d=c.orderItems.map((function(e){return e.orderItem_id}))).push(s),e.next=16,U({variables:{order_id:c.order_id,orderItems:d}});case 16:l=e.sent,u=l.data,i(u.updateOneOrder),r(!1),e.next=25;break;case 22:throw e.prev=22,e.t2=e.catch(3),new Error("Failed to add item to existing order. Error: ".concat(e.t2));case 25:if(!n||!n.user_id||c&&(!c||c.order_id)){e.next=50;break}return e.prev=26,r(!0,a),e.next=30,o.functions.helper_createOrderId();case 30:return b=e.sent,e.t3="orderItem-",e.next=34,Ua()();case 34:return e.t4=e.sent,j=e.t3.concat.call(e.t3,e.t4),e.next=38,C({variables:{order_id:b,user_id:n.user_id,orderItem_id:j,product_id:a,dateCreated:new Date(Date.now())}});case 38:return p=e.sent,m=p.data,h=m.insertOneOrder.customer.orders.map((function(e){return e.order_id})),e.next=43,$({variables:{user_id:n.user_id,orders:[].concat(Object(Ji.a)(h),[b])}});case 43:i(m.insertOneOrder),r(!1),e.next=50;break;case 47:throw e.prev=47,e.t5=e.catch(26),new Error("Failed to add new order for existing customer. Error: ".concat(e.t5));case 50:if(!o||n&&(!n||n.user_id)){e.next=79;break}return e.prev=51,r(!0,a),e.next=55,o.functions.helper_createOrderId();case 55:return x=e.sent,e.t6="orderItem-",e.next=59,Ua()();case 59:return e.t7=e.sent,O=e.t6.concat.call(e.t6,e.t7),e.t8="user-",e.next=64,Ua()();case 64:return e.t9=e.sent,f=e.t8.concat.call(e.t8,e.t9),e.next=68,w({variables:{order_id:x,user_ObjectId:o.id,user_id:f,orderItem_id:O,product_id:a,dateCreated:new Date(Date.now())}});case 68:return y=e.sent,v=y.data,i(v.insertOneOrder.customer.orders[0]),r(!1),e.next=74,g(v.insertOneOrder.customer);case 74:e.next=79;break;case 76:throw e.prev=76,e.t10=e.catch(51),new Error("Failed to create guest order. Error: ".concat(e.t10));case 79:case"end":return e.stop()}}),e,null,[[3,22],[26,47],[51,76]])})));return function(t){return e.apply(this,arguments)}}();return t.numInStock>0?Object(St.jsx)(fn,{text:f?Object(St.jsx)(mn,{colour:"light",size:"1.5rem"}):h,onClick:b?function(){return O.push("/shop/cart")}:z,name:"addToCart",value:t.product_id,variant:"contained",customStyles:y,disabled:f}):Object(St.jsx)(fn,{text:h,customStyles:y,onClick:function(){return O.push("/contact-us")}})},Ss=Object(kt.b)(Et)(ac||(ac=Object(wt.a)(["\n  gap: 0.5rem;\n  margin: 1rem 0;\n  justify-content: center;\n"]))),Is=kt.b.h2(cc||(cc=Object(wt.a)(["\n  font-size: 1rem;\n  margin: 0;\n  @media (min-width: 320px) {\n    font-size: 1.25rem;\n  }\n"]))),Ds=kt.b.div(ic||(ic=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),Us=kt.b.div(sc||(sc=Object(wt.a)(["\n  display: none;\n  @media (min-width: 360px) {\n    display: flex;\n    justify-content: space-between;\n  }\n"]))),_s=kt.b.div(oc||(oc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-left: 4px;\n"]))),$s=Object(kt.b)(Is)(dc||(dc=Object(wt.a)(["\n  align-self: flex-end;\n  margin-right: 4px;\n  text-align: right;\n"]))),zs=kt.b.div(lc||(lc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 0.25rem;\n  margin: 0.25rem;\n"]))),Ps=["product","linkTo","currency"],qs=function(e){var t=e.product,n=e.linkTo,r=e.currency,a=Object(vt.a)(e,Ps),c=t.name,i=t.images,s=t.numInStock;return Object(St.jsxs)(Ss,{children:[Object(St.jsxs)(Ds,{children:[Object(St.jsx)(xs,{src:i[0],alt:c}),Object(St.jsxs)(Us,{children:[Object(St.jsxs)(_s,{children:[Object(St.jsx)(Is,{children:c}),Object(St.jsx)(Is,{children:Fr(t,r)})]}),Object(St.jsx)($s,{children:s>0?"In Stock":"Out of Stock"})]})]}),Object(St.jsxs)(zs,{children:[Object(St.jsx)(fn,{text:"Item Description",linkTo:n,customStyles:{width:"100%"}}),Object(St.jsx)("div",{style:{marginBottom:"0.5rem"},children:Object(St.jsx)(Cs,Object(yt.a)({product:t},a))})]})]})},Es=function(){Object(pt.useEffect)((function(){window.scroll({top:0,left:0,behavior:"auto"})}),[])},Fs=function(e){Es();var t=Object(gt.j)().url,n=Object(gt.i)(),r=n.category,a=n.subCategory,c=Object(Jn.a)(ua,{variables:{name:a,category:r}}).data;return Object(St.jsxs)(us,{children:[Object(St.jsx)(js,{children:Object(St.jsx)(ca,{text:Zt.a.startCase(a),headingSize:"large",buttonText:"back to ".concat(Zt.a.startCase(r)),linkTo:"/shop/browse/".concat(r)})}),c&&c.subCategory?Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(bs,{children:c.subCategory.description}),Object(St.jsx)(os,{children:Object(Ji.a)(c.subCategory.products).sort((function(e,t){return t.numInStock-e.numInStock})).map((function(n,r){return Object(St.jsx)(qs,Object(yt.a)({product:n,linkTo:"".concat(t,"/").concat(n._id)},e),r)}))})]}):Object(St.jsx)(ls,{})]})},Ts=Ct.dark,As=kt.b.div(uc||(uc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 398px;\n"]))),Ns=kt.b.img(bc||(bc=Object(wt.a)(["\n  border: 0.2px solid ",";\n  border-radius: 10px;\n  width: 100%;\n  height: auto;\n"])),Ts),Rs=kt.b.div(jc||(jc=Object(wt.a)(["\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  gap: 0.45rem;\n  @media (max-width: 414px) {\n    gap: 0.35rem;\n  }\n"]))),Ws=kt.b.img(pc||(pc=Object(wt.a)(["\n  border: 0.2px solid ",";\n  border-radius: 10px;\n  width: 32%;\n  height: auto;\n  margin-top: 0.5rem;\n  :hover {\n    cursor: pointer;\n  }\n"])),Ts),Ms=Object(kt.b)(Ws)(mc||(mc=Object(wt.a)(["\n  border-width: 2.5px;\n"]))),Bs=function(e){var t=e.images,n=Object(pt.useState)(t[0]),r=Object(Ot.a)(n,2),a=r[0],c=r[1];return Object(St.jsxs)(As,{children:[Object(St.jsx)(Ns,{src:a}),Object(St.jsx)(Rs,{children:t.map((function(e,t){return e===a?Object(St.jsx)(Ms,{src:e,onClick:function(){return c(e)}},t):Object(St.jsx)(Ws,{src:e,onClick:function(){return c(e)}},t)}))})]})},Ls=kt.b.div(hc||(hc=Object(wt.a)(["\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n  width: 95%;\n  margin: auto;\n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: center;\n  };\n"]))),Gs=kt.b.div(xc||(xc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  @media (min-width: 1024px) {\n    height: 398px\n  };\n"]))),Xs=kt.b.div(Oc||(Oc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n"]))),Hs=kt.b.div(fc||(fc=Object(wt.a)(["\n  width: 100%;\n  @media (min-width: 768px) {\n    width: 300px;\n  }\n"]))),Vs=kt.b.div(gc||(gc=Object(wt.a)(["\n  flex: 1;\n"]))),Ys=kt.b.div(yc||(yc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n"]))),Js=["currency"],Ks=Ct.dark,Qs=Ct.light,Zs=function(e){var t=e.currency,n=Object(vt.a)(e,Js);Es();var r=Object(gt.i)(),a=r.category,c=r.subCategory,i=r.productId,s=Object(Jn.a)(pa,{variables:{id:i}}).data;return s&&s.product?Object(St.jsxs)(St.Fragment,{children:[Object(St.jsxs)(Ls,{children:[Object(St.jsx)(Bs,{images:s.product.images}),Object(St.jsxs)(Gs,{children:[Object(St.jsxs)(Xs,{children:[Object(St.jsxs)("div",{children:[Object(St.jsx)(js,{children:Object(St.jsx)(ca,{text:s.product.name,headingSize:"large",buttonText:"back to ".concat(Zt.a.startCase(c)),linkTo:"/shop/browse/".concat(a,"/").concat(c)})}),Object(St.jsx)("p",{children:s.product.description})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)("h5",{children:s.product.numInStock?"In stock ready for delivery!":"Please contact us to request this item"}),Object(St.jsx)("h5",{children:Fr(s.product,t)})]})]}),Object(St.jsx)(Vs,{}),Object(St.jsx)(Hs,{children:Object(St.jsx)(Cs,Object(yt.a)({product:s.product},n))})]})]}),Object(St.jsx)(In,{dark:!0,spaceAbove:!0,spaceBelow:!0}),Object(St.jsxs)(Ys,{children:[Object(St.jsx)(wn,{heading:"Not quite what you're looking for?",text:"We pride ourselves on our bespoke service, if there's something specific you would like then please get in touch - we can almost certainly do it!"}),Object(St.jsx)(fn,{text:"Get in touch",linkTo:"/contact-us",customStyles:{background:Ks,color:Qs,width:"100%",maxWidth:"300px",height:"50px",borderRadius:"6px",fontSize:"1.15rem"}})]})]}):Object(St.jsx)(ls,{})},eo=Ct.darkFade,to=Ct.dark,no=kt.b.div(vc||(vc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid ",";\n  width: 100%;\n"])),eo),ro=kt.b.div(wc||(wc=Object(wt.a)(["\n  ","\n"])),(function(e){return e.isMinimised?{borderRadius:"5px",boxShadow:"-3px -1px 10px 2px rgba(0,0,0,0.2)",padding:"0.5rem",marginBottom:"1rem","-webkit-box-shadow":"-3px -1px 10px 2px rgba(0,0,0,0.2)"}:{margin:"0 0.5rem"}})),ao=kt.b.div(kc||(kc=Object(wt.a)(["\n  display: flex;\n"]))),co=kt.b.div(Cc||(Cc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0.25rem;\n"]))),io=kt.b.div(Sc||(Sc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  min-width: 5rem;\n  padding: 0.25rem 0.25rem 0.25rem 0.75rem;\n"]))),so=kt.b.div(Ic||(Ic=Object(wt.a)(["\n  border-right: 0.05rem solid black;\n  flex: 1;\n"]))),oo=kt.b.div(Dc||(Dc=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  padding: 0.5rem;\n  align-self: center;\n  align-items: center;\n"]))),lo=Object(kt.b)(en.a)(Uc||(Uc=Object(wt.a)(["\n  font-size: 1.75rem;\n  :hover,\n  :active {\n    cursor: pointer;\n  }\n"]))),uo=Object(kt.b)(en.k)(_c||(_c=Object(wt.a)(["\n  font-size: 1.75rem;\n  :hover,\n  :active {\n    cursor: pointer;\n  }\n"]))),bo=Object(kt.b)(en.l)($c||($c=Object(wt.a)(["\n  font-size: 1.75rem;\n  :hover,\n  :active {\n    cursor: pointer;\n  }\n"]))),jo=Object(kt.b)(ft.b)(zc||(zc=Object(wt.a)(["\n  color: ",";\n  :hover {\n    color: ",";\n  }\n"])),to,to),po=kt.b.div(Pc||(Pc=Object(wt.a)(["\n  display: flex;\n  padding-top: 0.5rem;\n  padding-right: 2rem;\n"]))),mo=Object(kt.b)(no)(qc||(qc=Object(wt.a)(["\n  flex-direction: row;\n  border-bottom: none;\n  text-align: left;\n  width: 150px;\n"]))),ho=kt.b.div(Ec||(Ec=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),xo=kt.b.div(Fc||(Fc=Object(wt.a)(["\n  flex: 1;\n"]))),Oo=kt.b.div(Tc||(Tc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 768px;\n  margin: auto;\n"]))),fo=kt.b.h6(Ac||(Ac=Object(wt.a)(["\n  ","\n"])),(function(e){return e.showLineThrough&&{color:eo,textDecoration:"line-through",marginRight:"0.5rem"}})),go=function(e){var t=e.orderItem,n=e.isMinimised,r=Object(pt.useContext)(gs),a=r.activeOrder,c=r.setActiveOrder,i=Object(pt.useContext)(Os).currency,s=Object(pt.useState)(!0),o=Object(Ot.a)(s,2),d=o[0],l=o[1],u=Object(pt.useState)(),b=Object(Ot.a)(u,2),j=b[0],p=b[1],m=Object(pt.useState)(),h=Object(Ot.a)(m,2),x=h[0],O=h[1];Object(pt.useEffect)((function(){t&&t.quantity&&(p(t.quantity),O((function(){return t.quantity*t.product["price".concat(i)]})))}),[t,p,i]),Object(pt.useEffect)((function(){O(j*t.product["price".concat(i)])}),[j,t,O,i]);var f=Wr(Qr.DeleteOrderItem),g=Object(Ot.a)(f,1)[0],y=Wr(Qr.UpdateOrderItemsInOrder),v=Object(Ot.a)(y,1)[0],w=Wr(Qr.UpdateItemInOrder),k=Object(Ot.a)(w,1)[0],C=function(){var e=Object(Pn.a)(zn.a.mark((function e(){var n,r,i,s;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.orderItems.filter((function(e){return e.orderItem_id!==t.orderItem_id})),r=n.map((function(e){return e.orderItem_id})),e.prev=2,e.next=5,g({variables:{orderItem_id:t.orderItem_id}});case 5:return e.next=7,v({variables:{order_id:a.order_id,orderItems:r}});case 7:i=e.sent,s=i.data,c(s.updateOneOrder),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(2),new Error("Failed to delete item from order");case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(Pn.a)(zn.a.mark((function e(n){var r,a;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.preventDefault(),0===j){e.next=10;break}return e.next=5,k({variables:{id:t._id,quantity:j}});case 5:r=e.sent,a=r.data,c(a.updateOneOrderItem.order),e.next=11;break;case 10:C();case 11:l(!0),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Error("Failed to update item in order");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),I=t.product;return I?Object(St.jsxs)(no,{children:[Object(St.jsx)(In,{light:!0}),Object(St.jsxs)(ao,{children:[Object(St.jsxs)(co,{children:[Object(St.jsx)(jo,{to:"/shop/browse/".concat(I.category,"/").concat(I.subCategory,"/").concat(I._id),children:Object(St.jsx)("h6",{children:I.name})}),Object(St.jsxs)("h6",{style:{fontSize:"0.75rem"},children:["Unit Price: ",Fr(I,i)]})]}),Object(St.jsx)(so,{}),Object(St.jsxs)(io,{children:[Object(St.jsxs)("h6",{children:["x ",j]}),Object(St.jsx)("h6",{children:"".concat(Er(i)).concat(x)})]})]}),!n&&Object(St.jsx)(no,{children:Object(St.jsxs)(oo,{children:[Object(St.jsx)(lo,{onClick:function(){l(!1),p(j+1)}}),Object(St.jsx)(uo,{onClick:function(){l(!1),0!==j&&p(j-1)}}),Object(St.jsx)(bo,{onClick:C}),Object(St.jsx)(fn,{text:"Save",onClick:S,disabled:d})]})})]}):null},yo=function(){Es();var e=Object(pt.useContext)(Os).currency,t=Object(pt.useContext)(gs),n=t.activeOrder,r=t.subtotal,a=Un().isXs;return Object(St.jsxs)(ro,{children:[Object(St.jsxs)(Oo,{children:[Object(St.jsx)($t,{text:"Cart"}),Object(St.jsx)(In,{}),n&&n.orderItems&&n.orderItems.length?Object(St.jsxs)(St.Fragment,{children:[n.orderItems.map((function(e,t){return Object(St.jsx)(go,{orderItem:e},t)})),Object(St.jsxs)(po,{children:[Object(St.jsx)(xo,{}),Object(St.jsx)(ho,{children:Object(St.jsxs)(mo,{children:[Object(St.jsx)("h6",{children:"Subtotal"}),Object(St.jsx)(xo,{}),Object(St.jsx)("h6",{children:"".concat(Er(e)).concat(r)})]})})]}),Object(St.jsx)(fn,{text:"Go to checkout",linkTo:"/shop/checkout",fullWidth:a,customStyles:{margin:!a&&"1rem 0.25rem 0"}})]}):Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(In,{}),Object(St.jsx)("h6",{children:"Your cart is empty!"}),Object(St.jsx)(In,{})]})]}),Object(St.jsx)(In,{spaceBelow:!0})]})},vo=n(127),wo=function(){var e=Object(Pn.a)(zn.a.mark((function e(t,n,r){var a,c,i;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="Something went wrong, please refresh and try again",c=function(e){var t;if(e instanceof qn.c){var n=e.error,r=e.statusCode;switch(n||r){case"invalid username":t="Email address is invalid";break;case"invalid username/password":case"invalid password":case 401:t="Password is invalid";break;case"name already in use":case 409:t="Email address is already registered";break;case"password must be between 6 and 128 characters":case 400:t="Invalid password - must be between 6 and 128 characters";break;default:t=a}}else t=a;return t},e.prev=2,e.next=5,t.emailPasswordAuth.registerUser(n,r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),i=c(e.t0);case 10:return e.abrupt("return",{error:i});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ko=function(e){var t;if(e instanceof qn.c){var n=e.error,r=e.statusCode;switch(n||r){case"invalid username/password":case"invalid username":case 401:t="Email address or password is invalid";break;default:t="Login failed, please try again."}return t}},Co=function(e){return!!e&&!("local-userpass"!==e.providerType||!e.dbUser||"customer"!==e.dbUser.type&&"admin"!==e.dbUser.type)},So=function(e){return!(!Co(e)||"admin"!==e.dbUser.type)},Io=(n(227),function(e,t){if(!e)return{isValid:!1,message:"Must provide delivery details"};var n=Object(yt.a)({},e),r=[],a=[];if(t&&(t.forEach((function(e){n[e]?r.push({key:e,result:!0}):r.push({key:e,result:!1})})),(a=r.filter((function(e){return!1===e.result}))).length)){var c;switch(console.log("failedTests[0]",a[0]),a.length){case 1:c="'".concat(Zt.a.startCase(a[0].key),"' is missing");break;case 2:c="'".concat(Zt.a.startCase(a[0].key),"' and '").concat(Zt.a.startCase(a[1].key),"' are missing");break;default:c="Required fields missing"}return{isValid:!1,message:c,failedTests:a}}r=[],a=[];return["firstName","lastName","email","phone"].forEach((function(e){if(n[e]){var t=n[e];"string"!==typeof t&&(t=t.toString()),function(e,t){var n;"firstName"===e||"lastName"===e?n=/^[a-zA-Z]+$/:"email"===e?n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/:"phone"===e&&(n=/^(?:[0-9] ?){6,14}[0-9]$/),r.push({key:e,value:t,result:n.test(t)})}(e,t=t.trim())}})),(a=r.filter((function(e){return!1===e.result}))).length?{isValid:!1,message:"Errors in form details, please check and re-submit",failedTests:a}:{isValid:!0}}),Do=function(e){if(e&&e.length){var t=e.find((function(e){return!0===e.isDefault}));if(t)return t}},Uo=kt.b.div(Nc||(Nc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0.5rem auto;\n  width: 96%;\n  @media (min-width: 1024px) {\n    width: 40%;\n  }\n"]))),_o=kt.b.div(Rc||(Rc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  border-radius: 5px;\n  margin-bottom: 1rem;\n  padding: 0.5rem;\n"]))),$o=kt.b.div(Wc||(Wc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  margin-top: 1rem;\n"]))),zo=kt.b.div(Mc||(Mc=Object(wt.a)(["\n  min-height: 600px;\n  margin: 0.5rem auto;\n  width: 96%;\n  @media (min-width: 1024px) {\n    width: 40%;\n  }\n"]))),Po=Object(kt.b)(_o)(Bc||(Bc=Object(wt.a)(["\n  flex-direction: column\n"]))),qo=kt.b.div(Lc||(Lc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0.5rem 0;\n"]))),Eo=kt.b.p(Gc||(Gc=Object(wt.a)(["\n  margin-bottom: 0.5rem;\n"]))),Fo=function(e){var t=e.deliveryDetails,n=e.additionalInfo,r=e.checkoutFormsComplete,a=e.updateCheckoutCompletion,c=e.updateOrder,i=e.paymentIntent,s=e.willCustomerPickUpInStore,o=Object(pt.useContext)(Bn),d=Object(pt.useContext)(Os),l=d.currency,u=d.setCurrency,b=Object(pt.useContext)(gs),j=b.activeOrder,p=b.deliveryZone,m=Object(vo.useStripe)(),h=Object(vo.useElements)(),x=Object(pt.useState)(null),O=Object(Ot.a)(x,2),f=O[0],g=O[1],y=Object(pt.useState)(!1),v=Object(Ot.a)(y,2),w=v[0],k=v[1],C=Wr(Qr.CreateAddress),S=Object(Ot.a)(C,1)[0],I=Wr(Qr.UpdateAddress),D=Object(Ot.a)(I,1)[0],U=Wr(Qr.UpdateUserAddresses),_=Object(Ot.a)(U,1)[0],$=Wr(Qr.AddDeliveryDetailsToOrder),z=Object(Ot.a)($,1)[0],P=Wr(Qr.AddPickUpDetailsToOrder),q=Object(Ot.a)(P,1)[0],E=function(){var e=Object(Pn.a)(zn.a.mark((function e(r){var a,d,u,b,x,O,f,y,v,w,C,I,U,$,P,E;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r.preventDefault(),!t||""!==t.address){e.next=5;break}return g("Please complete and confirm delivery details before submitting payment"),e.abrupt("return");case 5:if(m&&h){e.next=7;break}return e.abrupt("return");case 7:return k(!0),a={line1:t.line1,line2:t.line2,city:t.city,county:t.county,postcode:t.postcode,country:t.country,isDefault:Co(o.currentUser)},d={firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,price:t.price},u=!s.current,e.next=13,o.currentUser.functions.stripe_updatePaymentTotals(i.id,j.orderItems,p.current,l,{GBP:100,USD:150,EUR:150});case 13:return b=e.sent,d.price=b?b.deliveryTotal:0,x={id:j._id,currency:l},n&&n.length&&(x.extraInfo=n),e.next=19,c({variables:x});case 19:if(O=t.address_id||null,!u){e.next=57;break}if(O&&""!==O){e.next=48;break}return e.t0=S,e.t1=yt.a,e.t2="address-",e.next=27,Ua()();case 27:return e.t3=e.sent,e.t4=e.t2.concat.call(e.t2,e.t3),e.t5={address_id:e.t4},e.t6=a,e.t7=(0,e.t1)(e.t5,e.t6),e.t8={variables:e.t7},e.next=35,(0,e.t0)(e.t8);case 35:if(f=e.sent,y=f.data,O=y.insertOneAddress.address_id,!Co(o.currentUser)){e.next=46;break}return v=o.currentUser.dbUser,e.next=42,_({variables:{id:v._id,addresses:[O]}});case 42:return w=e.sent,C=w.data,e.next=46,o.setCurrentUser((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:C.updateOneUser})}));case 46:e.next=53;break;case 48:if(I=Do(o.currentUser.dbUser.addresses),U=na(I,a),$=U.updatedFields,!U.hasUpdatedFields){e.next=53;break}return e.next=53,D({variables:Object(yt.a)({address_id:O},$)});case 53:return e.next=55,z({variables:Object(yt.a)({order_id:t.order_id,delivery_id:t.delivery_id,address_id:O},d)});case 55:e.next=59;break;case 57:return e.next=59,q({variables:{order_id:t.order_id,delivery_id:t.delivery_id,firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone}});case 59:return e.next=61,m.confirmPayment({elements:h,confirmParams:{return_url:"http://localhost:3000/shop/checkout/summary"}});case 61:P=e.sent,"card_error"===(E=P.error).type||"validation_error"===E.type?g(E.message):g("An unexpected error occured."),e.next=70;break;case 66:e.prev=66,e.t9=e.catch(0),g("An unexpected error occured. Please contact Doves and Dandys"),console.error(e.t9);case 70:return e.prev=70,k(!1),e.finish(70);case 73:case"end":return e.stop()}}),e,null,[[0,66,70,73]])})));return function(t){return e.apply(this,arguments)}}();return Object(pt.useEffect)((function(){h&&h.getElement("payment").on("change",(function(e){e.complete!==r.paymentFormComplete&&a({paymentFormComplete:e.complete})}))}),[h,r,a]),Object(St.jsx)(_o,{children:Object(St.jsxs)("form",{children:[Object(St.jsx)($t,{text:"Payment Details",size:"small"}),Object(St.jsxs)($o,{children:[Object(St.jsx)(Cr,{name:"currency-selection",value:l,label:"Select currency",handleChange:function(e){u(e.target.value)},options:[{name:"British Pounds (\xa3)",value:"GBP"},{name:"US Dollars ($)",value:"USD"},{name:"Euros (\u20ac)",value:"EUR"}],variant:"outlined"}),Object(St.jsx)(vo.PaymentElement,{}),f&&Object(St.jsx)($r,{type:"error",text:f})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($r,{type:"warning",text:"Clicking pay now will submit your payment"}),Object(St.jsx)(fn,{text:w?Object(St.jsx)(mn,{size:"1.5rem"}):"pay now",onClick:E,disabled:!m||!h||!r,fullWidth:!0,customStyles:r?null:{opacity:.5}})]})]})})},To=(kt.b.div(Xc||(Xc=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  -webkit-box-shadow: ",";\n  box-shadow: ",";\n  border-radius: 5px;\n  margin-bottom: 1rem;\n  padding: 0.5rem;\n"])),(function(e){return!e.useFormOnly&&"-3px -1px 10px 2px rgba(0,0,0,0.2)"}),(function(e){return!e.useFormOnly&&"-3px -1px 10px 2px rgba(0,0,0,0.2)"})),kt.b.div(Hc||(Hc=Object(wt.a)(["\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  marginTop: 5.5rem;\n"]))),kt.b.div(Vc||(Vc=Object(wt.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),kt.b.div(Yc||(Yc=Object(wt.a)(["\n  margin-top: 1rem;\n  margin-left: 0.75rem;\n"])))),Ao=kt.b.span(Jc||(Jc=Object(wt.a)(["\n  margin-right: 0.25rem\n"]))),No=function(e){var t=e.formDisabled,n=e.buttonDisabled,r=e.message,a=e.buttonText,c=e.loading,i=e.handleSubmit,s=e.handleBackToEdit,o=e.pickUpInStore,d={};return!t||o?(d.onClick=i,d.text=c?Object(St.jsx)(mn,{size:"1.5rem"}):a||"save details"):(d.onClick=s,d.text="Edit details"),Object(St.jsxs)(Hi,{children:[Object(St.jsx)(fn,Object(yt.a)(Object(yt.a)({},d),{},{customStyles:{width:"50%",height:"2.5rem"},disabled:n})),r&&r.type&&Object(St.jsx)(Ao,{children:Object(St.jsx)($r,{type:r.type,text:r.text})})]})},Ro=function(e){var t=e.name,n=e.value,r=e.label,a=e.helperText,c=e.required,i=e.handleChange,s=e.autoFocus,o=e.type,d=e.disabled,l=e.variant,u=e.margin,b=e.multiline;return Object(St.jsx)(fr.a,{id:t,name:t,value:n,"aria-describedby":t,required:!1!==c,helperText:a,label:r,margin:u||"dense",variant:l||"filled",onChange:i,fullWidth:!0,autoFocus:s,disabled:d,type:o,multiline:b,sx:{backgroundColor:"transparent",background:"transparent",borderRadius:"10px",".Mui-focused":{color:Ct.dark}}})},Wo=n(606),Mo=n(573),Bo=Ct.dark,Lo=function(e){var t=e.value,n=e.label,r=e.handleChange,a=e.size,c=e.disabled;return Object(St.jsx)(Wo.a,{control:Object(St.jsx)(Mo.a,{size:a,onChange:r,sx:{color:Bo,"&.Mui-checked":{color:Bo}},value:t,disabled:c}),sx:{color:Bo,".MuiFormControlLabel-label":{marginLeft:"0.75rem"}},label:n})},Go=function(e){var t={};for(var n in e){var r=e[n];switch(n){case"firstName":case"lastName":case"line1":case"line2":case"city":case"county":case"country":t[n]=Zt.a.startCase(r.trim());break;case"postcode":t[n]=r.trim();break;case"email":t.email=r.trim().toLowerCase();break;case"phone":t.phone=r.toString().trim()}}return t},Xo=["address_id"],Ho=function(e){var t=e.onAddressValid,n=e.onEditting,r=e.onPickUpInStore,a=e.buttonText,c=e.successMessage,i=e.disableOnComplete,s=e.defaultAddress,o=e.isCheckoutForm,d=Object(pt.useState)({address_id:s?s.address_id:"",line1:s?s.line1:"",line2:s?s.line2:"",city:s?s.city:"",county:s?s.county:"",postcode:s?s.postcode:"",country:s?s.country:""}),l=Object(Ot.a)(d,2),u=l[0],b=l[1],j=Object(pt.useState)([]),p=Object(Ot.a)(j,2),m=p[0],h=p[1],x=Object(pt.useState)({}),O=Object(Ot.a)(x,2),f=O[0],g=O[1],y=Object(pt.useState)(!1),v=Object(Ot.a)(y,2),w=v[0],k=v[1],C=Object(pt.useState)(!1),S=Object(Ot.a)(C,2),I=S[0],D=S[1],U=Object(pt.useRef)(!1),_=Object(pt.useCallback)(function(){var e=Object(Pn.a)(zn.a.mark((function e(n){var r,a,s;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"success",text:c||"Saved address details"}),r=n.address_id,a=Object(vt.a)(n,Xo),s=Go(a),e.next=5,t(Object(yt.a)(Object(yt.a)({},s),{},{address_id:r}),"delivery");case 5:i&&D(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,i,t]),$=function(e){b((function(t){return Object(yt.a)(Object(yt.a)({},t),{},Object(ti.a)({},e.target.name,e.target.value))}))},z=function(){var e=Object(Pn.a)(zn.a.mark((function e(t){var n,r,a,c;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,t.preventDefault(),k(!0),n=[],r=0,a=["line1","city","county","postcode","country"];r<a.length;r++)u[c=a[r]]&&""!==u[c]||n.push(c);n.length?g({type:"error",text:"Address must include all fields marked as required (*)"}):_(u),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Error("Failed to save address. Error:",e.t0);case 12:return e.prev=12,k(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),P="/PostalCountries/countries.json",q=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var t,n,r;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(P);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r=n.sort((function(e,t){return e.country<t.country?-1:e.country>t.country?1:0})).map((function(e){var t=e.country;return{name:t,value:t}})),h(r);case 8:case"end":return e.stop()}}),e)}))),[P]);return Object(pt.useEffect)((function(){return q()}),[q]),Object(pt.useEffect)((function(){s&&i&&_(s)}),[s,i,_]),m?Object(St.jsxs)("form",{children:[Object(St.jsx)(Ro,{name:"line1",value:u.line1,label:"Address Line 1",handleChange:$,variant:"outlined",margin:"normal",type:"text",disabled:I}),Object(St.jsx)(Ro,{name:"line2",value:u.line2,label:"Address Line 2",handleChange:$,required:!1,variant:"outlined",margin:"normal",type:"text",disabled:I}),Object(St.jsxs)(Hi,{children:[Object(St.jsx)(Ro,{name:"city",value:u.city,label:"City",handleChange:$,variant:"outlined",margin:"normal",type:"text",disabled:I}),Object(St.jsx)(Ro,{name:"county",value:u.county,label:"County / State",handleChange:$,variant:"outlined",margin:"normal",type:"text",disabled:I})]}),Object(St.jsxs)(Hi,{children:[Object(St.jsx)(Ro,{name:"postcode",value:u.postcode,label:"Postcode",handleChange:$,variant:"outlined",margin:"normal",type:"text",disabled:I}),Object(St.jsx)(Cr,{name:"country",value:u.country,label:"Country *",handleChange:$,options:m,required:!0,variant:"outlined",disabled:I,style:{marginTop:"8px"}})]}),Object(St.jsx)(No,{formDisabled:I,buttonDisabled:U.current,message:f,buttonText:a,loading:w,handleSubmit:z,handleBackToEdit:function(){D(!1),g({}),n&&n("delivery")},pickUpInStore:U.current}),o&&Object(St.jsx)(To,{children:Object(St.jsx)(Lo,{label:"Pick up in-store",handleChange:function(){U.current=!U.current,D(U.current),r(U.current)},value:U.current})})]}):null},Vo=function(e){var t=e.dbUser,n=e.onValidDetails,r=e.onEditting,a=e.buttonText,c=e.successMessage,i=e.disableOnComplete,s=e.requiredFields,o=e.isCheckoutForm,d=Object(pt.useState)({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phone||""}),l=Object(Ot.a)(d,2),u=l[0],b=l[1],j=Object(pt.useState)({}),p=Object(Ot.a)(j,2),m=p[0],h=p[1],x=Object(pt.useState)(!1),O=Object(Ot.a)(x,2),f=O[0],g=O[1],y=Object(pt.useState)(!1),v=Object(Ot.a)(y,2),w=v[0],k=v[1],C=Object(pt.useCallback)(function(){var e=Object(Pn.a)(zn.a.mark((function e(t){var r;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"success",text:c||"Saved address details"}),r=Go(t),e.next=4,n(r,"personal");case 4:i&&k(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,i,n]),S=function(e){b((function(t){return Object(yt.a)(Object(yt.a)({},t),{},Object(ti.a)({},e.target.name,e.target.value))}))},I=function(){var e=Object(Pn.a)(zn.a.mark((function e(t){var n,r,a;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),g(!0),n=Io(u,s),r=n.isValid,a=n.message,!r){e.next=18;break}return e.prev=4,e.next=7,C(u);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Save personal details failed. Error:",e.t0),h({type:"error",text:"Failed to save details, please refresh and try again or contact Doves and Dandys if the problem persists"});case 13:return e.prev=13,g(!1),e.finish(13);case 16:e.next=20;break;case 18:h({type:"error",text:a}),g(!1);case 20:case"end":return e.stop()}}),e,null,[[4,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),D=Object(pt.useRef)(!1);return Object(pt.useEffect)((function(){!1===D.current&&o&&(Io(u,s).isValid&&C(u),D.current=!0)}),[t,i,C,u,s,D,o]),Object(St.jsxs)("form",{children:[Object(St.jsxs)(Hi,{children:[Object(St.jsx)(Ro,{name:"firstName",value:u.firstName,label:"First name",handleChange:S,required:s.includes("firstName"),variant:"outlined",margin:"normal",type:"text",disabled:w}),Object(St.jsx)(Ro,{name:"lastName",value:u.lastName,label:"Last name",handleChange:S,required:s.includes("lastName"),variant:"outlined",margin:"normal",type:"text",disabled:w})]}),Object(St.jsx)(Ro,{name:"email",value:u.email,label:"Email",handleChange:S,variant:"outlined",margin:"normal",type:"email",disabled:w,required:s.includes("email")}),Object(St.jsx)(Ro,{name:"phone",value:u.phone,label:"Phone",handleChange:S,variant:"outlined",margin:"normal",type:"text",disabled:w,required:s.includes("phone")}),Object(St.jsx)(No,{formDisabled:w,message:m,buttonText:a,loading:f,handleSubmit:I,handleBackToEdit:function(){k(!1),h({}),r&&r("personal")}})]})};Vo.defaultProps={requiredFields:["email"]};var Yo,Jo,Ko,Qo,Zo,ed,td,nd,rd,ad,cd,id,sd,od,dd,ld,ud,bd,jd,pd,md,hd,xd,Od,fd,gd,yd,vd,wd,kd,Cd,Sd,Id,Dd,Ud,_d,$d,zd,Pd,qd,Ed,Fd,Td,Ad,Nd=Vo,Rd=function(e){var t=e.updateDeliveryDetails,n=e.updateCheckoutCompletion,r=e.willCustomerPickUpInStore,a=Object(pt.useContext)(Bn),c=a.currentUser,i=a.setCurrentUser,s=Wr(Qr.UpdateUser),o=Object(Ot.a)(s,1)[0],d=Do(c.dbUser.addresses),l=Object(pt.useCallback)(function(){var e=Object(Pn.a)(zn.a.mark((function e(r,a){var s,d,l,u,b;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(r),a&&n(Object(ti.a)({},"".concat(a,"FormComplete"),!0)),!Co(c)){e.next=11;break}if(s=na(c.dbUser,r),d=s.updatedFields,l=s.hasUpdatedFields,"personal"!==a||!l){e.next=11;break}return e.next=7,o({variables:Object(yt.a)({id:c.dbUser._id},d)});case 7:return u=e.sent,b=u.data,e.next=11,i((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:b.updateOneUser})}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,n,c,o,i]),u=Object(pt.useCallback)((function(e){n(Object(ti.a)({},"".concat(e,"FormComplete"),!1))}),[n]);return Object(St.jsxs)("div",{children:[Object(St.jsxs)(_o,{children:[Object(St.jsx)($t,{text:"Your details",size:"small"}),Object(St.jsx)(Nd,{dbUser:c.dbUser,onValidDetails:l,onEditting:u,buttonText:"confirm details",successMessage:"Personal details confirmed",disableOnComplete:!0,requiredFields:["firstName","lastName","email"],isCheckoutForm:!0})]}),Object(St.jsxs)(_o,{children:[Object(St.jsx)($t,{text:"Delivery details",size:"small"}),Object(St.jsx)(Ho,{onAddressValid:l,onEditting:u,onPickUpInStore:function(e){r.current=e,n({deliveryFormComplete:!!e})},buttonText:"confirm address",successMessage:"Address confirmed",disableOnComplete:!0,defaultAddress:d,isCheckoutForm:!0})]})]})},Wd=function(e){var t=e.additionalInfo,n=e.updateAdditionalInfo;return Object(St.jsx)("div",{children:Object(St.jsx)(_o,{children:Object(St.jsx)(fr.a,{multiline:!0,minRows:8,maxRows:8,label:"Additional info",helperText:"Please add any additional info to do with your order here",sx:{marginTop:"1rem"},onChange:function(e){n(e.target.value)},value:t})})})},Md=function(e){var t=e.willCustomerPickUpInStore,n=e.deliveryFormComplete,r=e.successfulOrder;Es();var a,c=Object(pt.useContext)(Os).currency,i=Object(pt.useContext)(gs),s=i.activeOrder,o=i.subtotal,d=i.deliveryPrice,l=Object(pt.useState)({}),u=Object(Ot.a)(l,2),b=u[0],j=u[1],p=r&&"successful"===r.paymentStatus&&r.orderItems,m=s&&"failed"===s.paymentStatus,h=s&&s.orderItems&&s.orderItems.length&&"notAttempted"===s.paymentStatus;(h||m)&&(a=!!(o>={GBP:100,USD:150,EUR:150}[c]||t.current));var x=Object(pt.useCallback)((function(){if(p){var e=r.delivery,t=r.stripeAmountPaid/100;j({completedTotal:t,completedSubtotal:t-e.price,completedDeliveryPrice:e.price})}}),[r,p]);Object(pt.useEffect)((function(){return x()}),[x]);var O=b.completedTotal,f=b.completedSubtotal,g=b.completedDeliveryPrice,y=r||s;return Object(St.jsx)(ro,{isMinimised:!0,children:Object(St.jsxs)(Oo,{children:[Object(St.jsx)($t,{text:"Order Summary",size:"small"}),Object(St.jsx)(In,{}),y&&y.orderItems?Object(St.jsxs)(St.Fragment,{children:[y.orderItems.map((function(e,t){return Object(St.jsx)(go,{orderItem:e,isMinimised:!0},t)})),Object(St.jsxs)(po,{children:[Object(St.jsx)(xo,{}),Object(St.jsxs)(ho,{children:[Object(St.jsxs)(mo,{children:[Object(St.jsx)("h6",{children:"Subtotal"}),Object(St.jsx)(xo,{}),Object(St.jsx)("h6",{children:"".concat(Er(c)).concat(f||o)})]}),Object(St.jsxs)(mo,{children:[Object(St.jsx)("h6",{children:"Delivery"}),Object(St.jsx)(xo,{}),Object(St.jsx)(fo,{showLineThrough:a&&d>0,children:n&&h||m?d?"".concat(Er(c)).concat(d):"FREE":p?g?"".concat(Er(c)).concat(g):"".concat(Er(c),"0"):"-"})]}),Object(St.jsxs)(mo,{children:[Object(St.jsx)("h6",{children:Object(St.jsx)("strong",{children:"Total"})}),Object(St.jsx)(xo,{}),Object(St.jsxs)("h6",{children:[Object(St.jsx)("strong",{children:Er(c)}),O?Object(St.jsx)("strong",{children:O}):a?Object(St.jsx)("strong",{children:o}):Object(St.jsx)("strong",{children:o+d})]})]})]})]})]}):Object(St.jsx)(ls,{})]})})},Bd=function(e){var t=e.stripePromise,n=Object(pt.useContext)(Bn),r=Object(pt.useContext)(Os).currency,a=Object(pt.useContext)(gs),c=a.activeOrder,i=a.setActiveOrder,s=a.setDeliveryCountry,o=Object(pt.useState)(null),d=Object(Ot.a)(o,2),l=d[0],u=d[1],b=Object(pt.useState)(""),j=Object(Ot.a)(b,2),p=j[0],m=j[1],h=Object(pt.useState)({order_id:"",delivery_id:"delivery-".concat(Ua()()),address_id:"",firstName:"",lastName:"",email:"",phone:null,country:""}),x=Object(Ot.a)(h,2),O=x[0],f=x[1],g=Object(pt.useState)({personalFormComplete:!1,deliveryFormComplete:!1,paymentFormComplete:!1}),y=Object(Ot.a)(g,2),v=y[0],w=y[1],k=Object(pt.useRef)(!1),C=Object(gt.g)(),S=Wr(Qr.UpdateOrder),I=Object(Ot.a)(S,1)[0],D=v.personalFormComplete,U=v.deliveryFormComplete,_=v.paymentFormComplete,$=!!(D&&U&&_),z=Object(pt.useCallback)((function(e){w((function(t){return Object(yt.a)(Object(yt.a)({},t),e)}))}),[w]),P=Object(pt.useCallback)((function(e){f((function(t){return Object(yt.a)(Object(yt.a)({},t),e)}))}),[f]);Object(pt.useEffect)((function(){c&&Object.keys(c).length?P({order_id:c.order_id}):C.replace("/shop/cart")}),[c,P,C]),Object(pt.useEffect)((function(){U&&O.country&&""!==O.country&&s(O.country)}),[U,O.country,s]);return Object(pt.useEffect)((function(){if(c&&c.orderItems&&!c.paymentIntentId)(function(){var e=Object(Pn.a)(zn.a.mark((function e(){var t,a,s;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.currentUser.functions.stripe_createPaymentIntent(Object(yt.a)(Object(yt.a)({},c),{},{currency:r}));case 2:return t=e.sent,e.next=5,I({variables:{id:c._id,paymentIntentId:t.id}});case 5:a=e.sent,s=a.data,u(t),i(s.updateOneOrder);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();else if(c&&c.paymentIntentId){(function(){var e=Object(Pn.a)(zn.a.mark((function e(){var t;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.currentUser.functions.stripe_retrievePaymentIntent(c.paymentIntentId);case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}}),[c,i,n.currentUser,I,r]),l?Object(St.jsx)(vo.Elements,{stripe:t,options:{clientSecret:l.client_secret,appearance:{theme:"flat",variables:{fontFamily:' "Gill Sans", sans-serif',fontLineHeight:"1.5",borderRadius:"5px",colorBackground:"#F6F8FA",colorPrimaryText:"#262626"},rules:{".Block":{backgroundColor:"var(--colorBackground)",boxShadow:"none",padding:"12px"},".Input":{padding:"12px"},".Input:disabled, .Input--invalid:disabled":{color:"lightgray"},".Tab":{padding:"10px 12px 8px 12px",border:"none"},".Tab:hover":{border:"none",boxShadow:"0px 1px 1px rgba(0, 0, 0, 0.03), 0px 3px 7px rgba(18, 42, 66, 0.04)"},".Tab--selected, .Tab--selected:focus, .Tab--selected:hover":{border:"none",backgroundColor:"#fff",boxShadow:"0 0 0 1.5px var(--colorPrimaryText), 0px 1px 1px rgba(0, 0, 0, 0.03), 0px 3px 7px rgba(18, 42, 66, 0.04)"},".Label":{fontWeight:"500"}}}},children:Object(St.jsxs)(Uo,{children:[Object(St.jsx)(Rd,{deliveryDetails:O,updateDeliveryDetails:P,updateCheckoutCompletion:z,willCustomerPickUpInStore:k}),Object(St.jsx)(Wd,{additionalInfo:p,updateAdditionalInfo:m}),Object(St.jsx)(Md,{willCustomerPickUpInStore:k,deliveryFormComplete:U}),Object(St.jsx)(Fo,{deliveryDetails:O,additionalInfo:p,checkoutFormsComplete:$,updateCheckoutCompletion:z,updateOrder:I,paymentIntent:l,willCustomerPickUpInStore:k})]})}):Object(St.jsx)(ls,{message:"Preparing your order for checkout"})},Ld=function(){var e=Object(pt.useContext)(Bn),t=Object(pt.useContext)(Os).setCurrency,n=Object(pt.useState)({}),r=Object(Ot.a)(n,2),a=r[0],c=r[1],i=Object(pt.useState)(null),s=Object(Ot.a)(i,2),o=s[0],d=s[1],l=Object(pt.useState)(""),u=Object(Ot.a)(l,2),b=u[0],j=u[1],p=Object(gt.g)(),m=Object(di.a)(xa,{onCompleted:function(e){c(e.order)}}),h=Object(Ot.a)(m,1)[0],x=Wr(Qr.UpdateUser),O=Object(Ot.a)(x,1)[0],f=Wr(Qr.UpdateUserAddresses),g=Object(Ot.a)(f,1)[0],y=Wr(Qr.UpdateAddress),v=Object(Ot.a)(y,1)[0],w=function(){var t=Object(Pn.a)(zn.a.mark((function t(n,r){var a,c,i,s,o,d;return zn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.currentUser.dbUser,t.prev=2,t.next=5,O({variables:{id:a._id,firstName:r.firstName,lastName:r.lastName,email:r.email,phone:r.phone}});case 5:if(c=t.sent,i=c.data,s=i.updateOneUser,!r||!r.address){t.next=16;break}return t.next=11,v({variables:{address_id:r.address.address_id,isDefault:!0}});case 11:return t.next=13,g({variables:{id:a._id,addresses:[r.address.address_id]}});case 13:o=t.sent,d=o.data,s=d.updateOneUser;case 16:return t.next=18,e.setCurrentUser((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:s})}));case 18:p.push({pathname:"/login",state:{form:"register"}}),t.next=24;break;case 21:throw t.prev=21,t.t0=t.catch(2),new Error("Failed to update user with order details. Error:",t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e,n){return t.apply(this,arguments)}}(),k=e.currentUser.functions.stripe_retrievePaymentIntent,C=Object(pt.useCallback)(Object(Pn.a)(zn.a.mark((function e(){var n,r;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=new URLSearchParams(window.location.search).get("payment_intent"))){e.next=11;break}return e.next=5,k(n);case 5:r=e.sent,d(r),t(r.currency.toUpperCase()),p.replace("/shop/checkout/summary"),e.next=12;break;case 11:o||p.replace("/shop/cart");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[p,k,t,o]);return Object(pt.useEffect)((function(){return C()}),[C]),Object(pt.useEffect)((function(){if(o)switch(o.status){case"succeeded":h({variables:{paymentIntentId:o.id}}),j("Thank you! Your payment was successful!");break;case"processing":j("Your payment is processing.");break;case"requires_payment_method":j("Your payment was not successful, please try again.");break;default:j("Something unusual happened. Please contact Doves and Dandys to check the status of your payment.")}}),[o,h]),Object(St.jsxs)(zo,{children:[Object(St.jsx)(Po,{children:Object(St.jsx)("h4",{style:{margin:"1rem 0"},children:b})}),o&&a?Object(St.jsxs)(St.Fragment,{children:[Co(e.currentUser)?Object(St.jsxs)(Po,{children:[Object(St.jsx)(Eo,{children:"Click below to view the order in your account, or access any time by logging in"}),Object(St.jsx)(fn,{text:"view in my account",linkTo:{pathname:"/my-account",state:{form:"orders"}},fullWidth:!0})]}):Object(St.jsxs)(Po,{children:[Object(St.jsx)(Eo,{children:"Register an account to track your order and save your delivery details for next time"}),Object(St.jsx)(fn,{text:"Click to register!",onClick:function(e){return w(e,a.delivery)},fullWidth:!0})]}),Object(St.jsx)(Md,{successfulOrder:a}),"succeeded"===o.status&&Object(St.jsxs)(Po,{children:[Object(St.jsxs)(qo,{children:[Object(St.jsx)(Eo,{children:"Order Reference Number:"}),Object(St.jsx)("strong",{children:a.order_id})]}),Object(St.jsxs)(qo,{children:[Object(St.jsx)(Eo,{children:"You will receive a confirmation of your payment by email to:"}),Object(St.jsx)("strong",{children:a.delivery&&a.delivery.email})]})]})]}):Object(St.jsx)(ls,{})]})},Gd=n(313),Xd=Object(Gd.a)("pk_test_51JssHLK4OzaV2zFUvwSBOreLFJyb8YuJT6rZheUc4MkBtGeMj9ZrqNd3mQebbi9nnLcGkLjqDaCMFwtT5KyjuBmN00M3I7Ekl1"),Hd=function(){Es();var e=Object(pt.useContext)(Bn),t=Object(pt.useContext)(Os).currency,n=Object(pt.useState)({isLoading:!1,productId:""}),r=Object(Ot.a)(n,2),a=r[0],c=r[1],i={addingToCart:a,updateAddingToCart:function(e,t){c({isLoading:e,productId:t})},updateCurrentUser:function(){var t=Object(Pn.a)(zn.a.mark((function t(n){return zn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setCurrentUser((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:n})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),currentUser:e.currentUser,currency:t};return e.currentUser&&e.currentUser.dbUser?Object(St.jsxs)(St.Fragment,{children:[Object(St.jsxs)(gt.d,{children:[Object(St.jsx)(gt.b,{exact:!0,path:"/shop",component:ps}),Object(St.jsx)(gt.b,{exact:!0,path:"/shop/browse",component:ps}),Object(St.jsx)(gt.b,{exact:!0,path:"/shop/browse/:category",component:ms}),Object(St.jsx)(gt.b,{exact:!0,path:"/shop/browse/:category/:subCategory",render:function(){return Object(St.jsx)(Fs,Object(yt.a)({},i))}}),Object(St.jsx)(gt.b,{exact:!0,path:"/shop/browse/:category/:subCategory/:productId",render:function(){return Object(St.jsx)(Zs,Object(yt.a)({},i))}}),Object(St.jsx)(gt.b,{exact:!0,path:"/shop/cart",component:yo}),Object(St.jsx)(gt.b,{exact:!0,path:"/shop/checkout",render:function(){return Object(St.jsx)(Bd,{stripePromise:Xd})}}),Object(St.jsx)(gt.b,{exact:!0,path:"/shop/checkout/summary",component:Ld})]}),Object(St.jsx)(In,{spaceBelow:!0})]}):null},Vd=kt.b.div(Yo||(Yo=Object(wt.a)(["\n  margin: 0 1rem 1rem;\n"]))),Yd=kt.b.div(Jo||(Jo=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 1rem;\n  @media (min-width: 768px) {\n    flex-direction: row;\n    justify-content: center;\n  }\n"]))),Jd=kt.b.img(Ko||(Ko=Object(wt.a)(["\n  border-radius: 6px;\n  display: inline-flex;\n  height: calc(this.width * 1.84);\n  margin: auto;\n  max-width: 300px;\n  @media (min-width: 768px) {\n    display: none;\n  }\n"]))),Kd=Object(kt.b)(Jd)(Qo||(Qo=Object(wt.a)(["\n  display: none;\n  @media (min-width: 768px) {\n    display: inline-flex;\n    float: right;\n    margin-left: 1rem;\n  }\n"]))),Qd=kt.b.div(Zo||(Zo=Object(wt.a)([""]))),Zd=kt.b.p(ed||(ed=Object(wt.a)([""]))),el=function(){return Es(),Object(St.jsx)(St.Fragment,{children:Object(St.jsxs)(Vd,{children:[Object(St.jsx)($t,{text:"About Us"}),Object(St.jsxs)(Yd,{children:[Object(St.jsxs)(Qd,{children:[Object(St.jsx)(Zd,{children:"Howdy Folks!"}),Object(St.jsx)(Zd,{children:"Because of our passion and interest for the Old West and also being lucky enough to do Re-enactment for many years, we have enjoyed developing a broad range of products that reflect careful research into the different periods, locations, and people of The Old West."}),Object(St.jsx)(Kd,{src:"/images/steve-and-di-about-us.JPG",alt:"The shop owners, Di and Steve in full Old-Western dress"}),Object(St.jsx)(Zd,{children:"From our own experience over the years, we found it very difficult to find exactly what we want. You can spend a lot of money on something for which you make do,  or it doesn't quite fit how you want it to, or wrong it\u2019s the colour or  worse still, it isn't period correct. We also found it hard to get quality that would stand up to the demands of Re-enactment."}),Object(St.jsx)(Zd,{children:"On western weekends and festivals, we'd look at different stores, trying to find period clothes and quality western leather products.  We found that only a few stalls would carry things we liked.  It was this hole in the market that inspired us to create Doves and Dandy\u2019s Westernwear. We offer quality at what we believe are good prices. My wife Diane has been making quality clothing for the last thirty years.  I have used my knowledge of the Old West and developed leather working skills to work alongside her, so that we can offer quality clothing and leather products to a high standard."}),Object(St.jsx)(Zd,{children:"When we make an item for a new or returning customer, we can't say how much enjoyment we get from the happiness expressed, when they try on or wear their new item we have made for the first time. Many of our commissions come from word of mouth and that is the best recommendation we can get."}),Object(St.jsx)(Zd,{children:"We take great care and pride in every crafted item we create, using only the Best Quality Materials from the U.K and the USA. So, if you decide you want us to make something for you, it would be our pleasure, as we enjoy our craft."}),Object(St.jsx)(Zd,{children:"We hope you enjoy browsing our website, and look forward to hearing from you."}),Object(St.jsx)(Zd,{children:"Happy Trails"}),Object(St.jsx)(Zd,{children:"Steve & Diane"})]}),Object(St.jsx)(Jd,{src:"/images/steve-and-di-about-us.JPG",alt:"The shop owners, Di and Steve in full Old-Western dress"})]})]})})},tl=n(314),nl=kt.b.div(td||(td=Object(wt.a)(["\n  margin: 0 0.5rem;\n"]))),rl=kt.b.div(nd||(nd=Object(wt.a)(["\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n  padding: 1rem;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  width: 100%;\n  max-width: 1024px;\n  @media (min-width: 1024px) {\n    flex-direction: row;\n    justify-content: space-evenly;\n    margin: 0 auto 2rem;\n  }\n"]))),al=kt.b.div(rd||(rd=Object(wt.a)(["\n  display: flex;\n  align-items: flex-start;\n"]))),cl=kt.b.p(ad||(ad=Object(wt.a)(["\n  padding-left: 1rem;\n  padding-bottom: 0.25rem;\n  justify-self: flex-start;\n  overflow: hidden;\n"]))),il=(kt.b.div(cd||(cd=Object(wt.a)(["\n  flex: 1;\n"]))),Object(kt.b)(en.h)(id||(id=Object(wt.a)(["\n  color: ",";\n  margin-top: 0.25rem;\n"])),Ct.dark)),sl=Object(kt.b)(tl.a)(sd||(sd=Object(wt.a)(["\n  color: ",";\n  margin-top: 0.25rem;\n"])),Ct.dark),ol=Object(kt.b)(Pt.b)(od||(od=Object(wt.a)(["\n  color: ",";\n  margin-top: 0.25rem;\n"])),Ct.dark),dl=function(){return Es(),Object(St.jsx)(St.Fragment,{children:Object(St.jsxs)(nl,{children:[Object(St.jsx)($t,{text:"Contact Us"}),Object(St.jsxs)("div",{children:[Object(St.jsx)("p",{children:"If you would like contact us, we would love to hear from you. Our preferred method of contact is by email with your request or question. We will get back to you as soon as possible."}),Object(St.jsx)("p",{children:"No appointment necessary!"}),Object(St.jsx)("br",{})]}),Object(St.jsxs)(rl,{children:[Object(St.jsx)("div",{children:Object(St.jsxs)(al,{children:[Object(St.jsx)(il,{}),Object(St.jsx)(cl,{children:"dovesanddandys@outlook.com"})]})}),Object(St.jsxs)(al,{children:[Object(St.jsx)(sl,{}),Object(St.jsx)(cl,{children:"+44 7869 375541"})]}),Object(St.jsxs)(al,{children:[Object(St.jsx)(ol,{}),Object(St.jsxs)("div",{children:[Object(St.jsx)(cl,{children:"Doves & Dandys Westernwear"}),Object(St.jsx)(cl,{children:"Unit 1, Old Town Hall Workshops"}),Object(St.jsx)(cl,{children:"Beaufort Road"}),Object(St.jsx)(cl,{children:"Llandrindod Wells"}),Object(St.jsx)(cl,{children:"Powys"}),Object(St.jsx)(cl,{children:"LD1 5DL"})]})]})]})]})})},ll=n(579),ul=n(607),bl=n(596),jl=n(608),pl=n(318),ml=n.n(pl),hl=n(315),xl=n(316),Ol=n(317),fl=kt.b.div(dd||(dd=Object(wt.a)(["\n  margin-top: 1rem;\n"]))),gl=function(){return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)($t,{text:"How To Measure",size:"small"}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Chest and Bust Measurement",size:"x-small"}),Object(St.jsx)("p",{children:"Measure around the fullest part  of the chest or bust, taking care to keep the tape under the arms and around the shoulder blades. Read the measurement with the tape snug, not tight. The number of inches is your correct size."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Waist Measurement",size:"x-small"}),Object(St.jsx)("p",{children:"Measure around your waist, over your shirt (not over trousers) at your natural waist line. The number of inches is your correct size."}),Object(St.jsxs)("p",{children:[Object(St.jsx)("strong",{children:"Note:"})," if you wear your trousers below your stomach, we will also require your stomach measurement at it's largest point."]})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Seat/Hips Measurement",size:"x-small"}),Object(St.jsx)("p",{children:"Stand with your heels together and measure around the fullest part. The number of inches is your correct size."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Sleeve Length Measurement",size:"x-small"}),Object(St.jsx)("p",{children:"Measure with your arm raised level with shoulder. Start the tape level with the raised arm at the exact middle of the back at the neck between the shoulder blades. From the middle of your back, around the elbow to one inch past the wrist joint. The number of inches is your sleeve length."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Neck Size Measurement",size:"x-small"}),Object(St.jsx)("p",{children:"Measure around your neck at the point your shirt collar button would be. The number of inches shown is your correct size."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Size Charts",size:"small"}),Object(St.jsxs)("p",{children:[Object(St.jsx)("strong",{children:"PLEASE NOTE: "}),"The charts below are intended as a guide only. Garments vary from one pattern to another.  The style and cut may affect the fit of a garment. The comfort factor should also be considered. Some people wear their clothes looser or tighter than others. If you are uncertain about which size to choose, please call and we'll be happy to help you."]}),Object(St.jsxs)(fl,{children:[Object(St.jsx)($t,{text:"Mens (Shirts)",size:"x-small"}),Object(St.jsx)(Kc,{rows:hl,columns:[{name:"size",label:"Size"},{name:"chest",label:"Chest"},{name:"neck",label:"Neck"},{name:"sleeve",label:"Sleeve"}],size:"small"})]}),Object(St.jsxs)(fl,{children:[Object(St.jsx)($t,{text:"Womens",size:"x-small"}),Object(St.jsx)(Kc,{rows:xl,columns:[{name:"size",label:"Size"},{name:"bust",label:"Bust"},{name:"waist",label:"Waist"},{name:"hips",label:"Hips"}],size:"small"})]}),Object(St.jsxs)(fl,{children:[Object(St.jsx)($t,{text:"Dresses and Ensembles",size:"x-small"}),Object(St.jsx)(Kc,{rows:Ol,columns:[{name:"size",label:"Size"},{name:"sizeNum",label:"Size No."},{name:"bust",label:"Bust"},{name:"waist",label:"Waist"}],size:"small"})]})]})]})},yl=function(){return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"General Information",size:"x-small"}),Object(St.jsx)("p",{children:"We accept orders and ship worldwide.  For all overseas orders, please e-mail your interest and we will be happy to advise on cost for postage & packing."}),Object(St.jsx)("p",{children:"We endeavour to find the best value method of postage, but will always make sure your order is covered by insurance. This is usually through Royal Mail. If you require a fast shipping method, we can provide you with UPS or FedEx prices on request."}),Object(St.jsx)("p",{children:"Should you have any questions about the merchandise, please do not hesitate to call or e-mail us. Our goal is to provide you with a personal service so that you are completely happy with your purchase."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Delivery Times",size:"x-small"}),Object(St.jsx)("p",{children:"Under normal circumstances, delivery times for the UK are as stated for each item. Overseas orders are generally 4-6 weeks extra which will allow for a longer shipping period."}),Object(St.jsx)("p",{children:"None of the delivery times are set in stone. We will endeavour to get your order out to you as quickly as possible without compromising the quality of our workmanship. Each item is made to order and delivery times will depend on the back-log of work at that time. If you have any questions regarding delivery please do not hesitate to contact us."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Damaged Items",size:"x-small"}),Object(St.jsx)("p",{children:"Damages from shipping must be reported to us within 24 hours of receipt of your goods. Please save all packing material for inspection. Third party damage is not covered by our guarantee. We do not accept damage caused by the customer."})]})]})},vl=function(){return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Card Payments",size:"x-small"}),Object(St.jsx)("p",{children:"We accept credit and debit card payments on our online store in either GBP, USD or EUR currencies - just make sure to select the correct option during payment. If you would like to pay in a different currency, please contact us for a custom quote."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)($t,{text:"Other Payment Methods",size:"x-small"}),Object(St.jsxs)("p",{children:["We also accept PayPal as well as personal and bank cashier's checks made payable to",Object(St.jsx)("strong",{children:" Doves & Dandy's"}),". Funds must be cleared prior to goods being dispatched. With deposit checks, work will not be scheduled until funds are cleared."]})]})]})},wl=function(){return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)("p",{children:"As our leather and clothing products are made specifically to fit you, we ask that you take accurate measurements.  If when you have placed an order and discover you have made a mistake, please contact us immediately. Assuming we have not started your order, this will allow us to make any corrections necessary. Any corrective work may be charged. All of our custom and bespoke items are made to order and not before. We do not issue refunds on custom made items (Made to Measure), once work has commenced on the order."}),Object(St.jsx)("p",{children:"We guarantee the quality and high standards of our workmanship. If our product is not fit for purpose because of customer error, no refunds will be given. If our product is faulty or we have made an error, a full refund will be given."})]})},kl=function(){return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)("p",{children:"Doves & Dandy's Westernwear privacy policy is very simple."}),Object(St.jsx)("p",{children:"We will never send you e-mails and/or mailings other than in connection with your order, unless you have requested otherwise. When you order from us, all of your information is kept strictly confidential and is shared with no one. We will never sell your name or mailing address."}),Object(St.jsx)("p",{children:"Our customers are very important to us and we treat them as we expect to be treated by others. We will sometimes call you with a question on your order, if you do not want to be contacted by this method, please let us know. However, we would like to emphasize that it is the easiest way for us to confirm a question on your custom order so there is no delay in its construction or delivery. Many of our items are truly unique to the customer so to talk to you personally can make sure that everything is correctly measured."})]})},Cl=function(){return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsxs)("div",{children:[Object(St.jsx)("p",{children:Object(St.jsx)("strong",{children:"Is it safe to order on line?"})}),Object(St.jsx)("p",{children:"Yes, Doves and Dandy's is an SSL secure site. We use Stripe to process our online payments which is an industry standard and extremely secure.  We don't save your card details anywhere."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)("p",{children:Object(St.jsx)("strong",{children:"Can I give my preferences when ordering?"})}),Object(St.jsx)("p",{children:"Yes, when you are going through the checkout procedure, there is an information box for you to insert your request here. So you don't need to send a separate message."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)("p",{children:Object(St.jsx)("strong",{children:"How do I know what measurements are needed for the item I have purchased?"})}),Object(St.jsx)("p",{children:"Once your order is placed, we will send you an easy measurement chart and a list of the measurements required for your item."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)("p",{children:Object(St.jsx)("strong",{children:"Can I order if I don't live in the UK?"})}),Object(St.jsx)("p",{children:"Yes you can. We have sent our products all over the world.  Just let us know where it is going as this is a slightly different procedure. If you have found an item you would like to order, please contact us by email.  We can work out a price including shipping and you can pay via Paypal."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)("p",{children:Object(St.jsx)("strong",{children:"Can I make a part payment?"})}),Object(St.jsx)("p",{children:"You can make a part payment by arrangement prior to ordering. This is done by using a PayPal invoice. The deposit amount is a minimum of 50%. The balance will to paid before dispatch."})]}),Object(St.jsxs)("div",{children:[Object(St.jsx)("p",{children:Object(St.jsx)("strong",{children:"What happens if my measurements are wrong?"})}),Object(St.jsx)("p",{children:"Contact us immediately if you know you have made a mistake. We work with the information and measurements provided by you, the customer. If the information is wrong, this is the customers responsibility and any alterations may be charged."})]})]})},Sl=kt.b.div(ld||(ld=Object(wt.a)(["\n  margin: 0 1rem;\n"]))),Il=function(){var e=Object(pt.useState)(!1),t=Object(Ot.a)(e,2),n=t[0],r=t[1],a=Object(gt.h)().state;Object(pt.useEffect)((function(){if(a&&a.type){r(a.type);var e=document.getElementById(a.type).offsetTop;window.scroll(0,e-8)}}),[a]);var c=[{id:"sizing-info",title:"Sizing Info",component:gl},{id:"payment-info",title:"Payment Info",component:vl},{id:"delivery-info",title:"Delivery Info",component:yl},{id:"returns-policy",title:"Returns Policy",component:wl},{id:"privacy-policy",title:"Privacy Policy",component:kl},{id:"faq",title:"FAQ's",component:Cl}];return Object(St.jsx)(St.Fragment,{children:Object(St.jsx)(Sl,{children:c.map((function(e,t){var a,c=e.component;return Object(St.jsx)("div",{id:e.id,children:Object(St.jsxs)(ll.a,{expanded:n===e.id,onChange:(a=e.id,function(e,t){r(!!t&&a)}),sx:{backgroundColor:"transparent",padding:"1rem",margin:"1rem"},children:[Object(St.jsx)(ul.a,{expandIcon:Object(St.jsx)(ml.a,{}),"aria-controls":e.id,id:e.id,children:Object(St.jsx)(bl.a,{sx:{width:"150px"},children:e.title})}),Object(St.jsx)(jl.a,{children:Object(St.jsx)(c,{})})]})},t)}))})})},Dl=Object(kt.b)(Et)(ud||(ud=Object(wt.a)(["\n  height: auto;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  width: ","\n"])),(function(e){return e.width&&e.width})),Ul=function(e){var t=e.dbUser,n=e.updateDbUser,r=Wr(Qr.UpdateUser),a=Object(Ot.a)(r,1)[0],c=function(){var e=Object(Pn.a)(zn.a.mark((function e(r){var c,i;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({variables:Object(yt.a)({id:t._id},r)});case 2:return c=e.sent,i=c.data,e.next=6,n(i.updateOneUser);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(St.jsx)(Dl,{children:Object(St.jsx)(Nd,{dbUser:t,onValidDetails:c,buttonText:"confirm details",successMessage:"Details saved"})})},_l=function(e){var t=e.dbUser,n=e.updateDbUser,r=Wr(Qr.CreateAddress),a=Object(Ot.a)(r,1)[0],c=Wr(Qr.UpdateAddress),i=Object(Ot.a)(c,1)[0],s=Wr(Qr.UpdateUserAddresses),o=Object(Ot.a)(s,1)[0],d=function(){var e=Object(Pn.a)(zn.a.mark((function e(r){var c,s,d,l,u,b,j,p,m,h;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.addresses&&t.addresses.length){e.next=14;break}return e.next=4,a({variables:Object(yt.a)(Object(yt.a)({},r),{},{isDefault:!(t.addresses&&t.addresses.length)})});case 4:return c=e.sent,s=c.data,e.next=8,o({variables:{id:t._id,addresses:[s.insertOneAddress.address_id]}});case 8:return d=e.sent,l=d.data,e.next=12,n(l.updateOneUser);case 12:e.next=24;break;case 14:return e.next=16,i({variables:r});case 16:return u=e.sent,b=u.data,j=b.updateOneAddress,p=Object(Ji.a)(t.addresses),m=p.filter((function(e){return e.address_id!==j.address_id})),h=[].concat(Object(Ji.a)(m),[j]),e.next=24,n(Object(yt.a)(Object(yt.a)({},t),{},{addresses:h}));case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(0),new Error("Failed to save address. Error:",e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(St.jsx)(Dl,{children:Object(St.jsx)(Ho,{onAddressValid:d,buttonText:"save address",successMessage:"Address saved",defaultAddress:Do(t.addresses)})})},$l=kt.b.div(bd||(bd=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  border-radius: 6px;\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto 1rem;\n  overflow: hidden;\n"]))),zl=kt.b.div(jd||(jd=Object(wt.a)(["\n  display: flex:\n  flex-direction: column;\n  gap: 1rem;\n"]))),Pl=kt.b.div(pd||(pd=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  justify-content: flex-start;\n  align-items: flex-start;\n  min-height: 100px;\n  padding: 0.5rem;\n  border-top: 0.1px solid ",";\n"])),Ct.dark),ql=kt.b.div(md||(md=Object(wt.a)(["\n  overflow: hidden;\n"]))),El=kt.b.p(hd||(hd=Object(wt.a)(["\n  margin: 0 0 0.5rem;\n"]))),Fl=Object(kt.b)(Pl)(xd||(xd=Object(wt.a)(["\n  border: none;\n  justify-content: space-between;\n  height: auto;\n  @media (max-width: 768px) {\n    flex-direction: column-reverse;\n  }\n"]))),Tl=kt.b.div(Od||(Od=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]))),Al=kt.b.div(fd||(fd=Object(wt.a)(["\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.75rem;\n  background-color: ",";\n  color: #fff;\n  padding: 1.5rem 0;\n  overflow: hidden;\n    width: 340px;\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"])),Ct.green),Nl=kt.b.img(gd||(gd=Object(wt.a)(["\n  border-radius: 6px;\n  height: 100px;\n  width: auto;\n"]))),Rl=kt.b.div(yd||(yd=Object(wt.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex: 1;\n"]))),Wl=function(e){var t=e.order,n=Un(),r=n.isMd,a=n.isLg;return Object(St.jsxs)($l,{children:[Object(St.jsxs)(Fl,{children:[Object(St.jsxs)("div",{children:[Object(St.jsxs)(El,{children:["Reference: ",Object(St.jsx)("strong",{children:t.order_id})]}),Object(St.jsxs)(El,{children:["Amount:",Object(St.jsx)("strong",{children:" ".concat(Er(t.currency)).concat(zr(t.stripeAmountPaid))})]}),Object(St.jsxs)(El,{children:["Paid: ",Object(St.jsx)("strong",{children:ta(t.datePaid)})]}),Object(St.jsxs)(El,{children:["Order Accepted: ",Object(St.jsx)("strong",{children:ta(t.dateAccepted)})]}),Object(St.jsxs)(El,{children:["Dispatched: ",Object(St.jsx)("strong",{children:ta(t.dateDispatched)})]})]}),Object(St.jsxs)(Tl,{children:[(r||a)&&Object(St.jsx)(El,{children:"Current Status:"}),Object(St.jsx)(Al,{children:Zt.a.startCase(t.orderStatus)})]})]}),Object(St.jsx)(zl,{children:t&&t.orderItems?t.orderItems.map((function(e){return Object(St.jsxs)(Pl,{children:[Object(St.jsx)(Nl,{src:e.product.images[0],alt:e.product.name}),Object(St.jsxs)(ql,{children:[Object(St.jsx)(El,{children:e.product.name}),Object(St.jsxs)(El,{children:["Quantity: ",e.quantity]})]})]},e._id)})):Object(St.jsx)(Rl,{children:Object(St.jsx)(mn,{size:"3rem",colour:"blue"})})})]})},Ml=function(e){var t=e.dbUser,n=t.orders&&t.orders.filter((function(e){return"successful"===e.paymentStatus||"refunded"===e.paymentStatus})).sort((function(e,t){return t.datePaid-e.datePaid}));return Object(St.jsx)(Dl,{width:"100%",children:n?n.map((function(e){return Object(St.jsx)(Wl,{order:e},e._id)})):"no orders"})},Bl=n(574),Ll=n(609),Gl=["children","value","index"],Xl=function(e){var t=e.children,n=e.value,r=e.index,a=Object(vt.a)(e,Gl);return Object(St.jsx)("div",Object(yt.a)(Object(yt.a)({role:"tabpanel",hidden:n!==r,id:"tabpanel-".concat(r),"aria-labelledby":"tab-".concat(r)},a),{},{children:n===r&&Object(St.jsx)(bi.a,{sx:{p:3},children:t})}))},Hl=function(e){var t=e.items,n=e.initialItem,r=Object(pt.useState)({personal:0,delivery:1,orders:2}[n]||0),a=Object(Ot.a)(r,2),c=a[0],i=a[1],s=Un(),o=s.isXs,d=s.isSm;return Object(St.jsxs)(bi.a,{sx:{width:"100%"},children:[Object(St.jsx)(bi.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(St.jsx)(Bl.a,{value:c,onChange:function(e,t){i(t)},"aria-label":"my account selection",textColor:"inherit",variant:o||d?"fullWidth":null,centered:!(o||d),sx:{"MuiTabs-root":{justifyContent:"center",fontFamily:hn.standard},".MuiTabs-indicator":{backgroundColor:Ct.dark},".MuiTabs-centered":{gap:"3rem"}},children:t.map((function(e){return Object(St.jsx)(Ll.a,{label:e.label},Ua()())}))})}),t.map((function(e,t){return Object(St.jsx)(Xl,{value:c,index:t,children:e.component},Ua()())}))]})},Vl=function(){var e=Object(pt.useContext)(Bn),t=e.currentUser.dbUser,n=Object(gt.h)().state,r=function(){var t=Object(Pn.a)(zn.a.mark((function t(n){return zn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setCurrentUser((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:n})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=[{name:"personal",label:"Personal Details",component:Object(St.jsx)(Ul,{dbUser:t,updateDbUser:r})},{name:"delivery",label:"Delivery Details",component:Object(St.jsx)(_l,{dbUser:t,updateDbUser:r})},{name:"orders",label:"My Orders",component:Object(St.jsx)(Ml,{dbUser:t})}];return Object(St.jsx)(St.Fragment,{children:Object(St.jsx)("div",{style:{minHeight:"500px"},children:Object(St.jsx)(Hl,{items:a,initialItem:n&&(n.form||null)})})})},Yl=kt.b.div(vd||(vd=Object(wt.a)(["\n  border-radius: 5px;\n  box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  padding: 1rem;\n  margin: 1rem auto;\n  -webkit-box-shadow: -3px -1px 10px 2px rgba(0,0,0,0.2);\n  @media (min-width: 1024px) {\n    width: 40%;\n  }\n"]))),Jl=kt.b.div(wd||(wd=Object(wt.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 1rem;\n"]))),Kl=function(e){var t=e.form,n=Object(pt.useContext)(Bn),r=n.currentUser.dbUser,a=Object(pt.useState)(t||"login"),c=Object(Ot.a)(a,2),i=c[0],s=c[1],o=Object(pt.useState)({email:r&&r.email?r.email:"",password:"",confirmPassword:""}),d=Object(Ot.a)(o,2),l=d[0],u=d[1],b=Object(pt.useState)(),j=Object(Ot.a)(b,2),p=j[0],m=j[1],h=Wr(Qr.AddUser),x=Object(Ot.a)(h,1)[0],O=Wr(Qr.AddUserWithOrders),f=Object(Ot.a)(O,1)[0],g=Wr(Qr.UpdateUserAddresses),y=Object(Ot.a)(g,1)[0],v=Wr(Qr.DeleteUser),w=Object(Ot.a)(v,1)[0],k=Object(gt.g)(),C=function(e){u((function(t){return Object(yt.a)(Object(yt.a)({},t),{},Object(ti.a)({},e.target.name,e.target.value))}))},S=function(){var e=Object(Pn.a)(zn.a.mark((function e(t){var r,a,c;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.logIn(l.email,l.password);case 3:r=e.sent,(a=r.error)?(c=ko(a),m(c)):k.push("/my-account");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(Pn.a)(zn.a.mark((function e(t){var a,c,i,s,o,d,u,b,j,p,h,O,g,v,C,S,I,D,U;return zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=l.email,c=l.password,i=l.confirmPassword,c===i){e.next=5;break}return m("Passwords don't match"),e.abrupt("return");case 5:return e.prev=5,e.next=8,wo(n,a,c);case 8:if(s=e.sent,o=s.error){e.next=63;break}return d=r.orders&&r.orders.length&&{_id:r._id,user_id:r.user_id,firstName:r.firstName||"",lastName:r.lastName||"",phone:r.phone||"",orders:r.orders.map((function(e){return e.order_id})),addresses:r.addresses.map((function(e){return e.address_id}))},e.next=14,n.logIn(a,c);case 14:if(u=e.sent,b=u.user,!(j=u.error)){e.next=21;break}return p=ko(j),m(p),e.abrupt("return");case 21:if(e.t0=b.id,!d){e.next=26;break}e.t1=d.user_id,e.next=31;break;case 26:return e.t2="user-",e.next=29,Ua()();case 29:e.t3=e.sent,e.t1=e.t2.concat.call(e.t2,e.t3);case 31:if(e.t4=e.t1,e.t5=a,h={_id:e.t0,user_id:e.t4,email:e.t5,type:"customer"},d&&(console.log("is guest user"),O=Object(yt.a)(Object(yt.a)({},h),{},{firstName:d.firstName,lastName:d.lastName,phone:d.phone})),!d){e.next=53;break}return e.next=38,f({variables:Object(yt.a)(Object(yt.a)({},O),{},{orders:d.orders})});case 38:if(v=e.sent,C=v.data,!d.addresses||!d.addresses.length){e.next=48;break}return e.next=43,y({variables:{id:b.id,addresses:d.addresses}});case 43:S=e.sent,I=S.data,g=I.updateOneUser,e.next=49;break;case 48:g=C.insertOneUser;case 49:return e.next=51,w({variables:{id:d._id}});case 51:e.next=58;break;case 53:return e.next=55,x({variables:h});case 55:D=e.sent,U=D.data,g=U.insertOneUser;case 58:return e.next=60,n.setCurrentUser((function(e){return Object(yt.a)(Object(yt.a)({},e),{},{dbUser:g})}));case 60:k.push("/my-account"),e.next=64;break;case 63:m(o);case 64:e.next=69;break;case 66:throw e.prev=66,e.t6=e.catch(5),new Error("Failed to register user. Error:",e.t6.message);case 69:case"end":return e.stop()}}),e,null,[[5,66]])})));return function(t){return e.apply(this,arguments)}}(),D=Object(pt.useRef)(!1);return Object(pt.useEffect)((function(){Co(n.currentUser)&&k.replace("/my-account"),t&&i!==t&&!1===D.current&&(s(t),D.current=!0)}),[i,t,n.currentUser,k]),Object(St.jsxs)(Yl,{children:[Object(St.jsx)("div",{children:"login"===i?"Login to your account":"Register an account"}),Object(St.jsxs)("div",{children:[Object(St.jsx)(Ro,{autoFocus:!0,label:"Email Address",name:"email",type:"email",value:l.email,handleChange:C}),Object(St.jsx)(Ro,{label:"Password",name:"password",type:"password",value:l.password,handleChange:C}),"register"===i&&Object(St.jsx)(Ro,{label:"Confirm password",name:"confirmPassword",type:"password",value:l.confirmPassword,handleChange:C})]}),"login"===i?Object(St.jsxs)(Jl,{children:[Object(St.jsx)(fn,{text:"register new account",onClick:function(){return s("register")}}),Object(St.jsx)(fn,{text:"login",onClick:S,customStyles:{borderWidth:"0.15rem",borderColor:Ct.dark}})]}):Object(St.jsxs)(Jl,{children:[Object(St.jsx)(fn,{text:"login to your account",onClick:function(){return s("login")}}),Object(St.jsx)(fn,{text:"register",onClick:I,customStyles:{borderWidth:"0.15rem",borderColor:Ct.dark}})]}),p&&Object(St.jsx)($r,{text:p,type:"error"})]})},Ql=function(e){var t=e.requestedURL;return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)("h1",{children:"Sorry!"}),Object(St.jsx)("p",{children:t?"".concat(t," doesn't exist."):"This page doesn't exist."})]})},Zl=n(18),eu=n.n(Zl),tu=n(587),nu=n(321),ru=n(581),au=n(92),cu=function(){var e=Object(pt.useContext)(Os),t=e.currency,n=e.setCurrency,r=Object(pt.useState)(null),a=Object(Ot.a)(r,2),c=a[0],i=a[1],s=Boolean(c),o=function(){i(null)},d=function(e,t){e.preventDefault(),n(t),o()},l={GBP:Object(St.jsx)(au.e,{size:30,style:{color:Ct.dark}}),USD:Object(St.jsx)(au.c,{size:30,style:{color:Ct.dark}}),EUR:Object(St.jsx)(au.d,{size:30,style:{color:Ct.dark}})};return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(tu.a,{id:"currency-selection","aria-controls":s?"currency-selection":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:function(e){i(e.currentTarget)},endIcon:s?Object(St.jsx)(au.b,{size:15,style:{color:Ct.dark}}):Object(St.jsx)(au.a,{size:15,style:{color:Ct.dark}}),children:l[t]}),Object(St.jsx)(nu.a,{id:"currency-selection",anchorEl:c,open:s,onClose:o,MenuListProps:{"aria-labelledby":"currency-selection-button"},sx:{"& .MuiPaper-root":{backgroundColor:Ct.light,borderRadius:"8px"}},children:Object(St.jsxs)(ru.a,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem",padding:"0.75rem"},children:[Object(St.jsxs)(kr.a,{onClick:function(e){return d(e,"GBP")},children:[l.GBP,"\xa0British Pounds"]}),Object(St.jsxs)(kr.a,{onClick:function(e){return d(e,"USD")},children:[l.USD,"\xa0US Dollars"]}),Object(St.jsxs)(kr.a,{onClick:function(e){return d(e,"EUR")},children:[l.EUR,"\xa0Euros"]})]})})]})},iu=Ct.light,su=Ct.dark,ou=hn.fancyHeading,du=hn.normalHeading,lu=kt.b.header(kd||(kd=Object(wt.a)(["\n  background: ",";\n  width: 100%;\n  height: 70px;\n"])),iu),uu=kt.b.nav(Cd||(Cd=Object(wt.a)(["\n  display: flex;\n  align-items: center;\n  height: 100%;\n  padding: 0 0.5rem;\n"]))),bu=kt.b.h1(Sd||(Sd=Object(wt.a)(["\n  font-family: ",";\n  font-size: 1.5rem;\n  margin-bottom: 0;\n  :hover {\n    color: ",";\n  }\n"])),ou,su),ju=Object(kt.b)(ft.b)(Id||(Id=Object(wt.a)(["\n  color: ",";\n  :hover {\n    color: ",";\n  }\n"])),su,su),pu=kt.b.div(Dd||(Dd=Object(wt.a)(["\n  flex: 1;\n"]))),mu=kt.b.div(Ud||(Ud=Object(wt.a)(["\n  display: none;\n\n  @media (min-width: 1180px) {\n    display: block;\n  }\n"]))),hu=kt.b.ul(_d||(_d=Object(wt.a)(["\n  display: flex;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  align-items: center;\n"]))),xu=kt.b.li($d||($d=Object(wt.a)(["\n  color: ",";\n  font-size: 1.15rem;\n  padding: 0.5rem;\n"])),su),Ou=Object(kt.b)(ft.b)(zd||(zd=Object(wt.a)(["\n  color: ",";\n  font-family: ",";\n  text-decoration: none;\n  :active,\n  :hover {\n    color: ",";\n  }\n"])),su,du,su),fu=Object(kt.b)(xu)(Pd||(Pd=Object(wt.a)(["\n  border: 0.2px solid ",";\n  border-radius: 6px;\n  -webkit-box-shadow: -3px -1px 5px 2px rgba(0,0,0,0.1);\n  box-shadow: -3px -1px 5px 2px rgba(0,0,0,0.1);\n  :active,\n  :hover {\n    border: 2px solid ",";\n    cursor: pointer;\n  }\n  transition: border 0.1s ease-in-out;\n  width: 140px;\n  text-align: center;\n"])),su,su),gu=Object(kt.b)(Ou)(qd||(qd=Object(wt.a)(["\n  :active,\n  :hover {\n    text-decoration: none;\n  }\n"]))),yu=kt.b.span(Ed||(Ed=Object(wt.a)(["\n  font-size: 1.15rem;\n  padding-left: 4rem;\n"]))),vu=Object(kt.b)(Pt.a)(Fd||(Fd=Object(wt.a)(["\n  color: ",";\n  display: block;\n  :hover,\n  :active {\n    cursor: pointer;\n  }\n"])),su),wu=Object(kt.b)(en.j)(Td||(Td=Object(wt.a)(["\n  margin-left: 1.5rem;\n  color: ",";\n  :hover,\n  :active {\n    cursor: pointer;\n  }\n"])),su),ku=kt.b.div(Ad||(Ad=Object(wt.a)(["\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  margin-right: 0.5rem;\n  @media (min-width: 1180px) {\n    display: none;\n  }\n"]))),Cu=function(){var e=Object(pt.useContext)(Bn),t=Object(gt.g)(),n=Object(pt.useState)(null),r=Object(Ot.a)(n,2),a=r[0],c=r[1],i=Boolean(a),s=function(){c(null)},o=function(){var n=Object(Pn.a)(zn.a.mark((function n(r,a){return zn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault(),n.t0=a,n.next="logout"===n.t0?4:"login"===n.t0||"register"===n.t0?9:12;break;case 4:return n.next=6,e.logOut();case 6:return s(),t.push("/"),n.abrupt("break",14);case 9:return s(),t.push({pathname:"/login",state:{form:a}}),n.abrupt("break",14);case 12:s(),t.push("/".concat(a));case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),d={display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.5rem"};return Object(St.jsxs)("div",{children:[Object(St.jsx)(tu.a,{id:"my-account-button","aria-controls":i?"my-account-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:function(e){c(e.currentTarget)},endIcon:i?Object(St.jsx)(au.b,{size:15,style:{color:Ct.dark}}):Object(St.jsx)(au.a,{size:15,style:{color:Ct.dark}}),children:Object(St.jsx)(wu,{size:30})}),Object(St.jsx)(nu.a,{id:"my-account-menu",anchorEl:a,open:i,onClose:s,MenuListProps:{"aria-labelledby":"my-account-button"},sx:{"& .MuiPaper-root":{backgroundColor:Ct.light,borderRadius:"8px",padding:"0.5rem 1rem"}},children:e.currentUser&&Co(e.currentUser)?Object(St.jsxs)(ru.a,{sx:d,children:[Object(St.jsx)(kr.a,{children:e.currentUser.dbUser.email}),Object(St.jsx)(kr.a,{divider:!0}),So(e.currentUser)&&Object(St.jsx)(kr.a,{onClick:function(e){return o(e,"admin")},children:"Admin Dashboard"}),Object(St.jsx)(kr.a,{onClick:function(e){return o(e,"my-account")},children:"My Account"}),Object(St.jsx)(kr.a,{onClick:function(e){return o(e,"logout")},children:"Logout"})]}):Object(St.jsxs)(ru.a,{sx:d,children:[Object(St.jsx)(kr.a,{onClick:function(e){return o(e,"login")},children:"Login"}),Object(St.jsx)(kr.a,{onClick:function(e){return o(e,"register")},children:"Register"})]})})]})},Su=function(e){var t=e.handleToggle,n=Un(),r=n.isMd,a=n.isLg;return Object(St.jsx)(lu,{children:Object(St.jsxs)(uu,{children:[Object(St.jsx)(ju,{to:"/",children:Object(St.jsxs)(bu,{children:["Doves and Dandys",(r||a)&&" Westernwear"]})}),Object(St.jsx)(pu,{}),Object(St.jsx)(mu,{children:Object(St.jsxs)(hu,{children:[Object(St.jsx)(fu,{children:Object(St.jsx)(gu,{to:"/shop",children:"Browse Shop"})}),Object(St.jsx)(xu,{children:Object(St.jsx)(Ou,{className:"link",to:"/about-us",children:"About Us"})}),Object(St.jsx)(xu,{children:Object(St.jsx)(Ou,{className:"link",to:"/contact-us",children:"Contact Us"})}),Object(St.jsx)(xu,{children:Object(St.jsx)(Ou,{className:"link",to:"/customer-info",children:"Customer Info"})})]})}),Object(St.jsx)(mu,{children:Object(St.jsxs)(hu,{children:[Object(St.jsx)(xu,{children:Object(St.jsx)(yu,{children:Object(St.jsxs)(Ou,{className:"link",to:"/shop/cart",children:["Cart ",Object(St.jsx)(en.e,{size:30})]})})}),Object(St.jsx)(xu,{children:Object(St.jsx)(cu,{})}),Object(St.jsx)(Cu,{})]})}),Object(St.jsxs)(ku,{children:[Object(St.jsx)(cu,{}),Object(St.jsx)(vu,{size:25,onClick:t})]})]})})};Su.propsTypes={handleToggle:eu.a.func.isRequired};var Iu,Du,Uu,_u,$u,zu,Pu,qu=Su,Eu=Ct.light,Fu=Ct.dark,Tu=kt.b.nav(Iu||(Iu=Object(wt.a)(["\n  background: ",";\n  box-shadow: 2px 0px 7px rgba(0, 0, 0, 0.6);\n  display: fixed;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  width: 80%;\n  max-width: 350px;\n  z-index: 100;\n  @media (min-width: 1180px) {\n    display: none;\n  }\n"])),Eu),Au=kt.b.ul(Du||(Du=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  list-style: none;\n  padding: 0 1rem;\n  margin: 0;\n"]))),Nu=kt.b.li(Uu||(Uu=Object(wt.a)(["\n  padding: 0.25rem 0;\n  @media (min-width: 1180px) {\n    padding: 0.5rem 0;\n  }\n"]))),Ru=Object(kt.b)(ft.b)(_u||(_u=Object(wt.a)(["\n  color: ",";\n  font-size: 1.4rem;\n  font-weight: bold;\n  text-decoration: none;\n  :hover {\n    color: ",";\n  }\n"])),Fu,Fu),Wu=(kt.b.hr($u||($u=Object(wt.a)(["\n  border: none;\n  border-top: 5px solid grey;\n"]))),kt.b.div(zu||(zu=Object(wt.a)(["\n  flex: 1;\n"]))),function(e){var t,n=e.url,r=e.label,a=e.handleClick,c=e.handleClickComplete;return t=c?function(){a(),c()}:a,Object(St.jsx)(Nu,{children:Object(St.jsx)(Ru,{to:n,onClick:t,children:r})})}),Mu=function(e){var t=e.handleDrawerLinkClick,n=Object(pt.useContext)(Bn),r=[{url:"/shop/cart",label:"My Cart"}];return Co(n.currentUser)?(r.push({url:"/my-account",label:"My Account"},{url:"/",label:"Logout"}),So(n.currentUser)&&r.push({url:"/admin",label:"Admin Dashboard"})):r=[].concat(Object(Ji.a)(r),[{url:"/login",label:"Login"},{url:{pathname:"/login",state:{form:"register"}},label:"Register"}]),Object(St.jsx)(Tu,{children:Object(St.jsxs)(Au,{children:[Object(St.jsx)(In,{light:!0,spaceBelow:!0}),Object(St.jsx)(Wu,{url:"/",label:"Home",handleClick:t}),Object(St.jsx)(In,{light:!0,spaceBelow:!0}),[{url:"/shop",label:"Browse Shop"},{url:"/about-us",label:"About Us"},{url:"/contact-us",label:"Contact Us"},{url:"/customer-info",label:"Customer Info"}].map((function(e,n){return Object(St.jsx)(Wu,{url:e.url,label:e.label,handleClick:t},n)})),Object(St.jsx)(In,{light:!0,spaceBelow:!0}),r.map((function(e,r){return Object(St.jsx)(Wu,{url:e.url,label:e.label,handleClick:t,handleClickComplete:"Logout"===e.label?function(){return n.logOut()}:null},r)}))]})})},Bu=kt.b.div(Pu||(Pu=Object(wt.a)(["\n  background: rgba(0, 0, 0, 0.5);\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 99;\n\n  @media (min-width: 1180px) {\n    display: none;\n  }\n"]))),Lu=function(e){var t=e.handleBackgroundClick;return Object(St.jsx)(Bu,{onClick:t})};Lu.propsTypes={handleBackgroundClick:eu.a.func.isRequired};var Gu,Xu,Hu,Vu,Yu,Ju,Ku,Qu,Zu,eb,tb,nb,rb,ab,cb,ib,sb,ob,db,lb,ub=Lu,bb=Ct.light,jb=Object(kt.b)(ft.b)(Gu||(Gu=Object(wt.a)(["\n  color: ",";\n  :hover,\n  :active {\n    color: ",";\n    text-decoration: underline;\n  }\n"])),bb,bb),pb=Ct.dark,mb=Ct.darkFade,hb=Ct.light,xb=kt.b.div(Xu||(Xu=Object(wt.a)(["\n  background-color: ",";\n  color: ",";\n  padding: 1rem;\n  width: 100%;\n"])),pb,hb),Ob=kt.b.div(Hu||(Hu=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  /* max width is same as max width of image */\n  max-width: 414px;\n  margin: auto;\n  @media (min-width: 1024px) {\n    flex-direction: row;\n    justify-content: space-between;\n    max-width: 100%;\n  }\n"]))),fb=kt.b.div(Vu||(Vu=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),gb=kt.b.div(Yu||(Yu=Object(wt.a)(["\n  display: flex;\n  justify-content: space-between;\n  @media (min-width: 1024px) {\n    align-self: flex-end;\n  }\n"]))),yb=kt.b.div(Ju||(Ju=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  align-self: flex-start;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  margin: 1rem 0;\n  @media (min-width: 768px) {\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n  }\n  @media (min-width: 1024px) {\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: flex-start;\n  }\n"]))),vb=kt.b.div(Ku||(Ku=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-wrap: no-wrap;\n  @media (min-width: 1024px) {\n    padding-top: 0.1rem;\n  }\n"]))),wb=kt.b.div(Qu||(Qu=Object(wt.a)(["\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n"]))),kb=kt.b.img(Zu||(Zu=Object(wt.a)(["\n  height: 1.75rem;\n  width: auto;\n  :hover {\n    cursor: pointer;\n  }\n"]))),Cb=Object(kt.b)(en.i)(eb||(eb=Object(wt.a)(["\n  font-size: 2rem;\n  :hover {\n    cursor: pointer;\n  }\n"]))),Sb=kt.b.div(tb||(tb=Object(wt.a)(["\n  border-top: 1px solid ",";\n  display: flex;\n  justify-content: space-between;\n  padding-top: 1rem;\n  /* Move to right at laptop and above */\n  @media (min-width: 1024px) {\n    border-top: none;\n    border-left: 1px solid ",";\n    flex-direction: column;\n    padding-top: 0;\n    padding-left: 1rem;\n  }\n"])),hb,hb),Ib=kt.b.div(nb||(nb=Object(wt.a)(["\n  display: flex;\n  align-items: flex-end;\n  flex-direction: row;\n  gap: 1rem;\n  font-size: 1rem;\n  margin-right: 2rem;\n"]))),Db=kt.b.div(rb||(rb=Object(wt.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),Ub=kt.b.h6(ab||(ab=Object(wt.a)(["\n  color: ",";\n  font-size: 0.75rem;\n  margin: 0.5rem 0 0 0;\n  text-align: center;\n"])),mb),_b=function(){var e=Object(gt.g)(),t=(new Date).getFullYear();return Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(xb,{children:Object(St.jsxs)(Ob,{children:[Object(St.jsxs)(fb,{children:[Object(St.jsx)(xs,{src:"/images/shop-front.jpeg",alt:"Doves and Dandys shop front in Llandrindod Wells"}),Object(St.jsx)(gb,{children:Object(St.jsx)(yb,{children:Object(St.jsx)(vb,{children:Object(St.jsxs)(wb,{children:[Object(St.jsx)(kb,{src:"/images/find-us-on-facebook.png",onClick:function(){return window.open("https://www.facebook.com/Doves-Dandys-143717172379125","_blank")}}),Object(St.jsx)(Cb,{onClick:function(){return e.push("/contact-us")}})]})})})})]}),Object(St.jsxs)(Sb,{children:[Object(St.jsx)(Ib,{children:Object(St.jsxs)("div",{children:["Doves & Dandys Westernwear",Object(St.jsx)("br",{}),"Unit 1, Old Town Hall Workshops",Object(St.jsx)("br",{}),"Beaufort Road",Object(St.jsx)("br",{}),"Llandrindod Wells",Object(St.jsx)("br",{}),"Powys",Object(St.jsx)("br",{}),"LD1 5DL",Object(St.jsx)("br",{}),Object(St.jsx)("br",{}),Object(St.jsx)("p",{style:{margin:0},children:"(+44) 7869 375541"})]})}),Object(St.jsxs)(Db,{children:[Object(St.jsx)(jb,{to:{pathname:"/customer-info",state:{type:"sizing-info"}},children:"Sizing Info"}),Object(St.jsx)(jb,{to:{pathname:"/customer-info",state:{type:"payment-info"}},children:"Payment Info"}),Object(St.jsx)(jb,{to:{pathname:"/customer-info",state:{type:"delivery-info"}},children:"Delivery Info"}),Object(St.jsx)(jb,{to:{pathname:"/customer-info",state:{type:"returns-policy"}},children:"Returns Policy"}),Object(St.jsx)(jb,{to:{pathname:"/customer-info",state:{type:"privacy-policy"}},children:"Privacy Policy"}),Object(St.jsx)(jb,{to:{pathname:"/customer-info",state:{type:"faq"}},children:"FAQ's"})]})]})]})}),Object(St.jsxs)(Ub,{children:["\xa9 ",Object(St.jsx)("span",{children:t})," Doves and Dandys"]})]})},$b=n(319),zb=kt.b.div(cb||(cb=Object(wt.a)(["\n  background-color: ",";\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 3rem;\n  width: 100%;\n"])),Ct.dark,Ct.light),Pb=Object(kt.b)($b.a)(ib||(ib=Object(wt.a)(["\n  background-color: ",";\n  border-radius: 5px;\n  font-size: 1.5rem;\n  padding: 0.25rem;\n  margin-right: 1rem;\n  @media (min-width: 414px) {\n    font-size: 2rem;\n  }\n"])),Ct.light),qb=kt.b.h5(sb||(sb=Object(wt.a)(["\n  font-size: 1rem;\n  margin: 0;\n  @media (min-width: 414px) {\n    font-size: 1.5rem;\n  }\n"]))),Eb=function(){var e=Object(pt.useContext)(Os).currency,t={GBP:100,USD:150,EUR:150};return Object(St.jsxs)(zb,{children:[Object(St.jsx)(Pb,{}),Object(St.jsxs)(qb,{children:["FREE delivery on all orders over ","".concat(Er(e)).concat(t[e]),"!"]})]})},Fb=kt.b.section(ob||(ob=Object(wt.a)(["\n  min-height: 100vh;\n  background-color: rgba(230,231,203,1);\n  display: flex;\n  flex-direction: column;\n"]))),Tb=Object(kt.b)(Fb)(db||(db=Object(wt.a)(["\n  height: 100vh;\n  overflow-y: hidden;\n"]))),Ab=kt.b.div(lb||(lb=Object(wt.a)(["\n  flex: 1\n"]))),Nb=function(e){var t=e.children,n=Object(pt.useState)(!1),r=Object(Ot.a)(n,2),a=r[0],c=r[1],i=function(){c(!1)},s=Object(gt.h)().state,o=Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(Eb,{}),Object(St.jsx)(qu,{handleToggle:function(){return c((function(e){return!e}))}}),Object(St.jsx)(In,{dark:!0,spaceBelow:!0}),a&&Object(St.jsxs)(St.Fragment,{children:[Object(St.jsx)(Mu,{handleDrawerLinkClick:i}),Object(St.jsx)(ub,{handleBackgroundClick:i})]}),s&&Object.keys(s).length?Object(pt.cloneElement)(t,Object(yt.a)({},s)):t,Object(St.jsx)(Ab,{}),Object(St.jsx)(_b,{})]});return a?Object(St.jsx)(Tb,{children:o}):Object(St.jsx)(Fb,{children:o})},Rb=["component"],Wb=function(e){var t=e.component,n=Object(vt.a)(e,Rb),r=Object(pt.useContext)(Bn);return r.currentUser&&r.currentUser.dbUser?Object(St.jsx)(gt.b,Object(yt.a)(Object(yt.a)({},n),{},{render:function(e){return Co(r.currentUser)?Object(St.jsx)(t,Object(yt.a)({},e)):Object(St.jsx)(gt.a,{to:"/login"})}})):null},Mb=["component"],Bb=function(e){var t=e.component,n=Object(vt.a)(e,Mb),r=Object(pt.useContext)(Bn);return r.currentUser&&r.currentUser.dbUser?Object(St.jsx)(gt.b,Object(yt.a)(Object(yt.a)({},n),{},{render:function(e){return So(r.currentUser)?Object(St.jsx)(t,Object(yt.a)({},e)):Object(St.jsx)(gt.a,{to:"/login"})}})):null},Lb=function(){var e=Object(pt.useContext)(Bn).currentUser,t=Object(pt.useState)(!1),n=Object(Ot.a)(t,2),r=n[0],a=n[1];return Object(pt.useEffect)((function(){e&&e.dbUser&&a(!0)}),[e]),r?Object(St.jsx)(ft.a,{children:Object(St.jsxs)(gt.d,{children:[Object(St.jsx)(Bb,{exact:!0,path:"/admin",component:Zi}),Object(St.jsx)(gt.b,{exact:!0,path:"/",render:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(_n,{})})}}),Object(St.jsx)(gt.b,{exact:!0,path:"/about-us",render:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(el,{})})}}),Object(St.jsx)(gt.b,{exact:!0,path:"/contact-us",render:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(dl,{})})}}),Object(St.jsx)(gt.b,{exact:!0,path:"/customer-info",render:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(Il,{})})}}),Object(St.jsx)(gt.b,{exact:!0,path:"/login",render:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(Kl,{})})}}),Object(St.jsx)(Wb,{exact:!0,path:"/my-account",component:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(Vl,{})})}}),Object(St.jsx)(gt.b,{path:"/shop",render:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(Hd,{})})}}),Object(St.jsx)(gt.b,{path:"/",render:function(){return Object(St.jsx)(Nb,{children:Object(St.jsx)(Ql,{})})}})]})}):null},Gb=n(567);console.log("client in index.js",Mn),xt.a.render(Object(St.jsx)(mt.a.StrictMode,{children:Object(St.jsx)(Ln,{children:Object(St.jsx)(Gb.a,{client:Mn,children:Object(St.jsx)(fs,{children:Object(St.jsx)(ys,{children:Object(St.jsx)(Lb,{})})})})})}),document.getElementById("root"))}},[[498,1,2]]]);
//# sourceMappingURL=main.d26bd5c2.chunk.js.map